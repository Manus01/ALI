<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ALI</title>
    <meta name="description" content="ALI - web app" />

    <!-- Theme initializer: runs BEFORE stylesheet to prevent flash-of-incorrect-theme -->
    <script>
      (function () {
        try {
          const stored = localStorage.getItem('theme'); // 'light' | 'dark' | 'system' | null
          const mq = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');
          const prefersDark = mq ? mq.matches : false;
          function apply(choice) {
            const root = document.documentElement;
            if (!choice || choice === 'system') {
              root.classList.toggle('dark', prefersDark);
            } else {
              root.classList.toggle('dark', choice === 'dark');
            }
          }
          apply(stored);
          // expose for legacy calls
          window.setTheme = function (choice) {
            if (choice === 'system') localStorage.removeItem('theme'); else localStorage.setItem('theme', choice);
            const isDark = mq ? mq.matches : false;
            const root = document.documentElement;
            if (choice === 'system') root.classList.toggle('dark', isDark);
            else root.classList.toggle('dark', choice === 'dark');
          };
        } catch (e) {
          /* ignore storage errors */
        }
      })();
    </script>

    <link rel="stylesheet" href="/index.css">

    <link rel="modulepreload" href="./index.jsx">
  </head>
  <body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100">
    <div id="root"></div>
    <script type="module" crossorigin src="./index.jsx"></script>
  </body>
</html>
