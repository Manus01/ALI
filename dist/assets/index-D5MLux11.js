(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function D_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Uf={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function LE(){if(Gy)return Ol;Gy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:c}}return Ol.Fragment=e,Ol.jsx=n,Ol.jsxs=n,Ol}var Ky;function PE(){return Ky||(Ky=1,Uf.exports=LE()),Uf.exports}var m=PE(),zf={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function UE(){if(Qy)return ke;Qy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),k=Symbol.iterator;function L(R){return R===null||typeof R!="object"?null:(R=k&&R[k]||R["@@iterator"],typeof R=="function"?R:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,W={};function de(R,H,B){this.props=R,this.context=H,this.refs=W,this.updater=B||Q}de.prototype.isReactComponent={},de.prototype.setState=function(R,H){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,H,"setState")},de.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function pe(){}pe.prototype=de.prototype;function ae(R,H,B){this.props=R,this.context=H,this.refs=W,this.updater=B||Q}var ce=ae.prototype=new pe;ce.constructor=ae,ie(ce,de.prototype),ce.isPureReactComponent=!0;var te=Array.isArray;function oe(){}var C={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function A(R,H,B){var J=B.ref;return{$$typeof:s,type:R,key:H,ref:J!==void 0?J:null,props:B}}function I(R,H){return A(R.type,H,R.props)}function N(R){return typeof R=="object"&&R!==null&&R.$$typeof===s}function j(R){var H={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(B){return H[B]})}var O=/\/+/g;function Ue(R,H){return typeof R=="object"&&R!==null&&R.key!=null?j(""+R.key):H.toString(36)}function Xe(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(oe,oe):(R.status="pending",R.then(function(H){R.status==="pending"&&(R.status="fulfilled",R.value=H)},function(H){R.status==="pending"&&(R.status="rejected",R.reason=H)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function K(R,H,B,J,fe){var me=typeof R;(me==="undefined"||me==="boolean")&&(R=null);var Ie=!1;if(R===null)Ie=!0;else switch(me){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(R.$$typeof){case s:case e:Ie=!0;break;case x:return Ie=R._init,K(Ie(R._payload),H,B,J,fe)}}if(Ie)return fe=fe(R),Ie=J===""?"."+Ue(R,0):J,te(fe)?(B="",Ie!=null&&(B=Ie.replace(O,"$&/")+"/"),K(fe,H,B,"",function(fn){return fn})):fe!=null&&(N(fe)&&(fe=I(fe,B+(fe.key==null||R&&R.key===fe.key?"":(""+fe.key).replace(O,"$&/")+"/")+Ie)),H.push(fe)),1;Ie=0;var Ve=J===""?".":J+":";if(te(R))for(var Ge=0;Ge<R.length;Ge++)J=R[Ge],me=Ve+Ue(J,Ge),Ie+=K(J,H,B,me,fe);else if(Ge=L(R),typeof Ge=="function")for(R=Ge.call(R),Ge=0;!(J=R.next()).done;)J=J.value,me=Ve+Ue(J,Ge++),Ie+=K(J,H,B,me,fe);else if(me==="object"){if(typeof R.then=="function")return K(Xe(R),H,B,J,fe);throw H=String(R),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function le(R,H,B){if(R==null)return R;var J=[],fe=0;return K(R,J,"","",function(me){return H.call(B,me,fe++)}),J}function ye(R){if(R._status===-1){var H=R._result;H=H(),H.then(function(B){(R._status===0||R._status===-1)&&(R._status=1,R._result=B)},function(B){(R._status===0||R._status===-1)&&(R._status=2,R._result=B)}),R._status===-1&&(R._status=0,R._result=H)}if(R._status===1)return R._result.default;throw R._result}var X=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ue={map:le,forEach:function(R,H,B){le(R,function(){H.apply(this,arguments)},B)},count:function(R){var H=0;return le(R,function(){H++}),H},toArray:function(R){return le(R,function(H){return H})||[]},only:function(R){if(!N(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ke.Activity=w,ke.Children=ue,ke.Component=de,ke.Fragment=n,ke.Profiler=l,ke.PureComponent=ae,ke.StrictMode=r,ke.Suspense=y,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,ke.__COMPILER_RUNTIME={__proto__:null,c:function(R){return C.H.useMemoCache(R)}},ke.cache=function(R){return function(){return R.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(R,H,B){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var J=ie({},R.props),fe=R.key;if(H!=null)for(me in H.key!==void 0&&(fe=""+H.key),H)!S.call(H,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&H.ref===void 0||(J[me]=H[me]);var me=arguments.length-2;if(me===1)J.children=B;else if(1<me){for(var Ie=Array(me),Ve=0;Ve<me;Ve++)Ie[Ve]=arguments[Ve+2];J.children=Ie}return A(R.type,fe,J)},ke.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:c,_context:R},R},ke.createElement=function(R,H,B){var J,fe={},me=null;if(H!=null)for(J in H.key!==void 0&&(me=""+H.key),H)S.call(H,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(fe[J]=H[J]);var Ie=arguments.length-2;if(Ie===1)fe.children=B;else if(1<Ie){for(var Ve=Array(Ie),Ge=0;Ge<Ie;Ge++)Ve[Ge]=arguments[Ge+2];fe.children=Ve}if(R&&R.defaultProps)for(J in Ie=R.defaultProps,Ie)fe[J]===void 0&&(fe[J]=Ie[J]);return A(R,me,fe)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(R){return{$$typeof:p,render:R}},ke.isValidElement=N,ke.lazy=function(R){return{$$typeof:x,_payload:{_status:-1,_result:R},_init:ye}},ke.memo=function(R,H){return{$$typeof:v,type:R,compare:H===void 0?null:H}},ke.startTransition=function(R){var H=C.T,B={};C.T=B;try{var J=R(),fe=C.S;fe!==null&&fe(B,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(oe,X)}catch(me){X(me)}finally{H!==null&&B.types!==null&&(H.types=B.types),C.T=H}},ke.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},ke.use=function(R){return C.H.use(R)},ke.useActionState=function(R,H,B){return C.H.useActionState(R,H,B)},ke.useCallback=function(R,H){return C.H.useCallback(R,H)},ke.useContext=function(R){return C.H.useContext(R)},ke.useDebugValue=function(){},ke.useDeferredValue=function(R,H){return C.H.useDeferredValue(R,H)},ke.useEffect=function(R,H){return C.H.useEffect(R,H)},ke.useEffectEvent=function(R){return C.H.useEffectEvent(R)},ke.useId=function(){return C.H.useId()},ke.useImperativeHandle=function(R,H,B){return C.H.useImperativeHandle(R,H,B)},ke.useInsertionEffect=function(R,H){return C.H.useInsertionEffect(R,H)},ke.useLayoutEffect=function(R,H){return C.H.useLayoutEffect(R,H)},ke.useMemo=function(R,H){return C.H.useMemo(R,H)},ke.useOptimistic=function(R,H){return C.H.useOptimistic(R,H)},ke.useReducer=function(R,H,B){return C.H.useReducer(R,H,B)},ke.useRef=function(R){return C.H.useRef(R)},ke.useState=function(R){return C.H.useState(R)},ke.useSyncExternalStore=function(R,H,B){return C.H.useSyncExternalStore(R,H,B)},ke.useTransition=function(){return C.H.useTransition()},ke.version="19.2.0",ke}var Yy;function km(){return Yy||(Yy=1,zf.exports=UE()),zf.exports}var re=km();const zE=D_(re);var Bf={exports:{}},Dl={},qf={exports:{}},Hf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function BE(){return Xy||(Xy=1,(function(s){function e(K,le){var ye=K.length;K.push(le);e:for(;0<ye;){var X=ye-1>>>1,ue=K[X];if(0<l(ue,le))K[X]=le,K[ye]=ue,ye=X;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var le=K[0],ye=K.pop();if(ye!==le){K[0]=ye;e:for(var X=0,ue=K.length,R=ue>>>1;X<R;){var H=2*(X+1)-1,B=K[H],J=H+1,fe=K[J];if(0>l(B,ye))J<ue&&0>l(fe,B)?(K[X]=fe,K[J]=ye,X=J):(K[X]=B,K[H]=ye,X=H);else if(J<ue&&0>l(fe,ye))K[X]=fe,K[J]=ye,X=J;else break e}}return le}function l(K,le){var ye=K.sortIndex-le.sortIndex;return ye!==0?ye:K.id-le.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var y=[],v=[],x=1,w=null,k=3,L=!1,Q=!1,ie=!1,W=!1,de=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,ae=typeof setImmediate<"u"?setImmediate:null;function ce(K){for(var le=n(v);le!==null;){if(le.callback===null)r(v);else if(le.startTime<=K)r(v),le.sortIndex=le.expirationTime,e(y,le);else break;le=n(v)}}function te(K){if(ie=!1,ce(K),!Q)if(n(y)!==null)Q=!0,oe||(oe=!0,j());else{var le=n(v);le!==null&&Xe(te,le.startTime-K)}}var oe=!1,C=-1,S=5,A=-1;function I(){return W?!0:!(s.unstable_now()-A<S)}function N(){if(W=!1,oe){var K=s.unstable_now();A=K;var le=!0;try{e:{Q=!1,ie&&(ie=!1,pe(C),C=-1),L=!0;var ye=k;try{t:{for(ce(K),w=n(y);w!==null&&!(w.expirationTime>K&&I());){var X=w.callback;if(typeof X=="function"){w.callback=null,k=w.priorityLevel;var ue=X(w.expirationTime<=K);if(K=s.unstable_now(),typeof ue=="function"){w.callback=ue,ce(K),le=!0;break t}w===n(y)&&r(y),ce(K)}else r(y);w=n(y)}if(w!==null)le=!0;else{var R=n(v);R!==null&&Xe(te,R.startTime-K),le=!1}}break e}finally{w=null,k=ye,L=!1}le=void 0}}finally{le?j():oe=!1}}}var j;if(typeof ae=="function")j=function(){ae(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Ue=O.port2;O.port1.onmessage=N,j=function(){Ue.postMessage(null)}}else j=function(){de(N,0)};function Xe(K,le){C=de(function(){K(s.unstable_now())},le)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(K){K.callback=null},s.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<K?Math.floor(1e3/K):5},s.unstable_getCurrentPriorityLevel=function(){return k},s.unstable_next=function(K){switch(k){case 1:case 2:case 3:var le=3;break;default:le=k}var ye=k;k=le;try{return K()}finally{k=ye}},s.unstable_requestPaint=function(){W=!0},s.unstable_runWithPriority=function(K,le){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ye=k;k=K;try{return le()}finally{k=ye}},s.unstable_scheduleCallback=function(K,le,ye){var X=s.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?X+ye:X):ye=X,K){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ye+ue,K={id:x++,callback:le,priorityLevel:K,startTime:ye,expirationTime:ue,sortIndex:-1},ye>X?(K.sortIndex=ye,e(v,K),n(y)===null&&K===n(v)&&(ie?(pe(C),C=-1):ie=!0,Xe(te,ye-X))):(K.sortIndex=ue,e(y,K),Q||L||(Q=!0,oe||(oe=!0,j()))),K},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(K){var le=k;return function(){var ye=k;k=le;try{return K.apply(this,arguments)}finally{k=ye}}}})(Hf)),Hf}var $y;function qE(){return $y||($y=1,qf.exports=BE()),qf.exports}var Ff={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function HE(){if(Zy)return rn;Zy=1;var s=km();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,v,x){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:y,containerInfo:v,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,rn.createPortal=function(y,v){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return c(y,v,null,x)},rn.flushSync=function(y){var v=d.T,x=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=v,r.p=x,r.d.f()}},rn.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(y,v))},rn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},rn.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var x=v.as,w=p(x,v.crossOrigin),k=typeof v.integrity=="string"?v.integrity:void 0,L=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;x==="style"?r.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:w,integrity:k,fetchPriority:L}):x==="script"&&r.d.X(y,{crossOrigin:w,integrity:k,fetchPriority:L,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},rn.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var x=p(v.as,v.crossOrigin);r.d.M(y,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(y)},rn.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var x=v.as,w=p(x,v.crossOrigin);r.d.L(y,x,{crossOrigin:w,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},rn.preloadModule=function(y,v){if(typeof y=="string")if(v){var x=p(v.as,v.crossOrigin);r.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(y)},rn.requestFormReset=function(y){r.d.r(y)},rn.unstable_batchedUpdates=function(y,v){return y(v)},rn.useFormState=function(y,v,x){return d.H.useFormState(y,v,x)},rn.useFormStatus=function(){return d.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var Jy;function FE(){if(Jy)return Ff.exports;Jy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ff.exports=HE(),Ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wy;function GE(){if(Wy)return Dl;Wy=1;var s=qE(),e=km(),n=FE();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(c(t)!==t)throw Error(r(188))}function v(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,o=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return y(h),t;if(f===o)return y(h),i;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var _=!1,E=h.child;E;){if(E===a){_=!0,a=h,o=f;break}if(E===o){_=!0,o=h,a=f;break}E=E.sibling}if(!_){for(E=f.child;E;){if(E===a){_=!0,a=f,o=h;break}if(E===o){_=!0,o=f,a=h;break}E=E.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function x(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=x(t),i!==null)return i;t=t.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),ae=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var O=Symbol.for("react.client.reference");function Ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===O?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ie:return"Fragment";case de:return"Profiler";case W:return"StrictMode";case te:return"Suspense";case oe:return"SuspenseList";case A:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Q:return"Portal";case ae:return t.displayName||"Context";case pe:return(t._context.displayName||"Context")+".Consumer";case ce:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return i=t.displayName||null,i!==null?i:Ue(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return Ue(t(i))}catch{}}return null}var Xe=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},X=[],ue=-1;function R(t){return{current:t}}function H(t){0>ue||(t.current=X[ue],X[ue]=null,ue--)}function B(t,i){ue++,X[ue]=t.current,t.current=i}var J=R(null),fe=R(null),me=R(null),Ie=R(null);function Ve(t,i){switch(B(me,i),B(fe,t),B(J,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?my(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=my(i),t=gy(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}H(J),B(J,t)}function Ge(){H(J),H(fe),H(me)}function fn(t){t.memoizedState!==null&&B(Ie,t);var i=J.current,a=gy(i,t.type);i!==a&&(B(fe,t),B(J,a))}function un(t){fe.current===t&&(H(J),H(fe)),Ie.current===t&&(H(Ie),Il._currentValue=ye)}var mn,oi;function gn(t){if(mn===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);mn=i&&i[1]||"",oi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mn+t+oi}var As=!1;function Hn(t,i){if(!t||As)return"";As=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(G){var q=G}Reflect.construct(t,[],ee)}else{try{ee.call()}catch(G){q=G}t.call(ee.prototype)}}else{try{throw Error()}catch(G){q=G}(ee=t())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(G){if(G&&q&&typeof G.stack=="string")return[G.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),_=f[0],E=f[1];if(_&&E){var D=_.split(`
`),z=E.split(`
`);for(h=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(o===D.length||h===z.length)for(o=D.length-1,h=z.length-1;1<=o&&0<=h&&D[o]!==z[h];)h--;for(;1<=o&&0<=h;o--,h--)if(D[o]!==z[h]){if(o!==1||h!==1)do if(o--,h--,0>h||D[o]!==z[h]){var $=`
`+D[o].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=o&&0<=h);break}}}finally{As=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?gn(a):""}function Or(t,i){switch(t.tag){case 26:case 27:case 5:return gn(t.type);case 16:return gn("Lazy");case 13:return t.child!==i&&i!==null?gn("Suspense Fallback"):gn("Suspense");case 19:return gn("SuspenseList");case 0:case 15:return Hn(t.type,!1);case 11:return Hn(t.type.render,!1);case 1:return Hn(t.type,!0);case 31:return gn("Activity");default:return""}}function $i(t){try{var i="",a=null;do i+=Or(t,a),a=t,t=t.return;while(t);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ut=Object.prototype.hasOwnProperty,Et=s.unstable_scheduleCallback,Cn=s.unstable_cancelCallback,Dr=s.unstable_shouldYield,Cs=s.unstable_requestPaint,Pt=s.unstable_now,bi=s.unstable_getCurrentPriorityLevel,xi=s.unstable_ImmediatePriority,Is=s.unstable_UserBlockingPriority,li=s.unstable_NormalPriority,Mr=s.unstable_LowPriority,Ns=s.unstable_IdlePriority,ci=s.log,xa=s.unstable_setDisableYieldValue,In=null,gt=null;function Qt(t){if(typeof ci=="function"&&xa(t),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(In,t)}catch{}}var lt=Math.clz32?Math.clz32:Ta,Ea=Math.log,Rs=Math.LN2;function Ta(t){return t>>>=0,t===0?32:31-(Ea(t)/Rs|0)|0}var Fn=256,Zi=262144,_t=4194304;function Gn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Nn(t,i,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Gn(o):(_&=E,_!==0?h=Gn(_):a||(a=E&~t,a!==0&&(h=Gn(a))))):(E=o&~f,E!==0?h=Gn(E):_!==0?h=Gn(_):a||(a=o&~t,a!==0&&(h=Gn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function nn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Do(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jr(){var t=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),t}function Kn(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ji(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Mo(t,i,a,o,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,D=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var $=31-lt(a),ee=1<<$;E[$]=0,D[$]=-1;var q=z[$];if(q!==null)for(z[$]=null,$=0;$<q.length;$++){var G=q[$];G!==null&&(G.lane&=-536870913)}a&=~ee}o!==0&&Ei(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function Ei(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var o=31-lt(i);t.entangledLanes|=i,t.entanglements[o]=t.entanglements[o]|1073741824|a&261930}function Vr(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var o=31-lt(a),h=1<<o;h&i|t[o]&i&&(t[o]|=i),a&=~h}}function ks(t,i){var a=i&-i;return a=(a&42)!==0?1:Wi(a),(a&(t.suspendedLanes|i))!==0?0:a}function Wi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Y(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:Py(t.type))}function Re(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var ht=Math.random().toString(36).slice(2),Ke="__reactFiber$"+ht,Tt="__reactProps$"+ht,Qn="__reactContainer$"+ht,Sa="__reactEvents$"+ht,Fh="__reactListeners$"+ht,yc="__reactHandles$"+ht,vc="__reactResources$"+ht,Ti="__reactMarker$"+ht;function wa(t){delete t[Ke],delete t[Tt],delete t[Sa],delete t[Fh],delete t[yc]}function Si(t){var i=t[Ke];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Qn]||a[Ke]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Ey(t);t!==null;){if(a=t[Ke])return a;t=Ey(t)}return i}t=a,a=t.parentNode}return null}function Yn(t){if(t=t[Ke]||t[Qn]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Rn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function wi(t){var i=t[vc];return i||(i=t[vc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Rt(t){t[Ti]=!0}var jo=new Set,Vo={};function Ai(t,i){Ci(t,i),Ci(t+"Capture",i)}function Ci(t,i){for(Vo[t]=i,t=0;t<i.length;t++)jo.add(i[t])}var Lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Po={},Uo={};function _c(t){return ut.call(Uo,t)?!0:ut.call(Po,t)?!1:Lo.test(t)?Uo[t]=!0:(Po[t]=!0,!1)}function Aa(t,i,a){if(_c(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function kn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function kt(t,i,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+o)}}function Ft(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Os(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zo(t,i,a){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,f=o.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function tt(t){if(!t._valueTracker){var i=Os(t)?"checked":"value";t._valueTracker=zo(t,i,""+t[i])}}function Lr(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return t&&(o=Os(t)?t.checked?"true":"false":t.value),t=o,t!==a?(i.setValue(t),!0):!1}function Ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Pr=/[\n"\\]/g;function pn(t){return t.replace(Pr,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ca(t,i,a,o,h,f,_,E){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Ft(i)):t.value!==""+Ft(i)&&(t.value=""+Ft(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Bo(t,_,Ft(i)):a!=null?Bo(t,_,Ft(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Ft(E):t.removeAttribute("name")}function bc(t,i,a,o,h,f,_,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){tt(t);return}a=a!=null?""+Ft(a):"",i=i!=null?""+Ft(i):a,E||i===t.value||(t.value=i),t.defaultValue=i}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),tt(t)}function Bo(t,i,a){i==="number"&&Ii(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ds(t,i,a,o){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+Ft(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function xc(t,i,a){if(i!=null&&(i=""+Ft(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Ft(a):""}function Ms(t,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(Xe(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=Ft(i),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o),tt(t)}function yn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ec=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qo(t,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":o?t.setProperty(i,a):typeof a!="number"||a===0||Ec.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Ho(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in i)o=i[h],i.hasOwnProperty(h)&&a[h]!==o&&qo(t,h,o)}else for(var f in i)i.hasOwnProperty(f)&&qo(t,f,i[f])}function Ia(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),js=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(t){return js.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ui(){}var Fo=null;function Xn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vs=null,Ni=null;function Ur(t){var i=Yn(t);if(i&&(t=i.stateNode)){var a=t[Tt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ca(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==t&&o.form===t.form){var h=o[Tt]||null;if(!h)throw Error(r(90));Ca(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===t.form&&Lr(o)}break e;case"textarea":xc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ds(t,!!a.multiple,i,!1)}}}var Ra=!1;function Ls(t,i,a){if(Ra)return t(i,a);Ra=!0;try{var o=t(i);return o}finally{if(Ra=!1,(Vs!==null||Ni!==null)&&(pu(),Vs&&(i=Vs,t=Ni,Ni=Vs=null,Ur(i),t)))for(i=0;i<t.length;i++)Ur(t[i])}}function hi(t,i){var a=t.stateNode;if(a===null)return null;var o=a[Tt]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zr=!1;if($n)try{var st={};Object.defineProperty(st,"passive",{get:function(){zr=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{zr=!1}var Ri=null,Go=null,Br=null;function Ko(){if(Br)return Br;var t,i=Go,a=i.length,o,h="value"in Ri?Ri.value:Ri.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(o=1;o<=_&&i[a-o]===h[f-o];o++);return Br=h.slice(t,1<o?1-o:void 0)}function qr(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function es(){return!0}function di(){return!1}function Yt(t){function i(a,o,h,f,_){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?es:di,this.isPropagationStopped=di,this}return w(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),i}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=Yt(ts),Ps=w({},ts,{view:0,detail:0}),Qo=Yt(Ps),Us,ka,Oi,Oa=w({},Ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Us=t.screenX-Oi.screenX,ka=t.screenY-Oi.screenY):ka=Us=0,Oi=t),Us)},movementY:function(t){return"movementY"in t?t.movementY:ka}}),Yo=Yt(Oa),Hr=w({},Oa,{dataTransfer:0}),Sc=Yt(Hr),wc=w({},Ps,{relatedTarget:0}),Fr=Yt(wc),Xo=w({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Ac=Yt(Xo),Da=w({},ts,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cc=Yt(Da),Ic=w({},ts,{data:0}),Di=Yt(Ic),Nc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=kc[t])?!!i[t]:!1}function zs(){return Oc}var hn=w({},Ps,{key:function(t){if(t.key){var i=Nc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zs,charCode:function(t){return t.type==="keypress"?qr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dc=Yt(hn),Mc=w({},Oa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ns=Yt(Mc),u=w({},Ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zs}),g=Yt(u),b=w({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),T=Yt(b),P=w({},Oa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),F=Yt(P),he=w({},ts,{newState:0,oldState:0}),De=Yt(he),At=[9,13,27,32],Je=$n&&"CompositionEvent"in window,pt=null;$n&&"documentMode"in document&&(pt=document.documentMode);var Zn=$n&&"TextEvent"in window&&!pt,Mi=$n&&(!Je||pt&&8<pt&&11>=pt),fi=" ",mi=!1;function Gr(t,i){switch(t){case"keyup":return At.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ma(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ja=!1;function ox(t,i){switch(t){case"compositionend":return Ma(i);case"keypress":return i.which!==32?null:(mi=!0,fi);case"textInput":return t=i.data,t===fi&&mi?null:t;default:return null}}function lx(t,i){if(ja)return t==="compositionend"||!Je&&Gr(t,i)?(t=Ko(),Br=Go=Ri=null,ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Mi&&i.locale!=="ko"?null:i.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!cx[t.type]:i==="textarea"}function Ag(t,i,a,o){Vs?Ni?Ni.push(o):Ni=[o]:Vs=o,i=Tu(i,"onChange"),0<i.length&&(a=new ki("onChange","change",null,a,o),t.push({event:a,listeners:i}))}var $o=null,Zo=null;function ux(t){ly(t,0)}function jc(t){var i=Rn(t);if(Lr(i))return t}function Cg(t,i){if(t==="change")return i}var Ig=!1;if($n){var Gh;if($n){var Kh="oninput"in document;if(!Kh){var Ng=document.createElement("div");Ng.setAttribute("oninput","return;"),Kh=typeof Ng.oninput=="function"}Gh=Kh}else Gh=!1;Ig=Gh&&(!document.documentMode||9<document.documentMode)}function Rg(){$o&&($o.detachEvent("onpropertychange",kg),Zo=$o=null)}function kg(t){if(t.propertyName==="value"&&jc(Zo)){var i=[];Ag(i,Zo,t,Xn(t)),Ls(ux,i)}}function hx(t,i,a){t==="focusin"?(Rg(),$o=i,Zo=a,$o.attachEvent("onpropertychange",kg)):t==="focusout"&&Rg()}function dx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jc(Zo)}function fx(t,i){if(t==="click")return jc(i)}function mx(t,i){if(t==="input"||t==="change")return jc(i)}function gx(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var On=typeof Object.is=="function"?Object.is:gx;function Jo(t,i){if(On(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!ut.call(i,h)||!On(t[h],i[h]))return!1}return!0}function Og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dg(t,i){var a=Og(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=i&&o>=i)return{node:a,offset:i-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Og(a)}}function Mg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Mg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function jg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ii(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ii(t.document)}return i}function Qh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var px=$n&&"documentMode"in document&&11>=document.documentMode,Va=null,Yh=null,Wo=null,Xh=!1;function Vg(t,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Xh||Va==null||Va!==Ii(o)||(o=Va,"selectionStart"in o&&Qh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Wo&&Jo(Wo,o)||(Wo=o,o=Tu(Yh,"onSelect"),0<o.length&&(i=new ki("onSelect","select",null,i,a),t.push({event:i,listeners:o}),i.target=Va)))}function Kr(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var La={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},$h={},Lg={};$n&&(Lg=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Qr(t){if($h[t])return $h[t];if(!La[t])return t;var i=La[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Lg)return $h[t]=i[a];return t}var Pg=Qr("animationend"),Ug=Qr("animationiteration"),zg=Qr("animationstart"),yx=Qr("transitionrun"),vx=Qr("transitionstart"),_x=Qr("transitioncancel"),Bg=Qr("transitionend"),qg=new Map,Zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zh.push("scrollEnd");function gi(t,i){qg.set(t,i),Ai(i,[t])}var Vc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],Pa=0,Jh=0;function Lc(){for(var t=Pa,i=Jh=Pa=0;i<t;){var a=Jn[i];Jn[i++]=null;var o=Jn[i];Jn[i++]=null;var h=Jn[i];Jn[i++]=null;var f=Jn[i];if(Jn[i++]=null,o!==null&&h!==null){var _=o.pending;_===null?h.next=h:(h.next=_.next,_.next=h),o.pending=h}f!==0&&Hg(a,h,f)}}function Pc(t,i,a,o){Jn[Pa++]=t,Jn[Pa++]=i,Jn[Pa++]=a,Jn[Pa++]=o,Jh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Wh(t,i,a,o){return Pc(t,i,a,o),Uc(t)}function Yr(t,i){return Pc(t,null,null,i),Uc(t)}function Hg(t,i,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-lt(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[i]:o.push(i),i.lane=a|536870912),f):null}function Uc(t){if(50<xl)throw xl=0,cf=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ua={};function bx(t,i,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(t,i,a,o){return new bx(t,i,a,o)}function ed(t){return t=t.prototype,!(!t||!t.isReactComponent)}function is(t,i){var a=t.alternate;return a===null?(a=Dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function zc(t,i,a,o,h,f){var _=0;if(o=t,typeof t=="function")ed(t)&&(_=1);else if(typeof t=="string")_=wE(t,a,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case A:return t=Dn(31,a,i,h),t.elementType=A,t.lanes=f,t;case ie:return Xr(a.children,h,f,i);case W:_=8,h|=24;break;case de:return t=Dn(12,a,i,h|2),t.elementType=de,t.lanes=f,t;case te:return t=Dn(13,a,i,h),t.elementType=te,t.lanes=f,t;case oe:return t=Dn(19,a,i,h),t.elementType=oe,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ae:_=10;break e;case pe:_=9;break e;case ce:_=11;break e;case C:_=14;break e;case S:_=16,o=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return i=Dn(_,a,i,h),i.elementType=t,i.type=o,i.lanes=f,i}function Xr(t,i,a,o){return t=Dn(7,t,o,i),t.lanes=a,t}function td(t,i,a){return t=Dn(6,t,null,i),t.lanes=a,t}function Gg(t){var i=Dn(18,null,null,0);return i.stateNode=t,i}function nd(t,i,a){return i=Dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Kg=new WeakMap;function Wn(t,i){if(typeof t=="object"&&t!==null){var a=Kg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:$i(i)},Kg.set(t,i),i)}return{value:t,source:i,stack:$i(i)}}var za=[],Ba=0,Bc=null,el=0,ei=[],ti=0,Bs=null,ji=1,Vi="";function ss(t,i){za[Ba++]=el,za[Ba++]=Bc,Bc=t,el=i}function Qg(t,i,a){ei[ti++]=ji,ei[ti++]=Vi,ei[ti++]=Bs,Bs=t;var o=ji;t=Vi;var h=32-lt(o)-1;o&=~(1<<h),a+=1;var f=32-lt(i)+h;if(30<f){var _=h-h%5;f=(o&(1<<_)-1).toString(32),o>>=_,h-=_,ji=1<<32-lt(i)+h|a<<h|o,Vi=f+t}else ji=1<<f|a<<h|o,Vi=t}function id(t){t.return!==null&&(ss(t,1),Qg(t,1,0))}function sd(t){for(;t===Bc;)Bc=za[--Ba],za[Ba]=null,el=za[--Ba],za[Ba]=null;for(;t===Bs;)Bs=ei[--ti],ei[ti]=null,Vi=ei[--ti],ei[ti]=null,ji=ei[--ti],ei[ti]=null}function Yg(t,i){ei[ti++]=ji,ei[ti++]=Vi,ei[ti++]=Bs,ji=i.id,Vi=i.overflow,Bs=t}var Xt=null,dt=null,Qe=!1,qs=null,ni=!1,rd=Error(r(519));function Hs(t){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tl(Wn(i,t)),rd}function Xg(t){var i=t.stateNode,a=t.type,o=t.memoizedProps;switch(i[Ke]=t,i[Tt]=o,a){case"dialog":Pe("cancel",i),Pe("close",i);break;case"iframe":case"object":case"embed":Pe("load",i);break;case"video":case"audio":for(a=0;a<Tl.length;a++)Pe(Tl[a],i);break;case"source":Pe("error",i);break;case"img":case"image":case"link":Pe("error",i),Pe("load",i);break;case"details":Pe("toggle",i);break;case"input":Pe("invalid",i),bc(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Pe("invalid",i);break;case"textarea":Pe("invalid",i),Ms(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||dy(i.textContent,a)?(o.popover!=null&&(Pe("beforetoggle",i),Pe("toggle",i)),o.onScroll!=null&&Pe("scroll",i),o.onScrollEnd!=null&&Pe("scrollend",i),o.onClick!=null&&(i.onclick=ui),i=!0):i=!1,i||Hs(t,!0)}function $g(t){for(Xt=t.return;Xt;)switch(Xt.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Xt=Xt.return}}function qa(t){if(t!==Xt)return!1;if(!Qe)return $g(t),Qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Sf(t.type,t.memoizedProps)),a=!a),a&&dt&&Hs(t),$g(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=xy(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));dt=xy(t)}else i===27?(i=dt,ir(t.type)?(t=Nf,Nf=null,dt=t):dt=i):dt=Xt?si(t.stateNode.nextSibling):null;return!0}function $r(){dt=Xt=null,Qe=!1}function ad(){var t=qs;return t!==null&&(xn===null?xn=t:xn.push.apply(xn,t),qs=null),t}function tl(t){qs===null?qs=[t]:qs.push(t)}var od=R(null),Zr=null,rs=null;function Fs(t,i,a){B(od,i._currentValue),i._currentValue=a}function as(t){t._currentValue=od.current,H(od)}function ld(t,i,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),t===a)break;t=t.return}}function cd(t,i,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var D=0;D<i.length;D++)if(E.context===i[D]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),ld(f.return,a,t),o||(_=null);break e}f=E.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),ld(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Ha(t,i,a,o){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var E=h.type;On(h.pendingProps.value,_.value)||(t!==null?t.push(E):t=[E])}}else if(h===Ie.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Il):t=[Il])}h=h.return}t!==null&&cd(i,t,a,o),i.flags|=262144}function qc(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Jr(t){Zr=t,rs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function $t(t){return Zg(Zr,t)}function Hc(t,i){return Zr===null&&Jr(t),Zg(t,i)}function Zg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},rs===null){if(t===null)throw Error(r(308));rs=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else rs=rs.next=i;return a}var xx=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},Ex=s.unstable_scheduleCallback,Tx=s.unstable_NormalPriority,Ot={$$typeof:ae,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new xx,data:new Map,refCount:0}}function nl(t){t.refCount--,t.refCount===0&&Ex(Tx,function(){t.controller.abort()})}var il=null,hd=0,Fa=0,Ga=null;function Sx(t,i){if(il===null){var a=il=[];hd=0,Fa=gf(),Ga={status:"pending",value:void 0,then:function(o){a.push(o)}}}return hd++,i.then(Jg,Jg),i}function Jg(){if(--hd===0&&il!==null){Ga!==null&&(Ga.status="fulfilled");var t=il;il=null,Fa=0,Ga=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function wx(t,i){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Wg=K.S;K.S=function(t,i){V0=Pt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Sx(t,i),Wg!==null&&Wg(t,i)};var Wr=R(null);function dd(){var t=Wr.current;return t!==null?t:ct.pooledCache}function Fc(t,i){i===null?B(Wr,Wr.current):B(Wr,i.pool)}function ep(){var t=dd();return t===null?null:{parent:Ot._currentValue,pool:t}}var Ka=Error(r(460)),fd=Error(r(474)),Gc=Error(r(542)),Kc={then:function(){}};function tp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function np(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ui,ui),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,sp(t),t;default:if(typeof i.status=="string")i.then(ui,ui);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(o){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=o}},function(o){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,sp(t),t}throw ta=i,Ka}}function ea(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ta=a,Ka):a}}var ta=null;function ip(){if(ta===null)throw Error(r(459));var t=ta;return ta=null,t}function sp(t){if(t===Ka||t===Gc)throw Error(r(483))}var Qa=null,sl=0;function Qc(t){var i=sl;return sl+=1,Qa===null&&(Qa=[]),np(Qa,t,i)}function rl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Yc(t,i){throw i.$$typeof===k?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function rp(t){function i(V,M){if(t){var U=V.deletions;U===null?(V.deletions=[M],V.flags|=16):U.push(M)}}function a(V,M){if(!t)return null;for(;M!==null;)i(V,M),M=M.sibling;return null}function o(V){for(var M=new Map;V!==null;)V.key!==null?M.set(V.key,V):M.set(V.index,V),V=V.sibling;return M}function h(V,M){return V=is(V,M),V.index=0,V.sibling=null,V}function f(V,M,U){return V.index=U,t?(U=V.alternate,U!==null?(U=U.index,U<M?(V.flags|=67108866,M):U):(V.flags|=67108866,M)):(V.flags|=1048576,M)}function _(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function E(V,M,U,Z){return M===null||M.tag!==6?(M=td(U,V.mode,Z),M.return=V,M):(M=h(M,U),M.return=V,M)}function D(V,M,U,Z){var Ee=U.type;return Ee===ie?$(V,M,U.props.children,Z,U.key):M!==null&&(M.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&ea(Ee)===M.type)?(M=h(M,U.props),rl(M,U),M.return=V,M):(M=zc(U.type,U.key,U.props,null,V.mode,Z),rl(M,U),M.return=V,M)}function z(V,M,U,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==U.containerInfo||M.stateNode.implementation!==U.implementation?(M=nd(U,V.mode,Z),M.return=V,M):(M=h(M,U.children||[]),M.return=V,M)}function $(V,M,U,Z,Ee){return M===null||M.tag!==7?(M=Xr(U,V.mode,Z,Ee),M.return=V,M):(M=h(M,U),M.return=V,M)}function ee(V,M,U){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=td(""+M,V.mode,U),M.return=V,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case L:return U=zc(M.type,M.key,M.props,null,V.mode,U),rl(U,M),U.return=V,U;case Q:return M=nd(M,V.mode,U),M.return=V,M;case S:return M=ea(M),ee(V,M,U)}if(Xe(M)||j(M))return M=Xr(M,V.mode,U,null),M.return=V,M;if(typeof M.then=="function")return ee(V,Qc(M),U);if(M.$$typeof===ae)return ee(V,Hc(V,M),U);Yc(V,M)}return null}function q(V,M,U,Z){var Ee=M!==null?M.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Ee!==null?null:E(V,M,""+U,Z);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case L:return U.key===Ee?D(V,M,U,Z):null;case Q:return U.key===Ee?z(V,M,U,Z):null;case S:return U=ea(U),q(V,M,U,Z)}if(Xe(U)||j(U))return Ee!==null?null:$(V,M,U,Z,null);if(typeof U.then=="function")return q(V,M,Qc(U),Z);if(U.$$typeof===ae)return q(V,M,Hc(V,U),Z);Yc(V,U)}return null}function G(V,M,U,Z,Ee){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return V=V.get(U)||null,E(M,V,""+Z,Ee);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case L:return V=V.get(Z.key===null?U:Z.key)||null,D(M,V,Z,Ee);case Q:return V=V.get(Z.key===null?U:Z.key)||null,z(M,V,Z,Ee);case S:return Z=ea(Z),G(V,M,U,Z,Ee)}if(Xe(Z)||j(Z))return V=V.get(U)||null,$(M,V,Z,Ee,null);if(typeof Z.then=="function")return G(V,M,U,Qc(Z),Ee);if(Z.$$typeof===ae)return G(V,M,U,Hc(M,Z),Ee);Yc(M,Z)}return null}function ve(V,M,U,Z){for(var Ee=null,$e=null,_e=M,je=M=0,Be=null;_e!==null&&je<U.length;je++){_e.index>je?(Be=_e,_e=null):Be=_e.sibling;var Ze=q(V,_e,U[je],Z);if(Ze===null){_e===null&&(_e=Be);break}t&&_e&&Ze.alternate===null&&i(V,_e),M=f(Ze,M,je),$e===null?Ee=Ze:$e.sibling=Ze,$e=Ze,_e=Be}if(je===U.length)return a(V,_e),Qe&&ss(V,je),Ee;if(_e===null){for(;je<U.length;je++)_e=ee(V,U[je],Z),_e!==null&&(M=f(_e,M,je),$e===null?Ee=_e:$e.sibling=_e,$e=_e);return Qe&&ss(V,je),Ee}for(_e=o(_e);je<U.length;je++)Be=G(_e,V,je,U[je],Z),Be!==null&&(t&&Be.alternate!==null&&_e.delete(Be.key===null?je:Be.key),M=f(Be,M,je),$e===null?Ee=Be:$e.sibling=Be,$e=Be);return t&&_e.forEach(function(lr){return i(V,lr)}),Qe&&ss(V,je),Ee}function Se(V,M,U,Z){if(U==null)throw Error(r(151));for(var Ee=null,$e=null,_e=M,je=M=0,Be=null,Ze=U.next();_e!==null&&!Ze.done;je++,Ze=U.next()){_e.index>je?(Be=_e,_e=null):Be=_e.sibling;var lr=q(V,_e,Ze.value,Z);if(lr===null){_e===null&&(_e=Be);break}t&&_e&&lr.alternate===null&&i(V,_e),M=f(lr,M,je),$e===null?Ee=lr:$e.sibling=lr,$e=lr,_e=Be}if(Ze.done)return a(V,_e),Qe&&ss(V,je),Ee;if(_e===null){for(;!Ze.done;je++,Ze=U.next())Ze=ee(V,Ze.value,Z),Ze!==null&&(M=f(Ze,M,je),$e===null?Ee=Ze:$e.sibling=Ze,$e=Ze);return Qe&&ss(V,je),Ee}for(_e=o(_e);!Ze.done;je++,Ze=U.next())Ze=G(_e,V,je,Ze.value,Z),Ze!==null&&(t&&Ze.alternate!==null&&_e.delete(Ze.key===null?je:Ze.key),M=f(Ze,M,je),$e===null?Ee=Ze:$e.sibling=Ze,$e=Ze);return t&&_e.forEach(function(VE){return i(V,VE)}),Qe&&ss(V,je),Ee}function ot(V,M,U,Z){if(typeof U=="object"&&U!==null&&U.type===ie&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case L:e:{for(var Ee=U.key;M!==null;){if(M.key===Ee){if(Ee=U.type,Ee===ie){if(M.tag===7){a(V,M.sibling),Z=h(M,U.props.children),Z.return=V,V=Z;break e}}else if(M.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===S&&ea(Ee)===M.type){a(V,M.sibling),Z=h(M,U.props),rl(Z,U),Z.return=V,V=Z;break e}a(V,M);break}else i(V,M);M=M.sibling}U.type===ie?(Z=Xr(U.props.children,V.mode,Z,U.key),Z.return=V,V=Z):(Z=zc(U.type,U.key,U.props,null,V.mode,Z),rl(Z,U),Z.return=V,V=Z)}return _(V);case Q:e:{for(Ee=U.key;M!==null;){if(M.key===Ee)if(M.tag===4&&M.stateNode.containerInfo===U.containerInfo&&M.stateNode.implementation===U.implementation){a(V,M.sibling),Z=h(M,U.children||[]),Z.return=V,V=Z;break e}else{a(V,M);break}else i(V,M);M=M.sibling}Z=nd(U,V.mode,Z),Z.return=V,V=Z}return _(V);case S:return U=ea(U),ot(V,M,U,Z)}if(Xe(U))return ve(V,M,U,Z);if(j(U)){if(Ee=j(U),typeof Ee!="function")throw Error(r(150));return U=Ee.call(U),Se(V,M,U,Z)}if(typeof U.then=="function")return ot(V,M,Qc(U),Z);if(U.$$typeof===ae)return ot(V,M,Hc(V,U),Z);Yc(V,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,M!==null&&M.tag===6?(a(V,M.sibling),Z=h(M,U),Z.return=V,V=Z):(a(V,M),Z=td(U,V.mode,Z),Z.return=V,V=Z),_(V)):a(V,M)}return function(V,M,U,Z){try{sl=0;var Ee=ot(V,M,U,Z);return Qa=null,Ee}catch(_e){if(_e===Ka||_e===Gc)throw _e;var $e=Dn(29,_e,null,V.mode);return $e.lanes=Z,$e.return=V,$e}finally{}}}var na=rp(!0),ap=rp(!1),Gs=!1;function md(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ks(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qs(t,i,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(We&2)!==0){var h=o.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),o.pending=i,i=Uc(t),Hg(t,null,a),i}return Pc(t,o,i,a),Uc(t)}function al(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Vr(t,a)}}function pd(t,i){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var yd=!1;function ol(){if(yd){var t=Ga;if(t!==null)throw t}}function ll(t,i,a,o){yd=!1;var h=t.updateQueue;Gs=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var D=E,z=D.next;D.next=null,_===null?f=z:_.next=z,_=D;var $=t.alternate;$!==null&&($=$.updateQueue,E=$.lastBaseUpdate,E!==_&&(E===null?$.firstBaseUpdate=z:E.next=z,$.lastBaseUpdate=D))}if(f!==null){var ee=h.baseState;_=0,$=z=D=null,E=f;do{var q=E.lane&-536870913,G=q!==E.lane;if(G?(ze&q)===q:(o&q)===q){q!==0&&q===Fa&&(yd=!0),$!==null&&($=$.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ve=t,Se=E;q=i;var ot=a;switch(Se.tag){case 1:if(ve=Se.payload,typeof ve=="function"){ee=ve.call(ot,ee,q);break e}ee=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=Se.payload,q=typeof ve=="function"?ve.call(ot,ee,q):ve,q==null)break e;ee=w({},ee,q);break e;case 2:Gs=!0}}q=E.callback,q!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[q]:G.push(q))}else G={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},$===null?(z=$=G,D=ee):$=$.next=G,_|=q;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;G=E,E=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);$===null&&(D=ee),h.baseState=D,h.firstBaseUpdate=z,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),Js|=_,t.lanes=_,t.memoizedState=ee}}function op(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function lp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)op(a[t],i)}var Ya=R(null),Xc=R(0);function cp(t,i){t=gs,B(Xc,t),B(Ya,i),gs=t|i.baseLanes}function vd(){B(Xc,gs),B(Ya,Ya.current)}function _d(){gs=Xc.current,H(Ya),H(Xc)}var Mn=R(null),ii=null;function Ys(t){var i=t.alternate;B(Ct,Ct.current&1),B(Mn,t),ii===null&&(i===null||Ya.current!==null||i.memoizedState!==null)&&(ii=t)}function bd(t){B(Ct,Ct.current),B(Mn,t),ii===null&&(ii=t)}function up(t){t.tag===22?(B(Ct,Ct.current),B(Mn,t),ii===null&&(ii=t)):Xs()}function Xs(){B(Ct,Ct.current),B(Mn,Mn.current)}function jn(t){H(Mn),ii===t&&(ii=null),H(Ct)}var Ct=R(0);function $c(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cf(a)||If(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var os=0,Me=null,rt=null,Dt=null,Zc=!1,Xa=!1,ia=!1,Jc=0,cl=0,$a=null,Ax=0;function St(){throw Error(r(321))}function xd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!On(t[a],i[a]))return!1;return!0}function Ed(t,i,a,o,h,f){return os=f,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=t===null||t.memoizedState===null?Qp:Ld,ia=!1,f=a(o,h),ia=!1,Xa&&(f=dp(i,a,o,h)),hp(t),f}function hp(t){K.H=dl;var i=rt!==null&&rt.next!==null;if(os=0,Dt=rt=Me=null,Zc=!1,cl=0,$a=null,i)throw Error(r(300));t===null||Mt||(t=t.dependencies,t!==null&&qc(t)&&(Mt=!0))}function dp(t,i,a,o){Me=t;var h=0;do{if(Xa&&($a=null),cl=0,Xa=!1,25<=h)throw Error(r(301));if(h+=1,Dt=rt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}K.H=Yp,f=i(a,o)}while(Xa);return f}function Cx(){var t=K.H,i=t.useState()[0];return i=typeof i.then=="function"?ul(i):i,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Me.flags|=1024),i}function Td(){var t=Jc!==0;return Jc=0,t}function Sd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function wd(t){if(Zc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Zc=!1}os=0,Dt=rt=Me=null,Xa=!1,cl=Jc=0,$a=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Me.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function It(){if(rt===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var i=Dt===null?Me.memoizedState:Dt.next;if(i!==null)Dt=i,rt=t;else{if(t===null)throw Me.alternate===null?Error(r(467)):Error(r(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Dt===null?Me.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Wc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ul(t){var i=cl;return cl+=1,$a===null&&($a=[]),t=np($a,t,i),i=Me,(Dt===null?i.memoizedState:Dt.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?Qp:Ld),t}function eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ul(t);if(t.$$typeof===ae)return $t(t)}throw Error(r(438,String(t)))}function Ad(t){var i=null,a=Me.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Me.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Wc(),Me.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),o=0;o<t;o++)a[o]=I;return i.index++,a}function ls(t,i){return typeof i=="function"?i(t):i}function tu(t){var i=It();return Cd(i,rt,t)}function Cd(t,i,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var E=_=null,D=null,z=i,$=!1;do{var ee=z.lane&-536870913;if(ee!==z.lane?(ze&ee)===ee:(os&ee)===ee){var q=z.revertLane;if(q===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ee===Fa&&($=!0);else if((os&q)===q){z=z.next,q===Fa&&($=!0);continue}else ee={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},D===null?(E=D=ee,_=f):D=D.next=ee,Me.lanes|=q,Js|=q;ee=z.action,ia&&a(f,ee),f=z.hasEagerState?z.eagerState:a(f,ee)}else q={lane:ee,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},D===null?(E=D=q,_=f):D=D.next=q,Me.lanes|=ee,Js|=ee;z=z.next}while(z!==null&&z!==i);if(D===null?_=f:D.next=E,!On(f,t.memoizedState)&&(Mt=!0,$&&(a=Ga,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=D,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Id(t){var i=It(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);On(f,i.memoizedState)||(Mt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,o]}function fp(t,i,a){var o=Me,h=It(),f=Qe;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!On((rt||h).memoizedState,a);if(_&&(h.memoizedState=a,Mt=!0),h=h.queue,kd(pp.bind(null,o,h,t),[t]),h.getSnapshot!==i||_||Dt!==null&&Dt.memoizedState.tag&1){if(o.flags|=2048,Za(9,{destroy:void 0},gp.bind(null,o,h,a,i),null),ct===null)throw Error(r(349));f||(os&127)!==0||mp(o,i,a)}return a}function mp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i=Wc(),Me.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function gp(t,i,a,o){i.value=a,i.getSnapshot=o,yp(i)&&vp(t)}function pp(t,i,a){return a(function(){yp(i)&&vp(t)})}function yp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!On(t,a)}catch{return!0}}function vp(t){var i=Yr(t,2);i!==null&&En(i,t,2)}function Nd(t){var i=dn();if(typeof t=="function"){var a=t;if(t=a(),ia){Qt(!0);try{a()}finally{Qt(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:t},i}function _p(t,i,a,o){return t.baseState=a,Cd(t,rt,typeof o=="function"?o:ls)}function Ix(t,i,a,o,h){if(su(t))throw Error(r(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};K.T!==null?a(!0):f.isTransition=!1,o(f),a=i.pending,a===null?(f.next=i.pending=f,bp(i,f)):(f.next=a.next,i.pending=a.next=f)}}function bp(t,i){var a=i.action,o=i.payload,h=t.state;if(i.isTransition){var f=K.T,_={};K.T=_;try{var E=a(h,o),D=K.S;D!==null&&D(_,E),xp(t,i,E)}catch(z){Rd(t,i,z)}finally{f!==null&&_.types!==null&&(f.types=_.types),K.T=f}}else try{f=a(h,o),xp(t,i,f)}catch(z){Rd(t,i,z)}}function xp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Ep(t,i,o)},function(o){return Rd(t,i,o)}):Ep(t,i,a)}function Ep(t,i,a){i.status="fulfilled",i.value=a,Tp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,bp(t,a)))}function Rd(t,i,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Tp(i),i=i.next;while(i!==o)}t.action=null}function Tp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Sp(t,i){return i}function wp(t,i){if(Qe){var a=ct.formState;if(a!==null){e:{var o=Me;if(Qe){if(dt){t:{for(var h=dt,f=ni;h.nodeType!==8;){if(!f){h=null;break t}if(h=si(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){dt=si(h.nextSibling),o=h.data==="F!";break e}}Hs(o)}o=!1}o&&(i=a[0])}}return a=dn(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sp,lastRenderedState:i},a.queue=o,a=Fp.bind(null,Me,o),o.dispatch=a,o=Nd(!1),f=Vd.bind(null,Me,!1,o.queue),o=dn(),h={state:i,dispatch:null,action:t,pending:null},o.queue=h,a=Ix.bind(null,Me,h,f,a),h.dispatch=a,o.memoizedState=t,[i,a,!1]}function Ap(t){var i=It();return Cp(i,rt,t)}function Cp(t,i,a){if(i=Cd(t,i,Sp)[0],t=tu(ls)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=ul(i)}catch(_){throw _===Ka?Gc:_}else o=i;i=It();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Me.flags|=2048,Za(9,{destroy:void 0},Nx.bind(null,h,a),null)),[o,f,t]}function Nx(t,i){t.action=i}function Ip(t){var i=It(),a=rt;if(a!==null)return Cp(i,a,t);It(),i=i.memoizedState,a=It();var o=a.queue.dispatch;return a.memoizedState=t,[i,o,!1]}function Za(t,i,a,o){return t={tag:t,create:a,deps:o,inst:i,next:null},i=Me.updateQueue,i===null&&(i=Wc(),Me.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,i.lastEffect=t),t}function Np(){return It().memoizedState}function nu(t,i,a,o){var h=dn();Me.flags|=t,h.memoizedState=Za(1|i,{destroy:void 0},a,o===void 0?null:o)}function iu(t,i,a,o){var h=It();o=o===void 0?null:o;var f=h.memoizedState.inst;rt!==null&&o!==null&&xd(o,rt.memoizedState.deps)?h.memoizedState=Za(i,f,a,o):(Me.flags|=t,h.memoizedState=Za(1|i,f,a,o))}function Rp(t,i){nu(8390656,8,t,i)}function kd(t,i){iu(2048,8,t,i)}function Rx(t){Me.flags|=4;var i=Me.updateQueue;if(i===null)i=Wc(),Me.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function kp(t){var i=It().memoizedState;return Rx({ref:i,nextImpl:t}),function(){if((We&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Op(t,i){return iu(4,2,t,i)}function Dp(t,i){return iu(4,4,t,i)}function Mp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function jp(t,i,a){a=a!=null?a.concat([t]):null,iu(4,4,Mp.bind(null,i,t),a)}function Od(){}function Vp(t,i){var a=It();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&xd(i,o[1])?o[0]:(a.memoizedState=[t,i],t)}function Lp(t,i){var a=It();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&xd(i,o[1]))return o[0];if(o=t(),ia){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[o,i],o}function Dd(t,i,a){return a===void 0||(os&1073741824)!==0&&(ze&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=P0(),Me.lanes|=t,Js|=t,a)}function Pp(t,i,a,o){return On(a,i)?a:Ya.current!==null?(t=Dd(t,a,o),On(t,i)||(Mt=!0),t):(os&42)===0||(os&1073741824)!==0&&(ze&261930)===0?(Mt=!0,t.memoizedState=a):(t=P0(),Me.lanes|=t,Js|=t,i)}function Up(t,i,a,o,h){var f=le.p;le.p=f!==0&&8>f?f:8;var _=K.T,E={};K.T=E,Vd(t,!1,i,a);try{var D=h(),z=K.S;if(z!==null&&z(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var $=wx(D,o);hl(t,i,$,Pn(t))}else hl(t,i,o,Pn(t))}catch(ee){hl(t,i,{then:function(){},status:"rejected",reason:ee},Pn())}finally{le.p=f,_!==null&&E.types!==null&&(_.types=E.types),K.T=_}}function kx(){}function Md(t,i,a,o){if(t.tag!==5)throw Error(r(476));var h=zp(t).queue;Up(t,h,i,ye,a===null?kx:function(){return Bp(t),a(o)})}function zp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:ye},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ls,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Bp(t){var i=zp(t);i.next===null&&(i=t.alternate.memoizedState),hl(t,i.next.queue,{},Pn())}function jd(){return $t(Il)}function qp(){return It().memoizedState}function Hp(){return It().memoizedState}function Ox(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Pn();t=Ks(a);var o=Qs(i,t,a);o!==null&&(En(o,i,a),al(o,i,a)),i={cache:ud()},t.payload=i;return}i=i.return}}function Dx(t,i,a){var o=Pn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},su(t)?Gp(i,a):(a=Wh(t,i,a,o),a!==null&&(En(a,t,o),Kp(a,i,o)))}function Fp(t,i,a){var o=Pn();hl(t,i,a,o)}function hl(t,i,a,o){var h={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(su(t))Gp(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,E=f(_,a);if(h.hasEagerState=!0,h.eagerState=E,On(E,_))return Pc(t,i,h,0),ct===null&&Lc(),!1}catch{}finally{}if(a=Wh(t,i,h,o),a!==null)return En(a,t,o),Kp(a,i,o),!0}return!1}function Vd(t,i,a,o){if(o={lane:2,revertLane:gf(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},su(t)){if(i)throw Error(r(479))}else i=Wh(t,a,o,2),i!==null&&En(i,t,2)}function su(t){var i=t.alternate;return t===Me||i!==null&&i===Me}function Gp(t,i){Xa=Zc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Kp(t,i,a){if((a&4194048)!==0){var o=i.lanes;o&=t.pendingLanes,a|=o,i.lanes=a,Vr(t,a)}}var dl={readContext:$t,use:eu,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};dl.useEffectEvent=St;var Qp={readContext:$t,use:eu,useCallback:function(t,i){return dn().memoizedState=[t,i===void 0?null:i],t},useContext:$t,useEffect:Rp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,nu(4194308,4,Mp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return nu(4194308,4,t,i)},useInsertionEffect:function(t,i){nu(4,2,t,i)},useMemo:function(t,i){var a=dn();i=i===void 0?null:i;var o=t();if(ia){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[o,i],o},useReducer:function(t,i,a){var o=dn();if(a!==void 0){var h=a(i);if(ia){Qt(!0);try{a(i)}finally{Qt(!1)}}}else h=i;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Dx.bind(null,Me,t),[o.memoizedState,t]},useRef:function(t){var i=dn();return t={current:t},i.memoizedState=t},useState:function(t){t=Nd(t);var i=t.queue,a=Fp.bind(null,Me,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Od,useDeferredValue:function(t,i){var a=dn();return Dd(a,t,i)},useTransition:function(){var t=Nd(!1);return t=Up.bind(null,Me,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var o=Me,h=dn();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ct===null)throw Error(r(349));(ze&127)!==0||mp(o,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Rp(pp.bind(null,o,f,t),[t]),o.flags|=2048,Za(9,{destroy:void 0},gp.bind(null,o,f,a,i),null),a},useId:function(){var t=dn(),i=ct.identifierPrefix;if(Qe){var a=Vi,o=ji;a=(o&~(1<<32-lt(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Jc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=Ax++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:jd,useFormState:wp,useActionState:wp,useOptimistic:function(t){var i=dn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Vd.bind(null,Me,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ad,useCacheRefresh:function(){return dn().memoizedState=Ox.bind(null,Me)},useEffectEvent:function(t){var i=dn(),a={impl:t};return i.memoizedState=a,function(){if((We&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Ld={readContext:$t,use:eu,useCallback:Vp,useContext:$t,useEffect:kd,useImperativeHandle:jp,useInsertionEffect:Op,useLayoutEffect:Dp,useMemo:Lp,useReducer:tu,useRef:Np,useState:function(){return tu(ls)},useDebugValue:Od,useDeferredValue:function(t,i){var a=It();return Pp(a,rt.memoizedState,t,i)},useTransition:function(){var t=tu(ls)[0],i=It().memoizedState;return[typeof t=="boolean"?t:ul(t),i]},useSyncExternalStore:fp,useId:qp,useHostTransitionStatus:jd,useFormState:Ap,useActionState:Ap,useOptimistic:function(t,i){var a=It();return _p(a,rt,t,i)},useMemoCache:Ad,useCacheRefresh:Hp};Ld.useEffectEvent=kp;var Yp={readContext:$t,use:eu,useCallback:Vp,useContext:$t,useEffect:kd,useImperativeHandle:jp,useInsertionEffect:Op,useLayoutEffect:Dp,useMemo:Lp,useReducer:Id,useRef:Np,useState:function(){return Id(ls)},useDebugValue:Od,useDeferredValue:function(t,i){var a=It();return rt===null?Dd(a,t,i):Pp(a,rt.memoizedState,t,i)},useTransition:function(){var t=Id(ls)[0],i=It().memoizedState;return[typeof t=="boolean"?t:ul(t),i]},useSyncExternalStore:fp,useId:qp,useHostTransitionStatus:jd,useFormState:Ip,useActionState:Ip,useOptimistic:function(t,i){var a=It();return rt!==null?_p(a,rt,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ad,useCacheRefresh:Hp};Yp.useEffectEvent=kp;function Pd(t,i,a,o){i=t.memoizedState,a=a(o,i),a=a==null?i:w({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ud={enqueueSetState:function(t,i,a){t=t._reactInternals;var o=Pn(),h=Ks(o);h.payload=i,a!=null&&(h.callback=a),i=Qs(t,h,o),i!==null&&(En(i,t,o),al(i,t,o))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var o=Pn(),h=Ks(o);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Qs(t,h,o),i!==null&&(En(i,t,o),al(i,t,o))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Pn(),o=Ks(a);o.tag=2,i!=null&&(o.callback=i),i=Qs(t,o,a),i!==null&&(En(i,t,a),al(i,t,a))}};function Xp(t,i,a,o,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,_):i.prototype&&i.prototype.isPureReactComponent?!Jo(a,o)||!Jo(h,f):!0}function $p(t,i,a,o){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==t&&Ud.enqueueReplaceState(i,i.state,null)}function sa(t,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(t=t.defaultProps){a===i&&(a=w({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Zp(t){Vc(t)}function Jp(t){console.error(t)}function Wp(t){Vc(t)}function ru(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function e0(t,i,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function zd(t,i,a){return a=Ks(a),a.tag=3,a.payload={element:null},a.callback=function(){ru(t,i)},a}function t0(t){return t=Ks(t),t.tag=3,t}function n0(t,i,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){e0(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){e0(i,a,o),typeof h!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function Mx(t,i,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ha(i,a,h,!0),a=Mn.current,a!==null){switch(a.tag){case 31:case 13:return ii===null?yu():a.alternate===null&&wt===0&&(wt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Kc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),df(t,o,h)),!1;case 22:return a.flags|=65536,o===Kc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),df(t,o,h)),!1}throw Error(r(435,a.tag))}return df(t,o,h),yu(),!1}if(Qe)return i=Mn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,o!==rd&&(t=Error(r(422),{cause:o}),tl(Wn(t,a)))):(o!==rd&&(i=Error(r(423),{cause:o}),tl(Wn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Wn(o,a),h=zd(t.stateNode,o,h),pd(t,h),wt!==4&&(wt=2)),!1;var f=Error(r(520),{cause:o});if(f=Wn(f,a),bl===null?bl=[f]:bl.push(f),wt!==4&&(wt=2),i===null)return!0;o=Wn(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=zd(a.stateNode,o,t),pd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ws===null||!Ws.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=t0(h),n0(h,t,a,o),pd(a,h),!1}a=a.return}while(a!==null);return!1}var Bd=Error(r(461)),Mt=!1;function Zt(t,i,a,o){i.child=t===null?ap(i,null,a,o):na(i,t.child,a,o)}function i0(t,i,a,o,h){a=a.render;var f=i.ref;if("ref"in o){var _={};for(var E in o)E!=="ref"&&(_[E]=o[E])}else _=o;return Jr(i),o=Ed(t,i,a,_,f,h),E=Td(),t!==null&&!Mt?(Sd(t,i,h),cs(t,i,h)):(Qe&&E&&id(i),i.flags|=1,Zt(t,i,o,h),i.child)}function s0(t,i,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!ed(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,r0(t,i,f,o,h)):(t=zc(a.type,null,o,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Xd(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:Jo,a(_,o)&&t.ref===i.ref)return cs(t,i,h)}return i.flags|=1,t=is(f,o),t.ref=i.ref,t.return=i,i.child=t}function r0(t,i,a,o,h){if(t!==null){var f=t.memoizedProps;if(Jo(f,o)&&t.ref===i.ref)if(Mt=!1,i.pendingProps=o=f,Xd(t,h))(t.flags&131072)!==0&&(Mt=!0);else return i.lanes=t.lanes,cs(t,i,h)}return qd(t,i,a,o,h)}function a0(t,i,a,o){var h=o.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(o=i.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~f}else o=0,i.child=null;return o0(t,i,f,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fc(i,f!==null?f.cachePool:null),f!==null?cp(i,f):vd(),up(i);else return o=i.lanes=536870912,o0(t,i,f!==null?f.baseLanes|a:a,a,o)}else f!==null?(Fc(i,f.cachePool),cp(i,f),Xs(),i.memoizedState=null):(t!==null&&Fc(i,null),vd(),Xs());return Zt(t,i,h,a),i.child}function fl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function o0(t,i,a,o,h){var f=dd();return f=f===null?null:{parent:Ot._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&Fc(i,null),vd(),up(i),t!==null&&Ha(t,i,o,!0),i.childLanes=h,null}function au(t,i){return i=lu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function l0(t,i,a){return na(i,t.child,null,a),t=au(i,i.pendingProps),t.flags|=2,jn(i),i.memoizedState=null,t}function jx(t,i,a){var o=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Qe){if(o.mode==="hidden")return t=au(i,o),i.lanes=536870912,fl(null,t);if(bd(i),(t=dt)?(t=by(t,ni),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Bs!==null?{id:ji,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},a=Gg(t),a.return=i,i.child=a,Xt=i,dt=null)):t=null,t===null)throw Hs(i);return i.lanes=536870912,null}return au(i,o)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(bd(i),h)if(i.flags&256)i.flags&=-257,i=l0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(r(558));else if(Mt||Ha(t,i,a,!1),h=(a&t.childLanes)!==0,Mt||h){if(o=ct,o!==null&&(_=ks(o,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Yr(t,_),En(o,t,_),Bd;yu(),i=l0(t,i,a)}else t=f.treeContext,dt=si(_.nextSibling),Xt=i,Qe=!0,qs=null,ni=!1,t!==null&&Yg(i,t),i=au(i,o),i.flags|=4096;return i}return t=is(t.child,{mode:o.mode,children:o.children}),t.ref=i.ref,i.child=t,t.return=i,t}function ou(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function qd(t,i,a,o,h){return Jr(i),a=Ed(t,i,a,o,void 0,h),o=Td(),t!==null&&!Mt?(Sd(t,i,h),cs(t,i,h)):(Qe&&o&&id(i),i.flags|=1,Zt(t,i,a,h),i.child)}function c0(t,i,a,o,h,f){return Jr(i),i.updateQueue=null,a=dp(i,o,a,h),hp(t),o=Td(),t!==null&&!Mt?(Sd(t,i,f),cs(t,i,f)):(Qe&&o&&id(i),i.flags|=1,Zt(t,i,a,f),i.child)}function u0(t,i,a,o,h){if(Jr(i),i.stateNode===null){var f=Ua,_=a.contextType;typeof _=="object"&&_!==null&&(f=$t(_)),f=new a(o,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Ud,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=o,f.state=i.memoizedState,f.refs={},md(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?$t(_):Ua,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Pd(i,a,_,o),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Ud.enqueueReplaceState(f,f.state,null),ll(i,o,f,h),ol(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(t===null){f=i.stateNode;var E=i.memoizedProps,D=sa(a,E);f.props=D;var z=f.context,$=a.contextType;_=Ua,typeof $=="object"&&$!==null&&(_=$t($));var ee=a.getDerivedStateFromProps;$=typeof ee=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=i.pendingProps!==E,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||z!==_)&&$p(i,f,o,_),Gs=!1;var q=i.memoizedState;f.state=q,ll(i,o,f,h),ol(),z=i.memoizedState,E||q!==z||Gs?(typeof ee=="function"&&(Pd(i,a,ee,o),z=i.memoizedState),(D=Gs||Xp(i,a,D,o,q,z,_))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=z),f.props=o,f.state=z,f.context=_,o=D):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{f=i.stateNode,gd(t,i),_=i.memoizedProps,$=sa(a,_),f.props=$,ee=i.pendingProps,q=f.context,z=a.contextType,D=Ua,typeof z=="object"&&z!==null&&(D=$t(z)),E=a.getDerivedStateFromProps,(z=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==ee||q!==D)&&$p(i,f,o,D),Gs=!1,q=i.memoizedState,f.state=q,ll(i,o,f,h),ol();var G=i.memoizedState;_!==ee||q!==G||Gs||t!==null&&t.dependencies!==null&&qc(t.dependencies)?(typeof E=="function"&&(Pd(i,a,E,o),G=i.memoizedState),($=Gs||Xp(i,a,$,o,q,G,D)||t!==null&&t.dependencies!==null&&qc(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,G,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,G,D)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=G),f.props=o,f.state=G,f.context=D,o=$):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),o=!1)}return f=o,ou(t,i),o=(i.flags&128)!==0,f||o?(f=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&o?(i.child=na(i,t.child,null,h),i.child=na(i,null,a,h)):Zt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=cs(t,i,h),t}function h0(t,i,a,o){return $r(),i.flags|=256,Zt(t,i,a,o),i.child}var Hd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fd(t){return{baseLanes:t,cachePool:ep()}}function Gd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Ln),t}function d0(t,i,a){var o=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Ct.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Qe){if(h?Ys(i):Xs(),(t=dt)?(t=by(t,ni),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Bs!==null?{id:ji,overflow:Vi}:null,retryLane:536870912,hydrationErrors:null},a=Gg(t),a.return=i,i.child=a,Xt=i,dt=null)):t=null,t===null)throw Hs(i);return If(t)?i.lanes=32:i.lanes=536870912,null}var E=o.children;return o=o.fallback,h?(Xs(),h=i.mode,E=lu({mode:"hidden",children:E},h),o=Xr(o,h,a,null),E.return=i,o.return=i,E.sibling=o,i.child=E,o=i.child,o.memoizedState=Fd(a),o.childLanes=Gd(t,_,a),i.memoizedState=Hd,fl(null,o)):(Ys(i),Kd(i,E))}var D=t.memoizedState;if(D!==null&&(E=D.dehydrated,E!==null)){if(f)i.flags&256?(Ys(i),i.flags&=-257,i=Qd(t,i,a)):i.memoizedState!==null?(Xs(),i.child=t.child,i.flags|=128,i=null):(Xs(),E=o.fallback,h=i.mode,o=lu({mode:"visible",children:o.children},h),E=Xr(E,h,a,null),E.flags|=2,o.return=i,E.return=i,o.sibling=E,i.child=o,na(i,t.child,null,a),o=i.child,o.memoizedState=Fd(a),o.childLanes=Gd(t,_,a),i.memoizedState=Hd,i=fl(null,o));else if(Ys(i),If(E)){if(_=E.nextSibling&&E.nextSibling.dataset,_)var z=_.dgst;_=z,o=Error(r(419)),o.stack="",o.digest=_,tl({value:o,source:null,stack:null}),i=Qd(t,i,a)}else if(Mt||Ha(t,i,a,!1),_=(a&t.childLanes)!==0,Mt||_){if(_=ct,_!==null&&(o=ks(_,a),o!==0&&o!==D.retryLane))throw D.retryLane=o,Yr(t,o),En(_,t,o),Bd;Cf(E)||yu(),i=Qd(t,i,a)}else Cf(E)?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,dt=si(E.nextSibling),Xt=i,Qe=!0,qs=null,ni=!1,t!==null&&Yg(i,t),i=Kd(i,o.children),i.flags|=4096);return i}return h?(Xs(),E=o.fallback,h=i.mode,D=t.child,z=D.sibling,o=is(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,z!==null?E=is(z,E):(E=Xr(E,h,a,null),E.flags|=2),E.return=i,o.return=i,o.sibling=E,i.child=o,fl(null,o),o=i.child,E=t.child.memoizedState,E===null?E=Fd(a):(h=E.cachePool,h!==null?(D=Ot._currentValue,h=h.parent!==D?{parent:D,pool:D}:h):h=ep(),E={baseLanes:E.baseLanes|a,cachePool:h}),o.memoizedState=E,o.childLanes=Gd(t,_,a),i.memoizedState=Hd,fl(t.child,o)):(Ys(i),a=t.child,t=a.sibling,a=is(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Kd(t,i){return i=lu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function lu(t,i){return t=Dn(22,t,null,i),t.lanes=0,t}function Qd(t,i,a){return na(i,t.child,null,a),t=Kd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function f0(t,i,a){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i),ld(t.return,i,a)}function Yd(t,i,a,o,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function m0(t,i,a){var o=i.pendingProps,h=o.revealOrder,f=o.tail;o=o.children;var _=Ct.current,E=(_&2)!==0;if(E?(_=_&1|2,i.flags|=128):_&=1,B(Ct,_),Zt(t,i,o,a),o=Qe?el:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,a,i);else if(t.tag===19)f0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&$c(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Yd(i,!1,h,a,f,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&$c(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Yd(i,!0,a,null,f,o);break;case"together":Yd(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function cs(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Js|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Ha(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=is(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=is(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Xd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&qc(t)))}function Vx(t,i,a){switch(i.tag){case 3:Ve(i,i.stateNode.containerInfo),Fs(i,Ot,t.memoizedState.cache),$r();break;case 27:case 5:fn(i);break;case 4:Ve(i,i.stateNode.containerInfo);break;case 10:Fs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,bd(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(Ys(i),i.flags|=128,null):(a&i.child.childLanes)!==0?d0(t,i,a):(Ys(i),t=cs(t,i,a),t!==null?t.sibling:null);Ys(i);break;case 19:var h=(t.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ha(t,i,a,!1),o=(a&i.childLanes)!==0),h){if(o)return m0(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),B(Ct,Ct.current),o)break;return null;case 22:return i.lanes=0,a0(t,i,a,i.pendingProps);case 24:Fs(i,Ot,t.memoizedState.cache)}return cs(t,i,a)}function g0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Mt=!0;else{if(!Xd(t,a)&&(i.flags&128)===0)return Mt=!1,Vx(t,i,a);Mt=(t.flags&131072)!==0}else Mt=!1,Qe&&(i.flags&1048576)!==0&&Qg(i,el,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(t=ea(i.elementType),i.type=t,typeof t=="function")ed(t)?(o=sa(t,o),i.tag=1,i=u0(null,i,t,o,a)):(i.tag=0,i=qd(null,i,t,o,a));else{if(t!=null){var h=t.$$typeof;if(h===ce){i.tag=11,i=i0(null,i,t,o,a);break e}else if(h===C){i.tag=14,i=s0(null,i,t,o,a);break e}}throw i=Ue(t)||t,Error(r(306,i,""))}}return i;case 0:return qd(t,i,i.type,i.pendingProps,a);case 1:return o=i.type,h=sa(o,i.pendingProps),u0(t,i,o,h,a);case 3:e:{if(Ve(i,i.stateNode.containerInfo),t===null)throw Error(r(387));o=i.pendingProps;var f=i.memoizedState;h=f.element,gd(t,i),ll(i,o,null,a);var _=i.memoizedState;if(o=_.cache,Fs(i,Ot,o),o!==f.cache&&cd(i,[Ot],a,!0),ol(),o=_.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=h0(t,i,o,a);break e}else if(o!==h){h=Wn(Error(r(424)),i),tl(h),i=h0(t,i,o,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=si(t.firstChild),Xt=i,Qe=!0,qs=null,ni=!0,a=ap(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($r(),o===h){i=cs(t,i,a);break e}Zt(t,i,o,a)}i=i.child}return i;case 26:return ou(t,i),t===null?(a=Ay(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qe||(a=i.type,t=i.pendingProps,o=Su(me.current).createElement(a),o[Ke]=i,o[Tt]=t,Jt(o,a,t),Rt(o),i.stateNode=o):i.memoizedState=Ay(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return fn(i),t===null&&Qe&&(o=i.stateNode=Ty(i.type,i.pendingProps,me.current),Xt=i,ni=!0,h=dt,ir(i.type)?(Nf=h,dt=si(o.firstChild)):dt=h),Zt(t,i,i.pendingProps.children,a),ou(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Qe&&((h=o=dt)&&(o=dE(o,i.type,i.pendingProps,ni),o!==null?(i.stateNode=o,Xt=i,dt=si(o.firstChild),ni=!1,h=!0):h=!1),h||Hs(i)),fn(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,o=f.children,Sf(h,f)?o=null:_!==null&&Sf(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Ed(t,i,Cx,null,null,a),Il._currentValue=h),ou(t,i),Zt(t,i,o,a),i.child;case 6:return t===null&&Qe&&((t=a=dt)&&(a=fE(a,i.pendingProps,ni),a!==null?(i.stateNode=a,Xt=i,dt=null,t=!0):t=!1),t||Hs(i)),null;case 13:return d0(t,i,a);case 4:return Ve(i,i.stateNode.containerInfo),o=i.pendingProps,t===null?i.child=na(i,null,o,a):Zt(t,i,o,a),i.child;case 11:return i0(t,i,i.type,i.pendingProps,a);case 7:return Zt(t,i,i.pendingProps,a),i.child;case 8:return Zt(t,i,i.pendingProps.children,a),i.child;case 12:return Zt(t,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,Fs(i,i.type,o.value),Zt(t,i,o.children,a),i.child;case 9:return h=i.type._context,o=i.pendingProps.children,Jr(i),h=$t(h),o=o(h),i.flags|=1,Zt(t,i,o,a),i.child;case 14:return s0(t,i,i.type,i.pendingProps,a);case 15:return r0(t,i,i.type,i.pendingProps,a);case 19:return m0(t,i,a);case 31:return jx(t,i,a);case 22:return a0(t,i,a,i.pendingProps);case 24:return Jr(i),o=$t(Ot),t===null?(h=dd(),h===null&&(h=ct,f=ud(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:o,cache:h},md(i),Fs(i,Ot,h)):((t.lanes&a)!==0&&(gd(t,i),ll(i,null,null,a),ol()),h=t.memoizedState,f=i.memoizedState,h.parent!==o?(h={parent:o,cache:o},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Fs(i,Ot,o)):(o=f.cache,Fs(i,Ot,o),o!==h.cache&&cd(i,[Ot],a,!0))),Zt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function us(t){t.flags|=4}function $d(t,i,a,o,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(q0())t.flags|=8192;else throw ta=Kc,fd}else t.flags&=-16777217}function p0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ky(i))if(q0())t.flags|=8192;else throw ta=Kc,fd}function cu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?jr():536870912,t.lanes|=i,to|=i)}function ml(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function ft(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,i}function Lx(t,i,a){var o=i.pendingProps;switch(sd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(i),null;case 1:return ft(i),null;case 3:return a=i.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),as(Ot),Ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(qa(i)?us(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ad())),ft(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(us(i),f!==null?(ft(i),p0(i,f)):(ft(i),$d(i,h,null,o,a))):f?f!==t.memoizedState?(us(i),ft(i),p0(i,f)):(ft(i),i.flags&=-16777217):(t=t.memoizedProps,t!==o&&us(i),ft(i),$d(i,h,t,o,a)),null;case 27:if(un(i),a=me.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&us(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return ft(i),null}t=J.current,qa(i)?Xg(i):(t=Ty(h,o,a),i.stateNode=t,us(i))}return ft(i),null;case 5:if(un(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==o&&us(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return ft(i),null}if(f=J.current,qa(i))Xg(i);else{var _=Su(me.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?_.createElement(h,{is:o.is}):_.createElement(h)}}f[Ke]=i,f[Tt]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(Jt(f,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&us(i)}}return ft(i),$d(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==o&&us(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(t=me.current,qa(i)){if(t=i.stateNode,a=i.memoizedProps,o=null,h=Xt,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[Ke]=i,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||dy(t.nodeValue,a)),t||Hs(i,!0)}else t=Su(t).createTextNode(o),t[Ke]=i,i.stateNode=t}return ft(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(o=qa(i),a!==null){if(t===null){if(!o)throw Error(r(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(557));t[Ke]=i}else $r(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),t=!1}else a=ad(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(jn(i),i):(jn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return ft(i),null;case 13:if(o=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=qa(i),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ke]=i}else $r(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ft(i),h=!1}else h=ad(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(jn(i),i):(jn(i),null)}return jn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,t=t!==null&&t.memoizedState!==null,a&&(o=i.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),cu(i,i.updateQueue),ft(i),null);case 4:return Ge(),t===null&&_f(i.stateNode.containerInfo),ft(i),null;case 10:return as(i.type),ft(i),null;case 19:if(H(Ct),o=i.memoizedState,o===null)return ft(i),null;if(h=(i.flags&128)!==0,f=o.rendering,f===null)if(h)ml(o,!1);else{if(wt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=$c(t),f!==null){for(i.flags|=128,ml(o,!1),t=f.updateQueue,i.updateQueue=t,cu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Fg(a,t),a=a.sibling;return B(Ct,Ct.current&1|2),Qe&&ss(i,o.treeForkCount),i.child}t=t.sibling}o.tail!==null&&Pt()>mu&&(i.flags|=128,h=!0,ml(o,!1),i.lanes=4194304)}else{if(!h)if(t=$c(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,cu(i,t),ml(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!Qe)return ft(i),null}else 2*Pt()-o.renderingStartTime>mu&&a!==536870912&&(i.flags|=128,h=!0,ml(o,!1),i.lanes=4194304);o.isBackwards?(f.sibling=i.child,i.child=f):(t=o.last,t!==null?t.sibling=f:i.child=f,o.last=f)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pt(),t.sibling=null,a=Ct.current,B(Ct,h?a&1|2:a&1),Qe&&ss(i,o.treeForkCount),t):(ft(i),null);case 22:case 23:return jn(i),_d(),o=i.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(ft(i),i.subtreeFlags&6&&(i.flags|=8192)):ft(i),a=i.updateQueue,a!==null&&cu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),t!==null&&H(Wr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),as(Ot),ft(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Px(t,i){switch(sd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return as(Ot),Ge(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return un(i),null;case 31:if(i.memoizedState!==null){if(jn(i),i.alternate===null)throw Error(r(340));$r()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(jn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));$r()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return H(Ct),null;case 4:return Ge(),null;case 10:return as(i.type),null;case 22:case 23:return jn(i),_d(),t!==null&&H(Wr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return as(Ot),null;case 25:return null;default:return null}}function y0(t,i){switch(sd(i),i.tag){case 3:as(Ot),Ge();break;case 26:case 27:case 5:un(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&jn(i);break;case 13:jn(i);break;case 19:H(Ct);break;case 10:as(i.type);break;case 22:case 23:jn(i),_d(),t!==null&&H(Wr);break;case 24:as(Ot)}}function gl(t,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,_=a.inst;o=f(),_.destroy=o}a=a.next}while(a!==h)}}catch(E){it(i,i.return,E)}}function $s(t,i,a){try{var o=i.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var _=o.inst,E=_.destroy;if(E!==void 0){_.destroy=void 0,h=i;var D=a,z=E;try{z()}catch($){it(h,D,$)}}}o=o.next}while(o!==f)}}catch($){it(i,i.return,$)}}function v0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{lp(i,a)}catch(o){it(t,t.return,o)}}}function _0(t,i,a){a.props=sa(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){it(t,i,o)}}function pl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){it(t,i,h)}}function Li(t,i){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){it(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){it(t,i,h)}else a.current=null}function b0(t){var i=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){it(t,t.return,h)}}function Zd(t,i,a){try{var o=t.stateNode;aE(o,t.type,a,i),o[Tt]=i}catch(h){it(t,t.return,h)}}function x0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ir(t.type)||t.tag===4}function Jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ir(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wd(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ui));else if(o!==4&&(o===27&&ir(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Wd(t,i,a),t=t.sibling;t!==null;)Wd(t,i,a),t=t.sibling}function uu(t,i,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(o!==4&&(o===27&&ir(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(uu(t,i,a),t=t.sibling;t!==null;)uu(t,i,a),t=t.sibling}function E0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Jt(i,o,a),i[Ke]=t,i[Tt]=a}catch(f){it(t,t.return,f)}}var hs=!1,jt=!1,ef=!1,T0=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function Ux(t,i){if(t=t.containerInfo,Ef=ku,t=jg(t),Qh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,E=-1,D=-1,z=0,$=0,ee=t,q=null;t:for(;;){for(var G;ee!==a||h!==0&&ee.nodeType!==3||(E=_+h),ee!==f||o!==0&&ee.nodeType!==3||(D=_+o),ee.nodeType===3&&(_+=ee.nodeValue.length),(G=ee.firstChild)!==null;)q=ee,ee=G;for(;;){if(ee===t)break t;if(q===a&&++z===h&&(E=_),q===f&&++$===o&&(D=_),(G=ee.nextSibling)!==null)break;ee=q,q=ee.parentNode}ee=G}a=E===-1||D===-1?null:{start:E,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tf={focusedElem:t,selectionRange:a},ku=!1,Gt=i;Gt!==null;)if(i=Gt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Gt=t;else for(;Gt!==null;){switch(i=Gt,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var ve=sa(a.type,h);t=o.getSnapshotBeforeUpdate(ve,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(Se){it(a,a.return,Se)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Af(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Af(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Gt=t;break}Gt=i.return}}function S0(t,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:fs(t,a),o&4&&gl(5,a);break;case 1:if(fs(t,a),o&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){it(a,a.return,_)}else{var h=sa(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){it(a,a.return,_)}}o&64&&v0(a),o&512&&pl(a,a.return);break;case 3:if(fs(t,a),o&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{lp(t,i)}catch(_){it(a,a.return,_)}}break;case 27:i===null&&o&4&&E0(a);case 26:case 5:fs(t,a),i===null&&o&4&&b0(a),o&512&&pl(a,a.return);break;case 12:fs(t,a);break;case 31:fs(t,a),o&4&&C0(t,a);break;case 13:fs(t,a),o&4&&I0(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Yx.bind(null,a),mE(t,a))));break;case 22:if(o=a.memoizedState!==null||hs,!o){i=i!==null&&i.memoizedState!==null||jt,h=hs;var f=jt;hs=o,(jt=i)&&!f?ms(t,a,(a.subtreeFlags&8772)!==0):fs(t,a),hs=h,jt=f}break;case 30:break;default:fs(t,a)}}function w0(t){var i=t.alternate;i!==null&&(t.alternate=null,w0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&wa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var yt=null,vn=!1;function ds(t,i,a){for(a=a.child;a!==null;)A0(t,i,a),a=a.sibling}function A0(t,i,a){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(In,a)}catch{}switch(a.tag){case 26:jt||Li(a,i),ds(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:jt||Li(a,i);var o=yt,h=vn;ir(a.type)&&(yt=a.stateNode,vn=!1),ds(t,i,a),wl(a.stateNode),yt=o,vn=h;break;case 5:jt||Li(a,i);case 6:if(o=yt,h=vn,yt=null,ds(t,i,a),yt=o,vn=h,yt!==null)if(vn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(f){it(a,i,f)}else try{yt.removeChild(a.stateNode)}catch(f){it(a,i,f)}break;case 18:yt!==null&&(vn?(t=yt,vy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),co(t)):vy(yt,a.stateNode));break;case 4:o=yt,h=vn,yt=a.stateNode.containerInfo,vn=!0,ds(t,i,a),yt=o,vn=h;break;case 0:case 11:case 14:case 15:$s(2,a,i),jt||$s(4,a,i),ds(t,i,a);break;case 1:jt||(Li(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&_0(a,i,o)),ds(t,i,a);break;case 21:ds(t,i,a);break;case 22:jt=(o=jt)||a.memoizedState!==null,ds(t,i,a),jt=o;break;default:ds(t,i,a)}}function C0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{co(t)}catch(a){it(i,i.return,a)}}}function I0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{co(t)}catch(a){it(i,i.return,a)}}function zx(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new T0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new T0),i;default:throw Error(r(435,t.tag))}}function hu(t,i){var a=zx(t);i.forEach(function(o){if(!a.has(o)){a.add(o);var h=Xx.bind(null,t,o);o.then(h,h)}})}function _n(t,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,_=i,E=_;e:for(;E!==null;){switch(E.tag){case 27:if(ir(E.type)){yt=E.stateNode,vn=!1;break e}break;case 5:yt=E.stateNode,vn=!1;break e;case 3:case 4:yt=E.stateNode.containerInfo,vn=!0;break e}E=E.return}if(yt===null)throw Error(r(160));A0(f,_,h),yt=null,vn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)N0(i,t),i=i.sibling}var pi=null;function N0(t,i){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(i,t),bn(t),o&4&&($s(3,t,t.return),gl(3,t),$s(5,t,t.return));break;case 1:_n(i,t),bn(t),o&512&&(jt||a===null||Li(a,a.return)),o&64&&hs&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=pi;if(_n(i,t),bn(t),o&512&&(jt||a===null||Li(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ti]||f[Ke]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),Jt(f,o,a),f[Ke]=t,Rt(f),o=f;break e;case"link":var _=Ny("link","href",h).get(o+(a.href||""));if(_){for(var E=0;E<_.length;E++)if(f=_[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(E,1);break t}}f=h.createElement(o),Jt(f,o,a),h.head.appendChild(f);break;case"meta":if(_=Ny("meta","content",h).get(o+(a.content||""))){for(E=0;E<_.length;E++)if(f=_[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(E,1);break t}}f=h.createElement(o),Jt(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[Ke]=t,Rt(f),o=f}t.stateNode=o}else Ry(h,t.type,t.stateNode);else t.stateNode=Iy(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Ry(h,t.type,t.stateNode):Iy(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Zd(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(i,t),bn(t),o&512&&(jt||a===null||Li(a,a.return)),a!==null&&o&4&&Zd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(i,t),bn(t),o&512&&(jt||a===null||Li(a,a.return)),t.flags&32){h=t.stateNode;try{yn(h,"")}catch(ve){it(t,t.return,ve)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Zd(t,h,a!==null?a.memoizedProps:h)),o&1024&&(ef=!0);break;case 6:if(_n(i,t),bn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(ve){it(t,t.return,ve)}}break;case 3:if(Cu=null,h=pi,pi=wu(i.containerInfo),_n(i,t),pi=h,bn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{co(i.containerInfo)}catch(ve){it(t,t.return,ve)}ef&&(ef=!1,R0(t));break;case 4:o=pi,pi=wu(t.stateNode.containerInfo),_n(i,t),bn(t),pi=o;break;case 12:_n(i,t),bn(t);break;case 31:_n(i,t),bn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hu(t,o)));break;case 13:_n(i,t),bn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fu=Pt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hu(t,o)));break;case 22:h=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,z=hs,$=jt;if(hs=z||h,jt=$||D,_n(i,t),jt=$,hs=z,bn(t),o&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||D||hs||jt||ra(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){D=a=i;try{if(f=D.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{E=D.stateNode;var ee=D.memoizedProps.style,q=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(ve){it(D,D.return,ve)}}}else if(i.tag===6){if(a===null){D=i;try{D.stateNode.nodeValue=h?"":D.memoizedProps}catch(ve){it(D,D.return,ve)}}}else if(i.tag===18){if(a===null){D=i;try{var G=D.stateNode;h?_y(G,!0):_y(D.stateNode,!1)}catch(ve){it(D,D.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,hu(t,a))));break;case 19:_n(i,t),bn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,hu(t,o)));break;case 30:break;case 21:break;default:_n(i,t),bn(t)}}function bn(t){var i=t.flags;if(i&2){try{for(var a,o=t.return;o!==null;){if(x0(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=Jd(t);uu(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(yn(_,""),a.flags&=-33);var E=Jd(t);uu(t,E,_);break;case 3:case 4:var D=a.stateNode.containerInfo,z=Jd(t);Wd(t,z,D);break;default:throw Error(r(161))}}catch($){it(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function R0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;R0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function fs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)S0(t,i.alternate,i),i=i.sibling}function ra(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:$s(4,i,i.return),ra(i);break;case 1:Li(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&_0(i,i.return,a),ra(i);break;case 27:wl(i.stateNode);case 26:case 5:Li(i,i.return),ra(i);break;case 22:i.memoizedState===null&&ra(i);break;case 30:ra(i);break;default:ra(i)}t=t.sibling}}function ms(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:ms(h,f,a),gl(4,f);break;case 1:if(ms(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){it(o,o.return,z)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var D=h.shared.hiddenCallbacks;if(D!==null)for(h.shared.hiddenCallbacks=null,h=0;h<D.length;h++)op(D[h],E)}catch(z){it(o,o.return,z)}}a&&_&64&&v0(f),pl(f,f.return);break;case 27:E0(f);case 26:case 5:ms(h,f,a),a&&o===null&&_&4&&b0(f),pl(f,f.return);break;case 12:ms(h,f,a);break;case 31:ms(h,f,a),a&&_&4&&C0(h,f);break;case 13:ms(h,f,a),a&&_&4&&I0(h,f);break;case 22:f.memoizedState===null&&ms(h,f,a),pl(f,f.return);break;case 30:break;default:ms(h,f,a)}i=i.sibling}}function tf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&nl(a))}function nf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nl(t))}function yi(t,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)k0(t,i,a,o),i=i.sibling}function k0(t,i,a,o){var h=i.flags;switch(i.tag){case 0:case 11:case 15:yi(t,i,a,o),h&2048&&gl(9,i);break;case 1:yi(t,i,a,o);break;case 3:yi(t,i,a,o),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&nl(t)));break;case 12:if(h&2048){yi(t,i,a,o),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,E=f.onPostCommit;typeof E=="function"&&E(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){it(i,i.return,D)}}else yi(t,i,a,o);break;case 31:yi(t,i,a,o);break;case 13:yi(t,i,a,o);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?yi(t,i,a,o):yl(t,i):f._visibility&2?yi(t,i,a,o):(f._visibility|=2,Ja(t,i,a,o,(i.subtreeFlags&10256)!==0||!1)),h&2048&&tf(_,i);break;case 24:yi(t,i,a,o),h&2048&&nf(i.alternate,i);break;default:yi(t,i,a,o)}}function Ja(t,i,a,o,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,E=a,D=o,z=_.flags;switch(_.tag){case 0:case 11:case 15:Ja(f,_,E,D,h),gl(8,_);break;case 23:break;case 22:var $=_.stateNode;_.memoizedState!==null?$._visibility&2?Ja(f,_,E,D,h):yl(f,_):($._visibility|=2,Ja(f,_,E,D,h)),h&&z&2048&&tf(_.alternate,_);break;case 24:Ja(f,_,E,D,h),h&&z&2048&&nf(_.alternate,_);break;default:Ja(f,_,E,D,h)}i=i.sibling}}function yl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,o=i,h=o.flags;switch(o.tag){case 22:yl(a,o),h&2048&&tf(o.alternate,o);break;case 24:yl(a,o),h&2048&&nf(o.alternate,o);break;default:yl(a,o)}i=i.sibling}}var vl=8192;function Wa(t,i,a){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)O0(t,i,a),t=t.sibling}function O0(t,i,a){switch(t.tag){case 26:Wa(t,i,a),t.flags&vl&&t.memoizedState!==null&&AE(a,pi,t.memoizedState,t.memoizedProps);break;case 5:Wa(t,i,a);break;case 3:case 4:var o=pi;pi=wu(t.stateNode.containerInfo),Wa(t,i,a),pi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=vl,vl=16777216,Wa(t,i,a),vl=o):Wa(t,i,a));break;default:Wa(t,i,a)}}function D0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function _l(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Gt=o,j0(o,t)}D0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)M0(t),t=t.sibling}function M0(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&$s(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,du(t)):_l(t);break;default:_l(t)}}function du(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];Gt=o,j0(o,t)}D0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:$s(8,i,i.return),du(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,du(i));break;default:du(i)}t=t.sibling}}function j0(t,i){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:$s(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:nl(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Gt=o;else e:for(a=t;Gt!==null;){o=Gt;var h=o.sibling,f=o.return;if(w0(o),o===a){Gt=null;break e}if(h!==null){h.return=f,Gt=h;break e}Gt=f}}}var Bx={getCacheForType:function(t){var i=$t(Ot),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return $t(Ot).controller.signal}},qx=typeof WeakMap=="function"?WeakMap:Map,We=0,ct=null,Le=null,ze=0,nt=0,Vn=null,Zs=!1,eo=!1,sf=!1,gs=0,wt=0,Js=0,aa=0,rf=0,Ln=0,to=0,bl=null,xn=null,af=!1,fu=0,V0=0,mu=1/0,gu=null,Ws=null,Ut=0,er=null,no=null,ps=0,of=0,lf=null,L0=null,xl=0,cf=null;function Pn(){return(We&2)!==0&&ze!==0?ze&-ze:K.T!==null?gf():Y()}function P0(){if(Ln===0)if((ze&536870912)===0||Qe){var t=Zi;Zi<<=1,(Zi&3932160)===0&&(Zi=262144),Ln=t}else Ln=536870912;return t=Mn.current,t!==null&&(t.flags|=32),Ln}function En(t,i,a){(t===ct&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(io(t,0),tr(t,ze,Ln,!1)),Ji(t,a),((We&2)===0||t!==ct)&&(t===ct&&((We&2)===0&&(aa|=a),wt===4&&tr(t,ze,Ln,!1)),Pi(t))}function U0(t,i,a){if((We&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&t.expiredLanes)===0||nn(t,i),h=o?Gx(t,i):hf(t,i,!0),f=o;do{if(h===0){eo&&!o&&tr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!Hx(a)){h=hf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var E=t;h=bl;var D=E.current.memoizedState.isDehydrated;if(D&&(io(E,_).flags|=256),_=hf(E,_,!1),_!==2){if(sf&&!D){E.errorRecoveryDisabledLanes|=f,aa|=f,h=4;break e}f=xn,xn=h,f!==null&&(xn===null?xn=f:xn.push.apply(xn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){io(t,0),tr(t,i,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:tr(o,i,Ln,!Zs);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=fu+300-Pt(),10<h)){if(tr(o,i,Ln,!Zs),Nn(o,0,!0)!==0)break e;ps=i,o.timeoutHandle=py(z0.bind(null,o,a,xn,gu,af,i,Ln,aa,to,Zs,f,"Throttled",-0,0),h);break e}z0(o,a,xn,gu,af,i,Ln,aa,to,Zs,f,null,-0,0)}}break}while(!0);Pi(t)}function z0(t,i,a,o,h,f,_,E,D,z,$,ee,q,G){if(t.timeoutHandle=-1,ee=i.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},O0(i,f,ee);var ve=(f&62914560)===f?fu-Pt():(f&4194048)===f?V0-Pt():0;if(ve=CE(ee,ve),ve!==null){ps=f,t.cancelPendingCommit=ve(Y0.bind(null,t,i,f,a,o,h,_,E,D,$,ee,null,q,G)),tr(t,f,_,!z);return}}Y0(t,i,f,a,o,h,_,E,D)}function Hx(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!On(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function tr(t,i,a,o){i&=~rf,i&=~aa,t.suspendedLanes|=i,t.pingedLanes&=~i,o&&(t.warmLanes|=i),o=t.expirationTimes;for(var h=i;0<h;){var f=31-lt(h),_=1<<f;o[f]=-1,h&=~_}a!==0&&Ei(t,a,i)}function pu(){return(We&6)===0?(El(0),!1):!0}function uf(){if(Le!==null){if(nt===0)var t=Le.return;else t=Le,rs=Zr=null,wd(t),Qa=null,sl=0,t=Le;for(;t!==null;)y0(t.alternate,t),t=t.return;Le=null}}function io(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,cE(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ps=0,uf(),ct=t,Le=a=is(t.current,null),ze=i,nt=0,Vn=null,Zs=!1,eo=nn(t,i),sf=!1,to=Ln=rf=aa=Js=wt=0,xn=bl=null,af=!1,(i&8)!==0&&(i|=i&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=i;0<o;){var h=31-lt(o),f=1<<h;i|=t[h],o&=~f}return gs=i,Lc(),a}function B0(t,i){Me=null,K.H=dl,i===Ka||i===Gc?(i=ip(),nt=3):i===fd?(i=ip(),nt=4):nt=i===Bd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Vn=i,Le===null&&(wt=1,ru(t,Wn(i,t.current)))}function q0(){var t=Mn.current;return t===null?!0:(ze&4194048)===ze?ii===null:(ze&62914560)===ze||(ze&536870912)!==0?t===ii:!1}function H0(){var t=K.H;return K.H=dl,t===null?dl:t}function F0(){var t=K.A;return K.A=Bx,t}function yu(){wt=4,Zs||(ze&4194048)!==ze&&Mn.current!==null||(eo=!0),(Js&134217727)===0&&(aa&134217727)===0||ct===null||tr(ct,ze,Ln,!1)}function hf(t,i,a){var o=We;We|=2;var h=H0(),f=F0();(ct!==t||ze!==i)&&(gu=null,io(t,i)),i=!1;var _=wt;e:do try{if(nt!==0&&Le!==null){var E=Le,D=Vn;switch(nt){case 8:uf(),_=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(i=!0);var z=nt;if(nt=0,Vn=null,so(t,E,D,z),a&&eo){_=0;break e}break;default:z=nt,nt=0,Vn=null,so(t,E,D,z)}}Fx(),_=wt;break}catch($){B0(t,$)}while(!0);return i&&t.shellSuspendCounter++,rs=Zr=null,We=o,K.H=h,K.A=f,Le===null&&(ct=null,ze=0,Lc()),_}function Fx(){for(;Le!==null;)G0(Le)}function Gx(t,i){var a=We;We|=2;var o=H0(),h=F0();ct!==t||ze!==i?(gu=null,mu=Pt()+500,io(t,i)):eo=nn(t,i);e:do try{if(nt!==0&&Le!==null){i=Le;var f=Vn;t:switch(nt){case 1:nt=0,Vn=null,so(t,i,f,1);break;case 2:case 9:if(tp(f)){nt=0,Vn=null,K0(i);break}i=function(){nt!==2&&nt!==9||ct!==t||(nt=7),Pi(t)},f.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:tp(f)?(nt=0,Vn=null,K0(i)):(nt=0,Vn=null,so(t,i,f,7));break;case 5:var _=null;switch(Le.tag){case 26:_=Le.memoizedState;case 5:case 27:var E=Le;if(_?ky(_):E.stateNode.complete){nt=0,Vn=null;var D=E.sibling;if(D!==null)Le=D;else{var z=E.return;z!==null?(Le=z,vu(z)):Le=null}break t}}nt=0,Vn=null,so(t,i,f,5);break;case 6:nt=0,Vn=null,so(t,i,f,6);break;case 8:uf(),wt=6;break e;default:throw Error(r(462))}}Kx();break}catch($){B0(t,$)}while(!0);return rs=Zr=null,K.H=o,K.A=h,We=a,Le!==null?0:(ct=null,ze=0,Lc(),wt)}function Kx(){for(;Le!==null&&!Dr();)G0(Le)}function G0(t){var i=g0(t.alternate,t,gs);t.memoizedProps=t.pendingProps,i===null?vu(t):Le=i}function K0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=c0(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=c0(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:wd(i);default:y0(a,i),i=Le=Fg(i,gs),i=g0(a,i,gs)}t.memoizedProps=t.pendingProps,i===null?vu(t):Le=i}function so(t,i,a,o){rs=Zr=null,wd(i),Qa=null,sl=0;var h=i.return;try{if(Mx(t,h,i,a,ze)){wt=1,ru(t,Wn(a,t.current)),Le=null;return}}catch(f){if(h!==null)throw Le=h,f;wt=1,ru(t,Wn(a,t.current)),Le=null;return}i.flags&32768?(Qe||o===1?t=!0:eo||(ze&536870912)!==0?t=!1:(Zs=t=!0,(o===2||o===9||o===3||o===6)&&(o=Mn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Q0(i,t)):vu(i)}function vu(t){var i=t;do{if((i.flags&32768)!==0){Q0(i,Zs);return}t=i.return;var a=Lx(i.alternate,i,gs);if(a!==null){Le=a;return}if(i=i.sibling,i!==null){Le=i;return}Le=i=t}while(i!==null);wt===0&&(wt=5)}function Q0(t,i){do{var a=Px(t.alternate,t);if(a!==null){a.flags&=32767,Le=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Le=t;return}Le=t=a}while(t!==null);wt=6,Le=null}function Y0(t,i,a,o,h,f,_,E,D){t.cancelPendingCommit=null;do _u();while(Ut!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(f=i.lanes|i.childLanes,f|=Jh,Mo(t,a,f,_,E,D),t===ct&&(Le=ct=null,ze=0),no=i,er=t,ps=a,of=f,lf=h,L0=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,$x(li,function(){return W0(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=K.T,K.T=null,h=le.p,le.p=2,_=We,We|=4;try{Ux(t,i,a)}finally{We=_,le.p=h,K.T=o}}Ut=1,X0(),$0(),Z0()}}function X0(){if(Ut===1){Ut=0;var t=er,i=no,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=K.T,K.T=null;var o=le.p;le.p=2;var h=We;We|=4;try{N0(i,t);var f=Tf,_=jg(t.containerInfo),E=f.focusedElem,D=f.selectionRange;if(_!==E&&E&&E.ownerDocument&&Mg(E.ownerDocument.documentElement,E)){if(D!==null&&Qh(E)){var z=D.start,$=D.end;if($===void 0&&($=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min($,E.value.length);else{var ee=E.ownerDocument||document,q=ee&&ee.defaultView||window;if(q.getSelection){var G=q.getSelection(),ve=E.textContent.length,Se=Math.min(D.start,ve),ot=D.end===void 0?Se:Math.min(D.end,ve);!G.extend&&Se>ot&&(_=ot,ot=Se,Se=_);var V=Dg(E,Se),M=Dg(E,ot);if(V&&M&&(G.rangeCount!==1||G.anchorNode!==V.node||G.anchorOffset!==V.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var U=ee.createRange();U.setStart(V.node,V.offset),G.removeAllRanges(),Se>ot?(G.addRange(U),G.extend(M.node,M.offset)):(U.setEnd(M.node,M.offset),G.addRange(U))}}}}for(ee=[],G=E;G=G.parentNode;)G.nodeType===1&&ee.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var Z=ee[E];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ku=!!Ef,Tf=Ef=null}finally{We=h,le.p=o,K.T=a}}t.current=i,Ut=2}}function $0(){if(Ut===2){Ut=0;var t=er,i=no,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=K.T,K.T=null;var o=le.p;le.p=2;var h=We;We|=4;try{S0(t,i.alternate,i)}finally{We=h,le.p=o,K.T=a}}Ut=3}}function Z0(){if(Ut===4||Ut===3){Ut=0,Cs();var t=er,i=no,a=ps,o=L0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,no=er=null,J0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ws=null),sn(a),i=i.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(In,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=K.T,h=le.p,le.p=2,K.T=null;try{for(var f=t.onRecoverableError,_=0;_<o.length;_++){var E=o[_];f(E.value,{componentStack:E.stack})}}finally{K.T=i,le.p=h}}(ps&3)!==0&&_u(),Pi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===cf?xl++:(xl=0,cf=t):xl=0,El(0)}}function J0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,nl(i)))}function _u(){return X0(),$0(),Z0(),W0()}function W0(){if(Ut!==5)return!1;var t=er,i=of;of=0;var a=sn(ps),o=K.T,h=le.p;try{le.p=32>a?32:a,K.T=null,a=lf,lf=null;var f=er,_=ps;if(Ut=0,no=er=null,ps=0,(We&6)!==0)throw Error(r(331));var E=We;if(We|=4,M0(f.current),k0(f,f.current,_,a),We=E,El(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(In,f)}catch{}return!0}finally{le.p=h,K.T=o,J0(t,i)}}function ey(t,i,a){i=Wn(a,i),i=zd(t.stateNode,i,2),t=Qs(t,i,2),t!==null&&(Ji(t,2),Pi(t))}function it(t,i,a){if(t.tag===3)ey(t,t,a);else for(;i!==null;){if(i.tag===3){ey(i,t,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ws===null||!Ws.has(o))){t=Wn(a,t),a=t0(2),o=Qs(i,a,2),o!==null&&(n0(a,o,i,t),Ji(o,2),Pi(o));break}}i=i.return}}function df(t,i,a){var o=t.pingCache;if(o===null){o=t.pingCache=new qx;var h=new Set;o.set(i,h)}else h=o.get(i),h===void 0&&(h=new Set,o.set(i,h));h.has(a)||(sf=!0,h.add(a),t=Qx.bind(null,t,i,a),i.then(t,t))}function Qx(t,i,a){var o=t.pingCache;o!==null&&o.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(ze&a)===a&&(wt===4||wt===3&&(ze&62914560)===ze&&300>Pt()-fu?(We&2)===0&&io(t,0):rf|=a,to===ze&&(to=0)),Pi(t)}function ty(t,i){i===0&&(i=jr()),t=Yr(t,i),t!==null&&(Ji(t,i),Pi(t))}function Yx(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),ty(t,a)}function Xx(t,i){var a=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),ty(t,a)}function $x(t,i){return Et(t,i)}var bu=null,ro=null,ff=!1,xu=!1,mf=!1,nr=0;function Pi(t){t!==ro&&t.next===null&&(ro===null?bu=ro=t:ro=ro.next=t),xu=!0,ff||(ff=!0,Jx())}function El(t,i){if(!mf&&xu){mf=!0;do for(var a=!1,o=bu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var _=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-lt(42|t)+1)-1,f&=h&~(_&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,ry(o,f))}else f=ze,f=Nn(o,o===ct?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||nn(o,f)||(a=!0,ry(o,f));o=o.next}while(a);mf=!1}}function Zx(){ny()}function ny(){xu=ff=!1;var t=0;nr!==0&&lE()&&(t=nr);for(var i=Pt(),a=null,o=bu;o!==null;){var h=o.next,f=iy(o,i);f===0?(o.next=null,a===null?bu=h:a.next=h,h===null&&(ro=a)):(a=o,(t!==0||(f&3)!==0)&&(xu=!0)),o=h}Ut!==0&&Ut!==5||El(t),nr!==0&&(nr=0)}function iy(t,i){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-lt(f),E=1<<_,D=h[_];D===-1?((E&a)===0||(E&o)!==0)&&(h[_]=Do(E,i)):D<=i&&(t.expiredLanes|=E),f&=~E}if(i=ct,a=ze,a=Nn(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===i&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Cn(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||nn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(o!==null&&Cn(o),sn(a)){case 2:case 8:a=Is;break;case 32:a=li;break;case 268435456:a=Ns;break;default:a=li}return o=sy.bind(null,t),a=Et(a,o),t.callbackPriority=i,t.callbackNode=a,i}return o!==null&&o!==null&&Cn(o),t.callbackPriority=2,t.callbackNode=null,2}function sy(t,i){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(_u()&&t.callbackNode!==a)return null;var o=ze;return o=Nn(t,t===ct?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(U0(t,o,i),iy(t,Pt()),t.callbackNode!=null&&t.callbackNode===a?sy.bind(null,t):null)}function ry(t,i){if(_u())return null;U0(t,i,!0)}function Jx(){uE(function(){(We&6)!==0?Et(xi,Zx):ny()})}function gf(){if(nr===0){var t=Fa;t===0&&(t=Fn,Fn<<=1,(Fn&261888)===0&&(Fn=256)),nr=t}return nr}function ay(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Na(""+t)}function oy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function Wx(t,i,a,o,h){if(i==="submit"&&a&&a.stateNode===h){var f=ay((h[Tt]||null).action),_=o.submitter;_&&(i=(i=_[Tt]||null)?ay(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var E=new ki("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(nr!==0){var D=_?oy(h,_):new FormData(h);Md(a,{pending:!0,data:D,method:h.method,action:f},null,D)}}else typeof f=="function"&&(E.preventDefault(),D=_?oy(h,_):new FormData(h),Md(a,{pending:!0,data:D,method:h.method,action:f},f,D))},currentTarget:h}]})}}for(var pf=0;pf<Zh.length;pf++){var yf=Zh[pf],eE=yf.toLowerCase(),tE=yf[0].toUpperCase()+yf.slice(1);gi(eE,"on"+tE)}gi(Pg,"onAnimationEnd"),gi(Ug,"onAnimationIteration"),gi(zg,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(yx,"onTransitionRun"),gi(vx,"onTransitionStart"),gi(_x,"onTransitionCancel"),gi(Bg,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tl));function ly(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(i)for(var _=o.length-1;0<=_;_--){var E=o[_],D=E.instance,z=E.currentTarget;if(E=E.listener,D!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=z;try{f(h)}catch($){Vc($)}h.currentTarget=null,f=D}else for(_=0;_<o.length;_++){if(E=o[_],D=E.instance,z=E.currentTarget,E=E.listener,D!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=z;try{f(h)}catch($){Vc($)}h.currentTarget=null,f=D}}}}function Pe(t,i){var a=i[Sa];a===void 0&&(a=i[Sa]=new Set);var o=t+"__bubble";a.has(o)||(cy(i,t,2,!1),a.add(o))}function vf(t,i,a){var o=0;i&&(o|=4),cy(a,t,o,i)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function _f(t){if(!t[Eu]){t[Eu]=!0,jo.forEach(function(a){a!=="selectionchange"&&(nE.has(a)||vf(a,!1,t),vf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Eu]||(i[Eu]=!0,vf("selectionchange",!1,i))}}function cy(t,i,a,o){switch(Py(i)){case 2:var h=RE;break;case 8:h=kE;break;default:h=Mf}a=h.bind(null,i,a,t),h=void 0,!zr||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function bf(t,i,a,o,h){var f=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var E=o.stateNode.containerInfo;if(E===h)break;if(_===4)for(_=o.return;_!==null;){var D=_.tag;if((D===3||D===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;E!==null;){if(_=Si(E),_===null)return;if(D=_.tag,D===5||D===6||D===26||D===27){o=f=_;continue e}E=E.parentNode}}o=o.return}Ls(function(){var z=f,$=Xn(a),ee=[];e:{var q=qg.get(t);if(q!==void 0){var G=ki,ve=t;switch(t){case"keypress":if(qr(a)===0)break e;case"keydown":case"keyup":G=Dc;break;case"focusin":ve="focus",G=Fr;break;case"focusout":ve="blur",G=Fr;break;case"beforeblur":case"afterblur":G=Fr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Sc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=g;break;case Pg:case Ug:case zg:G=Ac;break;case Bg:G=T;break;case"scroll":case"scrollend":G=Qo;break;case"wheel":G=F;break;case"copy":case"cut":case"paste":G=Cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=ns;break;case"toggle":case"beforetoggle":G=De}var Se=(i&4)!==0,ot=!Se&&(t==="scroll"||t==="scrollend"),V=Se?q!==null?q+"Capture":null:q;Se=[];for(var M=z,U;M!==null;){var Z=M;if(U=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||U===null||V===null||(Z=hi(M,V),Z!=null&&Se.push(Sl(M,Z,U))),ot)break;M=M.return}0<Se.length&&(q=new G(q,ve,null,a,$),ee.push({event:q,listeners:Se}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",q&&a!==Fo&&(ve=a.relatedTarget||a.fromElement)&&(Si(ve)||ve[Qn]))break e;if((G||q)&&(q=$.window===$?$:(q=$.ownerDocument)?q.defaultView||q.parentWindow:window,G?(ve=a.relatedTarget||a.toElement,G=z,ve=ve?Si(ve):null,ve!==null&&(ot=c(ve),Se=ve.tag,ve!==ot||Se!==5&&Se!==27&&Se!==6)&&(ve=null)):(G=null,ve=z),G!==ve)){if(Se=Yo,Z="onMouseLeave",V="onMouseEnter",M="mouse",(t==="pointerout"||t==="pointerover")&&(Se=ns,Z="onPointerLeave",V="onPointerEnter",M="pointer"),ot=G==null?q:Rn(G),U=ve==null?q:Rn(ve),q=new Se(Z,M+"leave",G,a,$),q.target=ot,q.relatedTarget=U,Z=null,Si($)===z&&(Se=new Se(V,M+"enter",ve,a,$),Se.target=U,Se.relatedTarget=ot,Z=Se),ot=Z,G&&ve)t:{for(Se=iE,V=G,M=ve,U=0,Z=V;Z;Z=Se(Z))U++;Z=0;for(var Ee=M;Ee;Ee=Se(Ee))Z++;for(;0<U-Z;)V=Se(V),U--;for(;0<Z-U;)M=Se(M),Z--;for(;U--;){if(V===M||M!==null&&V===M.alternate){Se=V;break t}V=Se(V),M=Se(M)}Se=null}else Se=null;G!==null&&uy(ee,q,G,Se,!1),ve!==null&&ot!==null&&uy(ee,ot,ve,Se,!0)}}e:{if(q=z?Rn(z):window,G=q.nodeName&&q.nodeName.toLowerCase(),G==="select"||G==="input"&&q.type==="file")var $e=Cg;else if(wg(q))if(Ig)$e=mx;else{$e=dx;var _e=hx}else G=q.nodeName,!G||G.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&Ia(z.elementType)&&($e=Cg):$e=fx;if($e&&($e=$e(t,z))){Ag(ee,$e,a,$);break e}_e&&_e(t,q,z),t==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&Bo(q,"number",q.value)}switch(_e=z?Rn(z):window,t){case"focusin":(wg(_e)||_e.contentEditable==="true")&&(Va=_e,Yh=z,Wo=null);break;case"focusout":Wo=Yh=Va=null;break;case"mousedown":Xh=!0;break;case"contextmenu":case"mouseup":case"dragend":Xh=!1,Vg(ee,a,$);break;case"selectionchange":if(px)break;case"keydown":case"keyup":Vg(ee,a,$)}var je;if(Je)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else ja?Gr(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Mi&&a.locale!=="ko"&&(ja||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&ja&&(je=Ko()):(Ri=$,Go="value"in Ri?Ri.value:Ri.textContent,ja=!0)),_e=Tu(z,Be),0<_e.length&&(Be=new Di(Be,t,null,a,$),ee.push({event:Be,listeners:_e}),je?Be.data=je:(je=Ma(a),je!==null&&(Be.data=je)))),(je=Zn?ox(t,a):lx(t,a))&&(Be=Tu(z,"onBeforeInput"),0<Be.length&&(_e=new Di("onBeforeInput","beforeinput",null,a,$),ee.push({event:_e,listeners:Be}),_e.data=je)),Wx(ee,t,z,a,$)}ly(ee,i)})}function Sl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Tu(t,i){for(var a=i+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=hi(t,a),h!=null&&o.unshift(Sl(t,h,f)),h=hi(t,i),h!=null&&o.push(Sl(t,h,f))),t.tag===3)return o;t=t.return}return[]}function iE(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function uy(t,i,a,o,h){for(var f=i._reactName,_=[];a!==null&&a!==o;){var E=a,D=E.alternate,z=E.stateNode;if(E=E.tag,D!==null&&D===o)break;E!==5&&E!==26&&E!==27||z===null||(D=z,h?(z=hi(a,f),z!=null&&_.unshift(Sl(a,z,D))):h||(z=hi(a,f),z!=null&&_.push(Sl(a,z,D)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var sE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function hy(t){return(typeof t=="string"?t:""+t).replace(sE,`
`).replace(rE,"")}function dy(t,i){return i=hy(i),hy(t)===i}function at(t,i,a,o,h,f){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||yn(t,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&yn(t,""+o);break;case"className":kn(t,"class",o);break;case"tabIndex":kn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(t,a,o);break;case"style":Ho(t,o,f);break;case"data":if(i!=="object"){kn(t,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Na(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&at(t,i,"name",h.name,h,null),at(t,i,"formEncType",h.formEncType,h,null),at(t,i,"formMethod",h.formMethod,h,null),at(t,i,"formTarget",h.formTarget,h,null)):(at(t,i,"encType",h.encType,h,null),at(t,i,"method",h.method,h,null),at(t,i,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Na(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=ui);break;case"onScroll":o!=null&&Pe("scroll",t);break;case"onScrollEnd":o!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Na(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),Aa(t,"popover",o);break;case"xlinkActuate":kt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":kt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":kt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":kt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":kt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":kt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":kt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":kt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":kt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Aa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Tc.get(a)||a,Aa(t,a,o))}}function xf(t,i,a,o,h,f){switch(a){case"style":Ho(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?yn(t,o):(typeof o=="number"||typeof o=="bigint")&&yn(t,""+o);break;case"onScroll":o!=null&&Pe("scroll",t);break;case"onScrollEnd":o!=null&&Pe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Tt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Aa(t,a,o)}}}function Jt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(t,i,f,_,a,null)}}h&&at(t,i,"srcSet",a.srcSet,a,null),o&&at(t,i,"src",a.src,a,null);return;case"input":Pe("invalid",t);var E=f=_=h=null,D=null,z=null;for(o in a)if(a.hasOwnProperty(o)){var $=a[o];if($!=null)switch(o){case"name":h=$;break;case"type":_=$;break;case"checked":D=$;break;case"defaultChecked":z=$;break;case"value":f=$;break;case"defaultValue":E=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:at(t,i,o,$,a,null)}}bc(t,f,E,D,z,_,h,!1);return;case"select":Pe("invalid",t),o=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":_=E;break;case"multiple":o=E;default:at(t,i,h,E,a,null)}i=f,a=_,t.multiple=!!o,i!=null?Ds(t,!!o,i,!1):a!=null&&Ds(t,!!o,a,!0);return;case"textarea":Pe("invalid",t),f=h=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(E=a[_],E!=null))switch(_){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:at(t,i,_,E,a,null)}Ms(t,o,h,f);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(o=a[D],o!=null))switch(D){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:at(t,i,D,o,a,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(o=0;o<Tl.length;o++)Pe(Tl[o],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(o=a[z],o!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:at(t,i,z,o,a,null)}return;default:if(Ia(i)){for($ in a)a.hasOwnProperty($)&&(o=a[$],o!==void 0&&xf(t,i,$,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&at(t,i,E,o,a,null))}function aE(t,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,E=null,D=null,z=null,$=null;for(G in a){var ee=a[G];if(a.hasOwnProperty(G)&&ee!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=ee;default:o.hasOwnProperty(G)||at(t,i,G,null,o,ee)}}for(var q in o){var G=o[q];if(ee=a[q],o.hasOwnProperty(q)&&(G!=null||ee!=null))switch(q){case"type":f=G;break;case"name":h=G;break;case"checked":z=G;break;case"defaultChecked":$=G;break;case"value":_=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==ee&&at(t,i,q,G,o,ee)}}Ca(t,_,E,D,z,$,f,h);return;case"select":G=_=E=q=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":G=D;default:o.hasOwnProperty(f)||at(t,i,f,null,o,D)}for(h in o)if(f=o[h],D=a[h],o.hasOwnProperty(h)&&(f!=null||D!=null))switch(h){case"value":q=f;break;case"defaultValue":E=f;break;case"multiple":_=f;default:f!==D&&at(t,i,h,f,o,D)}i=E,a=_,o=G,q!=null?Ds(t,!!a,q,!1):!!o!=!!a&&(i!=null?Ds(t,!!a,i,!0):Ds(t,!!a,a?[]:"",!1));return;case"textarea":G=q=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:at(t,i,E,null,o,h)}for(_ in o)if(h=o[_],f=a[_],o.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":q=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&at(t,i,_,h,o,f)}xc(t,q,G);return;case"option":for(var ve in a)if(q=a[ve],a.hasOwnProperty(ve)&&q!=null&&!o.hasOwnProperty(ve))switch(ve){case"selected":t.selected=!1;break;default:at(t,i,ve,null,o,q)}for(D in o)if(q=o[D],G=a[D],o.hasOwnProperty(D)&&q!==G&&(q!=null||G!=null))switch(D){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:at(t,i,D,q,o,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)q=a[Se],a.hasOwnProperty(Se)&&q!=null&&!o.hasOwnProperty(Se)&&at(t,i,Se,null,o,q);for(z in o)if(q=o[z],G=a[z],o.hasOwnProperty(z)&&q!==G&&(q!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:at(t,i,z,q,o,G)}return;default:if(Ia(i)){for(var ot in a)q=a[ot],a.hasOwnProperty(ot)&&q!==void 0&&!o.hasOwnProperty(ot)&&xf(t,i,ot,void 0,o,q);for($ in o)q=o[$],G=a[$],!o.hasOwnProperty($)||q===G||q===void 0&&G===void 0||xf(t,i,$,q,o,G);return}}for(var V in a)q=a[V],a.hasOwnProperty(V)&&q!=null&&!o.hasOwnProperty(V)&&at(t,i,V,null,o,q);for(ee in o)q=o[ee],G=a[ee],!o.hasOwnProperty(ee)||q===G||q==null&&G==null||at(t,i,ee,q,o,G)}function fy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function oE(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var h=a[o],f=h.transferSize,_=h.initiatorType,E=h.duration;if(f&&E&&fy(_)){for(_=0,E=h.responseEnd,o+=1;o<a.length;o++){var D=a[o],z=D.startTime;if(z>E)break;var $=D.transferSize,ee=D.initiatorType;$&&fy(ee)&&(D=D.responseEnd,_+=$*(D<E?1:(E-z)/(D-z)))}if(--o,i+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Ef=null,Tf=null;function Su(t){return t.nodeType===9?t:t.ownerDocument}function my(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gy(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Sf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var wf=null;function lE(){var t=window.event;return t&&t.type==="popstate"?t===wf?!1:(wf=t,!0):(wf=null,!1)}var py=typeof setTimeout=="function"?setTimeout:void 0,cE=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,uE=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(t){return yy.resolve(null).then(t).catch(hE)}:py;function hE(t){setTimeout(function(){throw t})}function ir(t){return t==="head"}function vy(t,i){var a=i,o=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(o===0){t.removeChild(h),co(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")wl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,wl(a);for(var f=a.firstChild;f;){var _=f.nextSibling,E=f.nodeName;f[Ti]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&wl(t.ownerDocument.body);a=h}while(a);co(i)}function _y(t,i){var a=t;t=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=o}while(a)}function Af(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Af(a),wa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function dE(t,i,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ti])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=si(t.nextSibling),t===null)break}return null}function fE(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=si(t.nextSibling),t===null))return null;return t}function by(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=si(t.nextSibling),t===null))return null;return t}function Cf(t){return t.data==="$?"||t.data==="$~"}function If(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mE(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function si(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Nf=null;function xy(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return si(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function Ey(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function Ty(t,i,a){switch(i=Su(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function wl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);wa(t)}var ri=new Map,Sy=new Set;function wu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ys=le.d;le.d={f:gE,r:pE,D:yE,C:vE,L:_E,m:bE,X:EE,S:xE,M:TE};function gE(){var t=ys.f(),i=pu();return t||i}function pE(t){var i=Yn(t);i!==null&&i.tag===5&&i.type==="form"?Bp(i):ys.r(t)}var ao=typeof document>"u"?null:document;function wy(t,i,a){var o=ao;if(o&&typeof i=="string"&&i){var h=pn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Sy.has(h)||(Sy.add(h),t={rel:t,crossOrigin:a,href:i},o.querySelector(h)===null&&(i=o.createElement("link"),Jt(i,"link",t),Rt(i),o.head.appendChild(i)))}}function yE(t){ys.D(t),wy("dns-prefetch",t,null)}function vE(t,i){ys.C(t,i),wy("preconnect",t,i)}function _E(t,i,a){ys.L(t,i,a);var o=ao;if(o&&t&&i){var h='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pn(a.imageSizes)+'"]')):h+='[href="'+pn(t)+'"]';var f=h;switch(i){case"style":f=oo(t);break;case"script":f=lo(t)}ri.has(f)||(t=w({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ri.set(f,t),o.querySelector(h)!==null||i==="style"&&o.querySelector(Al(f))||i==="script"&&o.querySelector(Cl(f))||(i=o.createElement("link"),Jt(i,"link",t),Rt(i),o.head.appendChild(i)))}}function bE(t,i){ys.m(t,i);var a=ao;if(a&&t){var o=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pn(o)+'"][href="'+pn(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=lo(t)}if(!ri.has(f)&&(t=w({rel:"modulepreload",href:t},i),ri.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Cl(f)))return}o=a.createElement("link"),Jt(o,"link",t),Rt(o),a.head.appendChild(o)}}}function xE(t,i,a){ys.S(t,i,a);var o=ao;if(o&&t){var h=wi(o).hoistableStyles,f=oo(t);i=i||"default";var _=h.get(f);if(!_){var E={loading:0,preload:null};if(_=o.querySelector(Al(f)))E.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ri.get(f))&&Rf(t,a);var D=_=o.createElement("link");Rt(D),Jt(D,"link",t),D._p=new Promise(function(z,$){D.onload=z,D.onerror=$}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Au(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:E},h.set(f,_)}}}function EE(t,i){ys.X(t,i);var a=ao;if(a&&t){var o=wi(a).hoistableScripts,h=lo(t),f=o.get(h);f||(f=a.querySelector(Cl(h)),f||(t=w({src:t,async:!0},i),(i=ri.get(h))&&kf(t,i),f=a.createElement("script"),Rt(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function TE(t,i){ys.M(t,i);var a=ao;if(a&&t){var o=wi(a).hoistableScripts,h=lo(t),f=o.get(h);f||(f=a.querySelector(Cl(h)),f||(t=w({src:t,async:!0,type:"module"},i),(i=ri.get(h))&&kf(t,i),f=a.createElement("script"),Rt(f),Jt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Ay(t,i,a,o){var h=(h=me.current)?wu(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=oo(a.href),a=wi(h).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=oo(a.href);var f=wi(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(Al(t)))&&!f._p&&(_.instance=f,_.state.loading=5),ri.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ri.set(t,a),f||SE(h,t,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lo(a),a=wi(h).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function oo(t){return'href="'+pn(t)+'"'}function Al(t){return'link[rel="stylesheet"]['+t+"]"}function Cy(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function SE(t,i,a,o){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=t.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Jt(i,"link",a),Rt(i),t.head.appendChild(i))}function lo(t){return'[src="'+pn(t)+'"]'}function Cl(t){return"script[async]"+t}function Iy(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=t.querySelector('style[data-href~="'+pn(a.href)+'"]');if(o)return i.instance=o,Rt(o),o;var h=w({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Rt(o),Jt(o,"style",h),Au(o,a.precedence,t),i.instance=o;case"stylesheet":h=oo(a.href);var f=t.querySelector(Al(h));if(f)return i.state.loading|=4,i.instance=f,Rt(f),f;o=Cy(a),(h=ri.get(h))&&Rf(o,h),f=(t.ownerDocument||t).createElement("link"),Rt(f);var _=f;return _._p=new Promise(function(E,D){_.onload=E,_.onerror=D}),Jt(f,"link",o),i.state.loading|=4,Au(f,a.precedence,t),i.instance=f;case"script":return f=lo(a.src),(h=t.querySelector(Cl(f)))?(i.instance=h,Rt(h),h):(o=a,(h=ri.get(f))&&(o=w({},a),kf(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Rt(h),Jt(h,"link",o),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Au(o,a.precedence,t));return i.instance}function Au(t,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,_=0;_<o.length;_++){var E=o[_];if(E.dataset.precedence===i)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Rf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function kf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Cu=null;function Ny(t,i,a){if(Cu===null){var o=new Map,h=Cu=new Map;h.set(a,o)}else h=Cu,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ti]||f[Ke]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var E=o.get(_);E?E.push(f):o.set(_,[f])}}return o}function Ry(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function wE(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ky(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function AE(t,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=oo(o.href),f=i.querySelector(Al(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Iu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,Rt(f);return}f=i.ownerDocument||i,o=Cy(o),(h=ri.get(h))&&Rf(o,h),f=f.createElement("link"),Rt(f);var _=f;_._p=new Promise(function(E,D){_.onload=E,_.onerror=D}),Jt(f,"link",o),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Iu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var Of=0;function CE(t,i){return t.stylesheets&&t.count===0&&Ru(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var o=setTimeout(function(){if(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&Of===0&&(Of=62500*oE());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>Of?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function Iu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Nu=null;function Ru(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Nu=new Map,i.forEach(IE,t),Nu=null,Iu.call(t))}function IE(t,i){if(!(i.state.loading&4)){var a=Nu.get(t);if(a)var o=a.get(null);else{a=new Map,Nu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||o,f===o&&a.set(null,h),a.set(_,h),this.count++,o=Iu.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Il={$$typeof:ae,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function NE(t,i,a,o,h,f,_,E,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kn(0),this.hiddenUpdates=Kn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Oy(t,i,a,o,h,f,_,E,D,z,$,ee){return t=new NE(t,i,a,_,D,z,$,ee,E),i=1,f===!0&&(i|=24),f=Dn(3,null,null,i),t.current=f,f.stateNode=t,i=ud(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:i},md(f),t}function Dy(t){return t?(t=Ua,t):Ua}function My(t,i,a,o,h,f){h=Dy(h),o.context===null?o.context=h:o.pendingContext=h,o=Ks(i),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Qs(t,o,i),a!==null&&(En(a,t,i),al(a,t,i))}function jy(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Df(t,i){jy(t,i),(t=t.alternate)&&jy(t,i)}function Vy(t){if(t.tag===13||t.tag===31){var i=Yr(t,67108864);i!==null&&En(i,t,67108864),Df(t,67108864)}}function Ly(t){if(t.tag===13||t.tag===31){var i=Pn();i=Wi(i);var a=Yr(t,i);a!==null&&En(a,t,i),Df(t,i)}}var ku=!0;function RE(t,i,a,o){var h=K.T;K.T=null;var f=le.p;try{le.p=2,Mf(t,i,a,o)}finally{le.p=f,K.T=h}}function kE(t,i,a,o){var h=K.T;K.T=null;var f=le.p;try{le.p=8,Mf(t,i,a,o)}finally{le.p=f,K.T=h}}function Mf(t,i,a,o){if(ku){var h=jf(o);if(h===null)bf(t,i,o,Ou,a),Uy(t,o);else if(DE(h,t,i,a,o))o.stopPropagation();else if(Uy(t,o),i&4&&-1<OE.indexOf(t)){for(;h!==null;){var f=Yn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Gn(f.pendingLanes);if(_!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;_;){var D=1<<31-lt(_);E.entanglements[1]|=D,_&=~D}Pi(f),(We&6)===0&&(mu=Pt()+500,El(0))}}break;case 31:case 13:E=Yr(f,2),E!==null&&En(E,f,2),pu(),Df(f,2)}if(f=jf(o),f===null&&bf(t,i,o,Ou,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else bf(t,i,o,null,a)}}function jf(t){return t=Xn(t),Vf(t)}var Ou=null;function Vf(t){if(Ou=null,t=Si(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Ou=t,null}function Py(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bi()){case xi:return 2;case Is:return 8;case li:case Mr:return 32;case Ns:return 268435456;default:return 32}default:return 32}}var Lf=!1,sr=null,rr=null,ar=null,Nl=new Map,Rl=new Map,or=[],OE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Uy(t,i){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":ar=null;break;case"pointerover":case"pointerout":Nl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(i.pointerId)}}function kl(t,i,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Yn(i),i!==null&&Vy(i)),t):(t.eventSystemFlags|=o,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function DE(t,i,a,o,h){switch(i){case"focusin":return sr=kl(sr,t,i,a,o,h),!0;case"dragenter":return rr=kl(rr,t,i,a,o,h),!0;case"mouseover":return ar=kl(ar,t,i,a,o,h),!0;case"pointerover":var f=h.pointerId;return Nl.set(f,kl(Nl.get(f)||null,t,i,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,Rl.set(f,kl(Rl.get(f)||null,t,i,a,o,h)),!0}return!1}function zy(t){var i=Si(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,Re(t.priority,function(){Ly(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Re(t.priority,function(){Ly(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=jf(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);Fo=o,a.target.dispatchEvent(o),Fo=null}else return i=Yn(a),i!==null&&Vy(i),t.blockedOn=a,!1;i.shift()}return!0}function By(t,i,a){Du(t)&&a.delete(i)}function ME(){Lf=!1,sr!==null&&Du(sr)&&(sr=null),rr!==null&&Du(rr)&&(rr=null),ar!==null&&Du(ar)&&(ar=null),Nl.forEach(By),Rl.forEach(By)}function Mu(t,i){t.blockedOn===i&&(t.blockedOn=null,Lf||(Lf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,ME)))}var ju=null;function qy(t){ju!==t&&(ju=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ju===t&&(ju=null);for(var i=0;i<t.length;i+=3){var a=t[i],o=t[i+1],h=t[i+2];if(typeof o!="function"){if(Vf(o||a)===null)continue;break}var f=Yn(a);f!==null&&(t.splice(i,3),i-=3,Md(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function co(t){function i(D){return Mu(D,t)}sr!==null&&Mu(sr,t),rr!==null&&Mu(rr,t),ar!==null&&Mu(ar,t),Nl.forEach(i),Rl.forEach(i);for(var a=0;a<or.length;a++){var o=or[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<or.length&&(a=or[0],a.blockedOn===null);)zy(a),a.blockedOn===null&&or.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],_=h[Tt]||null;if(typeof f=="function")_||qy(a);else if(_){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Tt]||null)E=_.formAction;else if(Vf(h)!==null)continue}else E=_.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),qy(a)}}}function Hy(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Pf(t){this._internalRoot=t}Vu.prototype.render=Pf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=Pn();My(a,o,t,i,null,null)},Vu.prototype.unmount=Pf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;My(t.current,2,null,t,null,null),pu(),i[Qn]=null}};function Vu(t){this._internalRoot=t}Vu.prototype.unstable_scheduleHydration=function(t){if(t){var i=Y();t={blockedOn:null,target:t,priority:i};for(var a=0;a<or.length&&i!==0&&i<or[a].priority;a++);or.splice(a,0,t),a===0&&zy(t)}};var Fy=e.version;if(Fy!=="19.2.0")throw Error(r(527,Fy,"19.2.0"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=v(i),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var jE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{In=Lu.inject(jE),gt=Lu}catch{}}return Dl.createRoot=function(t,i){if(!l(t))throw Error(r(299));var a=!1,o="",h=Zp,f=Jp,_=Wp;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Oy(t,1,!1,null,null,a,o,null,h,f,_,Hy),t[Qn]=i.current,_f(t),new Pf(i)},Dl.hydrateRoot=function(t,i,a){if(!l(t))throw Error(r(299));var o=!1,h="",f=Zp,_=Jp,E=Wp,D=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),i=Oy(t,1,!0,i,a??null,o,h,D,f,_,E,Hy),i.context=Dy(null),a=i.current,o=Pn(),o=Wi(o),h=Ks(o),h.callback=null,Qs(a,h,o),a=o,i.current.lanes=a,Ji(i,a),Pi(i),t[Qn]=i.current,_f(t),new Vu(i)},Dl.version="19.2.0",Dl}var ev;function KE(){if(ev)return Bf.exports;ev=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Bf.exports=GE(),Bf.exports}var QE=KE();const YE=D_(QE);var we=(s=>(s.Facebook="Facebook",s.Instagram="Instagram",s.OpenAI="OpenAI",s.Gemini="Gemini",s.LinkedIn="LinkedIn",s.GoogleAnalytics="Google Analytics",s.GoogleAds="Google Ads",s.YandexAds="Yandex Ads",s.BingAds="Bing Ads",s.TikTok="TikTok",s.X="X",s))(we||{});const be={triangle:{id:1,svg:'<svg viewBox="0 0 50 50"><polygon points="25,5 45,45 5,45" stroke="currentColor" stroke-width="2" fill="none"/></svg>'},square:{id:2,svg:'<svg viewBox="0 0 50 50"><rect x="5" y="5" width="40" height="40" stroke="currentColor" stroke-width="2" fill="none"/></svg>'},cross:{id:3,svg:'<svg viewBox="0 0 50 50"><line x1="10" y1="25" x2="40" y2="25" stroke="currentColor" stroke-width="2"/><line x1="25" y1="10" x2="25" y2="40" stroke="currentColor" stroke-width="2"/></svg>'},l_shape:{id:4,svg:'<svg viewBox="0 0 50 50"><polyline points="10,10 10,40 40,40" stroke="currentColor" stroke-width="2" fill="none"/></svg>'},trapezoid:{id:5,svg:'<svg viewBox="0 0 50 50"><polygon points="10,40 40,40 30,10 20,10" stroke="currentColor" stroke-width="2" fill="none"/></svg>'},z_shape:{id:6,svg:'<svg viewBox="0 0 50 50"><polyline points="40,10 10,10 40,40 10,40" stroke="currentColor" stroke-width="2" fill="none"/></svg>'}},ql=[{id:"hft",title:"Hidden Figures Test",type:"hft",questions:[{id:1,complexShapeSVG:'<svg viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" fill="none"/><polygon points="50,10 90,90 10,90" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.square,be.triangle,be.cross],correctOptionId:be.triangle.id,explanation:"The triangle was upright inside the square."},{id:2,complexShapeSVG:'<svg viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" stroke="black" fill="none"/><rect x="30" y="30" width="40" height="40" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.l_shape,be.trapezoid,be.square],correctOptionId:be.square.id,explanation:"The square was centered inside the circle."},{id:3,complexShapeSVG:'<svg viewBox="0 0 100 100"><polygon points="10,10 90,10 90,90 10,90" stroke="black" fill="none"/><line x1="10" y1="50" x2="90" y2="50" stroke="black" stroke-width="2"/><line x1="50" y1="10" x2="50" y2="90" stroke="black" stroke-width="2"/></svg>',options:[be.cross,be.z_shape,be.triangle],correctOptionId:be.cross.id,explanation:"The cross formed the center lines of the square."},{id:4,complexShapeSVG:'<svg viewBox="0 0 100 100"><path d="M 10 10 L 10 90 L 90 90" stroke="black" stroke-width="2" fill="none"/><rect x="10" y="10" width="80" height="80" stroke="grey" fill="none" stroke-dasharray="4"/></svg>',options:[be.l_shape,be.square,be.trapezoid],correctOptionId:be.l_shape.id,explanation:"The L-shape formed two sides of the square."},{id:5,complexShapeSVG:'<svg viewBox="0 0 100 100"><polygon points="20,90 80,90 60,20 40,20" stroke="black" stroke-width="2" fill="none"/><line x1="20" y1="90" x2="80" y2="90" stroke="grey" fill="none"/></svg>',options:[be.triangle,be.cross,be.trapezoid],correctOptionId:be.trapezoid.id,explanation:"The trapezoid was presented clearly."},{id:6,complexShapeSVG:'<svg viewBox="0 0 100 100"><polygon points="50,10 90,50 50,90 10,50" stroke="black" fill="none"/><polygon transform="rotate(45 50 50)" points="50,10 90,90 10,90" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.triangle,be.square,be.z_shape],correctOptionId:be.triangle.id,explanation:"The triangle was rotated 45 degrees."},{id:7,complexShapeSVG:'<svg viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="grey" fill="lightgrey"/><line x1="10" y1="10" x2="90" y2="90" stroke="black"/><polyline points="10,10 10,90 90,90" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.l_shape,be.trapezoid,be.square],correctOptionId:be.l_shape.id,explanation:"The L-shape was present, partially obscured by other lines."},{id:8,complexShapeSVG:'<svg viewBox="0 0 100 100" stroke="black" fill="none"><path d="M20,20 L80,20 L20,80 L80,80 Z" stroke-width="2" /><path d="M20,20 L80,80" /><path d="M80,20 L20,80" /></svg>',options:[be.cross,be.z_shape,be.triangle],correctOptionId:be.z_shape.id,explanation:"The Z-shape was formed by the perimeter lines, requiring ignoring the internal diagonals."},{id:9,complexShapeSVG:'<svg viewBox="0 0 100 100"><polygon points="10,90 90,90 70,20 30,20" stroke="black" stroke-width="2" fill="none"/><polygon points="50,90 70,55 30,55" stroke="grey"/></svg>',options:[be.trapezoid,be.triangle,be.square],correctOptionId:be.trapezoid.id,explanation:"The trapezoid shape was the main outline, with distracting internal lines."},{id:10,complexShapeSVG:'<svg viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="black" fill="none" transform="rotate(15 50 50)"/><rect x="20" y="20" width="60" height="60" stroke="black" stroke-width="2" fill="none" transform="rotate(15 50 50)"/></svg>',options:[be.l_shape,be.square,be.cross],correctOptionId:be.square.id,explanation:"A smaller square was nested inside a larger one, both rotated."},{id:11,complexShapeSVG:'<svg viewBox="0 0 100 100"><path d="M10,10 L 90,90 M 10,90 L 90,10 M 50,10 V 90 M 10,50 H 90" stroke="grey" /><path d="M50,10 L 90,50 L 50,90" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.triangle,be.l_shape,be.z_shape],correctOptionId:be.triangle.id,explanation:"The triangle was formed by a subset of lines in a complex grid."},{id:12,complexShapeSVG:'<svg viewBox="0 0 100 100"><rect x="10" y="10" width="80" height="80" stroke="grey" fill="#EEE"/><polygon points="10,10 50,50 10,90" stroke="black" fill="none"/><polygon points="90,10 50,50 90,90" stroke="black" fill="none"/><line x1="10" y1="10" x2="90" y2="10" stroke="black" stroke-width="2"/><line x1="10" y1="90" x2="90" y2="90" stroke="black" stroke-width="2"/></svg>',options:[be.square,be.trapezoid,be.z_shape],correctOptionId:be.z_shape.id,explanation:"The Z-shape was camouflaged and required connecting non-adjacent lines."},{id:13,complexShapeSVG:'<svg viewBox="0 0 100 100" stroke="black" fill="none"><path d="M50,2 L98,35 V98 H2z" stroke="grey"/><path d="M50,2 L2,35 V98 H98z" stroke="grey"/><path d="M2,35 H98" stroke="grey"/><path d="M50,98 V2" stroke="grey"/><polyline points="2,35 2,98 50,98" stroke-width="2"/></svg>',options:[be.l_shape,be.cross,be.square],correctOptionId:be.l_shape.id,explanation:"The L-shape was small, inverted, and hidden in a corner of a very complex design."},{id:14,complexShapeSVG:'<svg viewBox="0 0 100 100"><path d="M10 10 H 90 V 90 H 10 Z" stroke="#DDD"/><path d="M10 10 L 90 90 M 90 10 L 10 90" stroke="#DDD"/><path d="M30,10 L70,10 L50,50 Z" stroke="grey"/><path d="M10,30 L50,50 L10,70 Z" stroke="grey"/><path d="M90,30 L50,50 L90,70 Z" stroke="grey"/><path d="M30,90 L70,90 L50,50 Z" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.trapezoid,be.triangle,be.cross],correctOptionId:be.triangle.id,explanation:"The target triangle was inverted at the bottom, surrounded by similar distracting shapes."},{id:15,complexShapeSVG:'<svg viewBox="0 0 100 100"><path d="M50,10 L10,90 L90,90 Z" stroke="grey" /><path d="M50,10 L90,40 L70,90 L30,90 Z" stroke="grey"/><path d="M50,10 L70,90" stroke="grey"/><path d="M30,90 H70 V70 H30 Z" stroke="black" stroke-width="2" fill="none"/></svg>',options:[be.square,be.l_shape,be.trapezoid],correctOptionId:be.square.id,explanation:"The square was formed by a combination of lines from multiple overlapping shapes."}]},{id:"marketing_knowledge",title:"Marketing Knowledge Test",type:"standard",questions:[{id:1,text:'What does "SEO" stand for?',options:[{id:1,text:"Search Engine Optimization"},{id:2,text:"Social Engagement Optimization"},{id:3,text:"Site Engine Operations"}],correctOptionId:1,explanation:"SEO stands for Search Engine Optimization, the process of improving your site's visibility in search engine results."},{id:2,text:"Which metric measures the percentage of people who clicked on your ad?",options:[{id:1,text:"CTR (Click-Through Rate)"},{id:2,text:"CPC (Cost Per Click)"},{id:3,text:"Conversion Rate"}],correctOptionId:1,explanation:"CTR is the ratio of clicks to impressions and is a key measure of ad performance."},{id:3,text:"What is A/B testing primarily used for?",options:[{id:1,text:"Comparing two versions of a webpage or ad"},{id:2,text:"Audience segmentation"},{id:3,text:"Budget allocation"}],correctOptionId:1,explanation:"A/B testing involves comparing two variants (A and B) to determine which one performs better."},{id:4,text:'What is a "lead" in marketing?',options:[{id:1,text:"A potential customer who has shown interest"},{id:2,text:"A successful sale"},{id:3,text:"A marketing campaign"}],correctOptionId:1,explanation:"A lead is an individual or organization with an interest in what you are selling."},{id:5,text:'What does "B2B" stand for?',options:[{id:1,text:"Business-to-Business"},{id:2,text:"Business-to-Consumer"},{id:3,text:"Brand-to-Business"}],correctOptionId:1,explanation:"B2B describes companies that sell products or services to other companies."},{id:6,text:"Which of the following is primarily a professional networking platform?",options:[{id:1,text:"LinkedIn"},{id:2,text:"Instagram"},{id:3,text:"Google Analytics"}],correctOptionId:1,explanation:"LinkedIn is designed for professional networking, industry discussions, and B2B marketing."},{id:7,text:"What is content marketing?",options:[{id:1,text:"Creating valuable content to attract an audience"},{id:2,text:"Placing ads inside content"},{id:3,text:"Marketing only using video content"}],correctOptionId:1,explanation:"Content marketing focuses on creating and distributing valuable, relevant content to attract and retain a clearly defined audience."},{id:8,text:'What does "ROI" stand for?',options:[{id:1,text:"Return on Investment"},{id:2,text:"Rate of Interaction"},{id:3,text:"Reach of Influence"}],correctOptionId:1,explanation:"ROI is a performance measure used to evaluate the efficiency or profitability of an investment."},{id:9,text:'What is a "Call to Action" (CTA)?',options:[{id:1,text:"An instruction to provoke an immediate response"},{id:2,text:"A customer service hotline"},{id:3,text:"A marketing team meeting"}],correctOptionId:1,explanation:"A CTA is a prompt on a website that tells the user to take some specified action, such as 'Buy Now' or 'Sign Up'."},{id:10,text:"What is the purpose of a marketing funnel?",options:[{id:1,text:"To guide customers through their journey to purchase"},{id:2,text:"To track website traffic sources"},{id:3,text:"To manage social media posts"}],correctOptionId:1,explanation:"A marketing funnel illustrates the theoretical customer journey towards the purchase of a good or service."}]},{id:"eq",title:"EQ Test",type:"standard",questions:[{id:1,text:"You receive harsh criticism. How do you react?",options:[{id:1,text:"Reflect on it for valuable insights"},{id:2,text:"Get defensive and justify your actions"},{id:3,text:"Ignore it and move on"}],correctOptionId:1,explanation:""},{id:2,text:"A team member is struggling with a task. What do you do?",options:[{id:1,text:"Offer to help and share your knowledge"},{id:2,text:"Inform the manager of their poor performance"},{id:3,text:"Wait for them to ask for help directly"}],correctOptionId:1,explanation:""},{id:3,text:"How well do you adapt to sudden, unexpected changes in a project?",options:[{id:1,text:"Very well, I see it as a new challenge"},{id:2,text:"Moderately well, but I feel stressed"},{id:3,text:"Not well, I prefer stability and resist change"}],correctOptionId:1,explanation:""},{id:4,text:"When you are under significant stress, you tend to become:",options:[{id:1,text:"More focused and determined"},{id:2,text:"Irritable and short-tempered with others"},{id:3,text:"Withdrawn and quiet"}],correctOptionId:1,explanation:""},{id:5,text:"Can you accurately perceive others' feelings, even when they are not explicitly stated?",options:[{id:1,text:"Usually, I can read body language and tone well"},{id:2,text:"Sometimes, if I know the person well"},{id:3,text:"Rarely, I tend to take people at their word"}],correctOptionId:1,explanation:""},{id:6,text:"How do you handle disagreements in a team setting?",options:[{id:1,text:"Listen to all sides and seek a compromise"},{id:2,text:"Argue my point forcefully to win"},{id:3,text:"Avoid the conflict and hope it resolves itself"}],correctOptionId:1,explanation:""},{id:7,text:"Are you aware of the specific situations or words that trigger a strong emotional response in you?",options:[{id:1,text:"Yes, very aware and I can manage my reactions"},{id:2,text:"I know some of them but can be caught off guard"},{id:3,text:"Not really, my emotions often surprise me"}],correctOptionId:1,explanation:""},{id:8,text:"How do you motivate yourself to start a difficult task you have been procrastinating on?",options:[{id:1,text:"Break it into smaller, manageable steps"},{id:2,text:"Wait until the pressure of a deadline forces me"},{id:3,text:"Try to find someone else to do it"}],correctOptionId:1,explanation:""},{id:9,text:"You made a mistake that impacts the team. What is your first step?",options:[{id:1,text:"Acknowledge it openly and propose a solution"},{id:2,text:"Try to fix it quietly without anyone noticing"},{id:3,text:"Find reasons why it wasn't entirely my fault"}],correctOptionId:1,explanation:""},{id:10,text:"How do you react to the success of a colleague or competitor?",options:[{id:1,text:"Genuinely happy for them and see it as inspiration"},{id:2,text:"Outwardly congratulate them but feel jealous"},{id:3,text:"I feel demotivated and inadequate"}],correctOptionId:1,explanation:""}].map(s=>({...s,correctOptionId:0,explanation:""}))}],M_=[{platform:we.Facebook,status:"disconnected"},{platform:we.Instagram,status:"disconnected"},{platform:we.LinkedIn,status:"disconnected"},{platform:we.GoogleAnalytics,status:"disconnected"},{platform:we.GoogleAds,status:"disconnected"},{platform:we.YandexAds,status:"disconnected"},{platform:we.BingAds,status:"disconnected"},{platform:we.OpenAI,status:"disconnected"},{platform:we.Gemini,status:"disconnected"},{platform:we.TikTok,status:"disconnected"},{platform:we.X,status:"disconnected"}],XE=[{id:"1",parentId:null,version:1,createdByUserId:"system",status:"public",title:"Introduction to SEO",format:"text",learningObjectives:["Understand what SEO is and why it's important.","Identify the difference between on-page and off-page SEO.","Learn the basics of keyword research."],modules:[{title:"What is SEO?",content:"Search Engine Optimization (SEO) is the practice of increasing the quantity and quality of traffic to your website through organic search engine results. Unlike paid ads, organic traffic is 'free'."},{title:"On-Page vs. Off-Page SEO",content:"On-page SEO refers to optimizing elements on your website (e.g., page titles, content, images). Off-page SEO refers to actions taken outside of your own website to impact your rankings (e.g., link building, social media)."},{title:"Keyword Research Basics",content:"Keyword research is the process of finding and analyzing search terms that people enter into search engines. The goal is to find topics your target audience is searching for."}],practicalExercise:{title:"Find 3 Keywords for Your Business",description:"Use a free tool like Google Keyword Planner or Ubersuggest to find three relevant keywords for your business or industry. Think about what your potential customers would search for to find your products or services."},quiz:[{id:1,text:"What does SEO stand for?",options:[{id:1,text:"Search Engine Optimization"},{id:2,text:"Site Engagement Online"},{id:3,text:"Secure External Office"}],correctOptionId:1,explanation:"SEO stands for Search Engine Optimization, the process of improving your site to increase its visibility in relevant searches."},{id:2,text:"Which of these is an example of on-page SEO?",options:[{id:1,text:"Building backlinks from other websites"},{id:2,text:"Writing a descriptive meta title for your blog post"},{id:3,text:"Getting brand mentions on social media"}],correctOptionId:2,explanation:"Meta titles are a key on-page SEO element that you control directly on your website. Backlinks and social mentions are off-page signals."}],knowledgeLevel:["Beginner"],learningStyle:["Analytical","Contextual"],relevantIndustries:["Technology","Healthcare","Finance","Retail","Education","Manufacturing","E-commerce","Other"],relevantPlatforms:[we.GoogleAnalytics,we.GoogleAds],isCompleted:!1,score:0,attempts:0,rating:null,aiProvider:"Gemini"}],j_=["Technology","Healthcare","Finance","Retail","Education","Manufacturing","E-commerce","Other"],$E=[{id:"ss1",title:"E-commerce Store Triples Conversion Rate",challenge:"A small online boutique was struggling with high website traffic but very few sales, resulting in a low conversion rate of 0.5%.",solution:"A/B Test Your Call-to-Action Buttons",metrics:[{name:"Conversion Rate",before:"0.5%",after:"1.5%",change:"+200%"},{name:"Cart Abandonment",before:"85%",after:"60%",change:"-29%"}]},{id:"ss2",title:"SaaS Company Boosts Lead Quality",challenge:"A B2B software company was generating many leads, but the sales team reported that most were unqualified.",solution:"Refine Ad Targeting with Negative Keywords",metrics:[{name:"Lead-to-Opportunity Rate",before:"10%",after:"28%",change:"+180%"},{name:"Cost Per Qualified Lead",before:"$120",after:"$75",change:"-37.5%"}]}],vt=({children:s,className:e=""})=>m.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 ${e}`,children:s}),ZE=()=>{};var tv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[n++]=l:l<2048?(e[n++]=l>>6|192,e[n++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=l>>18|240,e[n++]=l>>12&63|128,e[n++]=l>>6&63|128,e[n++]=l&63|128):(e[n++]=l>>12|224,e[n++]=l>>6&63|128,e[n++]=l&63|128)}return e},JE=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const l=s[n++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[n++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[n++],d=s[n++],p=s[n++],y=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[n++],d=s[n++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},L_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,p=d?s[l+1]:0,y=l+2<s.length,v=y?s[l+2]:0,x=c>>2,w=(c&3)<<4|p>>4;let k=(p&15)<<2|v>>6,L=v&63;y||(L=64,d||(k=64)),r.push(n[x],n[w],n[k],n[L])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(V_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):JE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=n[s.charAt(l++)],p=l<s.length?n[s.charAt(l)]:0;++l;const v=l<s.length?n[s.charAt(l)]:64;++l;const w=l<s.length?n[s.charAt(l)]:64;if(++l,c==null||p==null||v==null||w==null)throw new WE;const k=c<<2|p>>4;if(r.push(k),v!==64){const L=p<<4&240|v>>2;if(r.push(L),w!==64){const Q=v<<6&192|w;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class WE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eT=function(s){const e=V_(s);return L_.encodeByteArray(e,!0)},eh=function(s){return eT(s).replace(/\./g,"")},P_=function(s){try{return L_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT=()=>tT().__FIREBASE_DEFAULTS__,iT=()=>{if(typeof process>"u"||typeof tv>"u")return;const s=tv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},sT=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&P_(s[1]);return e&&JSON.parse(e)},Th=()=>{try{return ZE()||nT()||iT()||sT()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},U_=s=>{var e,n;return(n=(e=Th())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},z_=s=>{const e=U_(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B_=()=>{var s;return(s=Th())==null?void 0:s.config},q_=s=>{var e;return(e=Th())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Om(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[eh(JSON.stringify(n)),eh(JSON.stringify(d)),""].join(".")}const Hl={};function oT(){const s={prod:[],emulator:[]};for(const e of Object.keys(Hl))Hl[e]?s.emulator.push(e):s.prod.push(e);return s}function lT(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let nv=!1;function Dm(s,e){if(typeof window>"u"||typeof document>"u"||!Cr(window.location.host)||Hl[s]===e||Hl[s]||nv)return;Hl[s]=e;function n(k){return`__firebase__banner__${k}`}const r="__firebase__banner",c=oT().prod.length>0;function d(){const k=document.getElementById(r);k&&k.remove()}function p(k){k.style.display="flex",k.style.background="#7faaf0",k.style.position="fixed",k.style.bottom="5px",k.style.left="5px",k.style.padding=".5em",k.style.borderRadius="5px",k.style.alignItems="center"}function y(k,L){k.setAttribute("width","24"),k.setAttribute("id",L),k.setAttribute("height","24"),k.setAttribute("viewBox","0 0 24 24"),k.setAttribute("fill","none"),k.style.marginLeft="-6px"}function v(){const k=document.createElement("span");return k.style.cursor="pointer",k.style.marginLeft="16px",k.style.fontSize="24px",k.innerHTML=" &times;",k.onclick=()=>{nv=!0,d()},k}function x(k,L){k.setAttribute("id",L),k.innerText="Learn more",k.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",k.setAttribute("target","__blank"),k.style.paddingLeft="5px",k.style.textDecoration="underline"}function w(){const k=lT(r),L=n("text"),Q=document.getElementById(L)||document.createElement("span"),ie=n("learnmore"),W=document.getElementById(ie)||document.createElement("a"),de=n("preprendIcon"),pe=document.getElementById(de)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(k.created){const ae=k.element;p(ae),x(W,ie);const ce=v();y(pe,de),ae.append(pe,Q,W,ce),document.body.appendChild(ae)}c?(Q.innerText="Preview backend disconnected.",pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function uT(){var e;const s=(e=Th())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dT(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function fT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mT(){const s=cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function gT(){return!uT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pT(){try{return typeof indexedDB=="object"}catch{return!1}}function yT(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{n=!1},l.onerror=()=>{var c;e(((c=l.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="FirebaseError";class Xi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vT,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ac.prototype.create)}}class ac{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?_T(c,r):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new Xi(l,p,r)}}function _T(s,e){return s.replace(bT,(n,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const bT=/\{\$([^}]+)}/g;function xT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ha(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const l of n){if(!r.includes(l))return!1;const c=s[l],d=e[l];if(iv(c)&&iv(d)){if(!ha(c,d))return!1}else if(c!==d)return!1}for(const l of r)if(!n.includes(l))return!1;return!0}function iv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ml(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[l,c]=r.split("=");e[decodeURIComponent(l)]=decodeURIComponent(c)}}),e}function jl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function ET(s,e){const n=new TT(s,e);return n.subscribe.bind(n)}class TT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let l;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ST(e,["next","error","complete"])?l=e:l={next:e,error:n,complete:r},l.next===void 0&&(l.next=Gf),l.error===void 0&&(l.error=Gf),l.complete===void 0&&(l.complete=Gf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ST(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function Gf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(s){return s&&s._delegate?s._delegate:s}class br{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:n});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CT(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&d.resolve(l)}return l}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const l of r)try{l(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AT(s){return s===oa?void 0:s}function CT(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(qe||(qe={}));const NT={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},RT=qe.INFO,kT={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},OT=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=kT[e];if(l)console[l](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=RT,this._logHandler=OT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const DT=(s,e)=>e.some(n=>s instanceof n);let sv,rv;function MT(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jT(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H_=new WeakMap,sm=new WeakMap,F_=new WeakMap,Kf=new WeakMap,jm=new WeakMap;function VT(s){const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{n(pr(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&H_.set(n,s)}).catch(()=>{}),jm.set(e,s),e}function LT(s){if(sm.has(s))return;const e=new Promise((n,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{n(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});sm.set(s,e)}let rm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return sm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||F_.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function PT(s){rm=s(rm)}function UT(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Qf(this),e,...n);return F_.set(r,e.sort?e.sort():[e]),pr(r)}:jT().includes(s)?function(...e){return s.apply(Qf(this),e),pr(H_.get(this))}:function(...e){return pr(s.apply(Qf(this),e))}}function zT(s){return typeof s=="function"?UT(s):(s instanceof IDBTransaction&&LT(s),DT(s,MT())?new Proxy(s,rm):s)}function pr(s){if(s instanceof IDBRequest)return VT(s);if(Kf.has(s))return Kf.get(s);const e=zT(s);return e!==s&&(Kf.set(s,e),jm.set(e,s)),e}const Qf=s=>jm.get(s);function BT(s,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const d=indexedDB.open(s,e),p=pr(d);return r&&d.addEventListener("upgradeneeded",y=>{r(pr(d.result),y.oldVersion,y.newVersion,pr(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),p}const qT=["get","getKey","getAll","getAllKeys","count"],HT=["put","add","delete","clear"],Yf=new Map;function av(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Yf.get(e))return Yf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=HT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||qT.includes(n)))return;const c=async function(d,...p){const y=this.transaction(d,l?"readwrite":"readonly");let v=y.store;return r&&(v=v.index(p.shift())),(await Promise.all([v[n](...p),l&&y.done]))[0]};return Yf.set(e,c),c}PT(s=>({...s,get:(e,n,r)=>av(e,n)||s.get(e,n,r),has:(e,n)=>!!av(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GT(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const am="@firebase/app",ov="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Mm("@firebase/app"),KT="@firebase/app-compat",QT="@firebase/analytics-compat",YT="@firebase/analytics",XT="@firebase/app-check-compat",$T="@firebase/app-check",ZT="@firebase/auth",JT="@firebase/auth-compat",WT="@firebase/database",e2="@firebase/data-connect",t2="@firebase/database-compat",n2="@firebase/functions",i2="@firebase/functions-compat",s2="@firebase/installations",r2="@firebase/installations-compat",a2="@firebase/messaging",o2="@firebase/messaging-compat",l2="@firebase/performance",c2="@firebase/performance-compat",u2="@firebase/remote-config",h2="@firebase/remote-config-compat",d2="@firebase/storage",f2="@firebase/storage-compat",m2="@firebase/firestore",g2="@firebase/ai",p2="@firebase/firestore-compat",y2="firebase",v2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="[DEFAULT]",_2={[am]:"fire-core",[KT]:"fire-core-compat",[YT]:"fire-analytics",[QT]:"fire-analytics-compat",[$T]:"fire-app-check",[XT]:"fire-app-check-compat",[ZT]:"fire-auth",[JT]:"fire-auth-compat",[WT]:"fire-rtdb",[e2]:"fire-data-connect",[t2]:"fire-rtdb-compat",[n2]:"fire-fn",[i2]:"fire-fn-compat",[s2]:"fire-iid",[r2]:"fire-iid-compat",[a2]:"fire-fcm",[o2]:"fire-fcm-compat",[l2]:"fire-perf",[c2]:"fire-perf-compat",[u2]:"fire-rc",[h2]:"fire-rc-compat",[d2]:"fire-gcs",[f2]:"fire-gcs-compat",[m2]:"fire-fst",[p2]:"fire-fst-compat",[g2]:"fire-vertex","fire-js":"fire-js",[y2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Map,b2=new Map,lm=new Map;function lv(s,e){try{s.container.addComponent(e)}catch(n){Es.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function da(s){const e=s.name;if(lm.has(e))return Es.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,s);for(const n of th.values())lv(n,s);for(const n of b2.values())lv(n,s);return!0}function Sh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Un(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yr=new ac("app","Firebase",x2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=v2;function G_(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:om,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw yr.create("bad-app-name",{appName:String(l)});if(n||(n=B_()),!n)throw yr.create("no-options");const c=th.get(l);if(c){if(ha(n,c.options)&&ha(r,c.config))return c;throw yr.create("duplicate-app",{appName:l})}const d=new IT(l);for(const y of lm.values())d.addComponent(y);const p=new E2(n,r,d);return th.set(l,p),p}function Vm(s=om){const e=th.get(s);if(!e&&s===om&&B_())return G_();if(!e)throw yr.create("no-app",{appName:s});return e}function bs(s,e,n){let r=_2[s]??s;n&&(r+=`-${n}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Es.warn(d.join(" "));return}da(new br(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="firebase-heartbeat-database",S2=1,$l="firebase-heartbeat-store";let Xf=null;function K_(){return Xf||(Xf=BT(T2,S2,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore($l)}catch(n){console.warn(n)}}}}).catch(s=>{throw yr.create("idb-open",{originalErrorMessage:s.message})})),Xf}async function w2(s){try{const n=(await K_()).transaction($l),r=await n.objectStore($l).get(Q_(s));return await n.done,r}catch(e){if(e instanceof Xi)Es.warn(e.message);else{const n=yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Es.warn(n.message)}}}async function cv(s,e){try{const r=(await K_()).transaction($l,"readwrite");await r.objectStore($l).put(e,Q_(s)),await r.done}catch(n){if(n instanceof Xi)Es.warn(n.message);else{const r=yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Es.warn(r.message)}}}function Q_(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,C2=30;class I2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new R2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=uv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:l}),this._heartbeatsCache.heartbeats.length>C2){const d=k2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uv(),{heartbeatsToSend:r,unsentEntries:l}=N2(this._heartbeatsCache.heartbeats),c=eh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Es.warn(n),""}}}function uv(){return new Date().toISOString().substring(0,10)}function N2(s,e=A2){const n=[];let r=s.slice();for(const l of s){const c=n.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),hv(n)>e){c.dates.pop();break}}else if(n.push({agent:l.agent,dates:[l.date]}),hv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class R2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pT()?yT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await w2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function hv(s){return eh(JSON.stringify({version:2,heartbeats:s})).length}function k2(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(s){da(new br("platform-logger",e=>new FT(e),"PRIVATE")),da(new br("heartbeat",e=>new I2(e),"PRIVATE")),bs(am,ov,s),bs(am,ov,"esm2020"),bs("fire-js","")}O2("");function Y_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D2=Y_,X_=new ac("auth","Firebase",Y_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Mm("@firebase/auth");function M2(s,...e){nh.logLevel<=qe.WARN&&nh.warn(`Auth (${Co}): ${s}`,...e)}function Fu(s,...e){nh.logLevel<=qe.ERROR&&nh.error(`Auth (${Co}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(s,...e){throw Lm(s,...e)}function zi(s,...e){return Lm(s,...e)}function $_(s,e,n){const r={...D2(),[e]:n};return new ac("auth","Firebase",r).create(e,{appName:s.name})}function xs(s){return $_(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return X_.create(s,...e)}function Ae(s,e,...n){if(!s)throw Lm(e,...n)}function vs(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Fu(e),new Error(e)}function Ts(s,e){s||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function j2(){return dv()==="http:"||dv()==="https:"}function dv(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(j2()||dT()||"connection"in navigator)?navigator.onLine:!0}function L2(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ts(n>e,"Short delay should be less than long delay!"),this.isMobile=cT()||fT()}get(){return V2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(s,e){Ts(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z2=new lc(3e4,6e4);function Ir(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Nr(s,e,n,r,l={}){return J_(s,l,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const p=oc({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const v={method:e,headers:y,...c};return hT()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&Cr(s.emulatorConfig.host)&&(v.credentials="include"),Z_.fetch()(await W_(s,s.config.apiHost,n,p),v)})}async function J_(s,e,n){s._canInitEmulator=!1;const r={...P2,...e};try{const l=new q2(s),c=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Pu(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[y,v]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pu(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Pu(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw Pu(s,"user-disabled",d);const x=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw $_(s,x,v);_i(s,x)}}catch(l){if(l instanceof Xi)throw l;_i(s,"network-request-failed",{message:String(l)})}}async function cc(s,e,n,r,l={}){const c=await Nr(s,e,n,r,l);return"mfaPendingCredential"in c&&_i(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function W_(s,e,n,r){const l=`${e}${n}?${r}`,c=s,d=c.config.emulator?Pm(s.config,l):`${s.config.apiScheme}://${l}`;return U2.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}function B2(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class q2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zi(this.auth,"network-request-failed")),z2.get())})}}function Pu(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const l=zi(s,e,r);return l.customData._tokenResponse=n,l}function fv(s){return s!==void 0&&s.enterprise!==void 0}class H2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return B2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F2(s,e){return Nr(s,"GET","/v2/recaptchaConfig",Ir(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G2(s,e){return Nr(s,"POST","/v1/accounts:delete",e)}async function ih(s,e){return Nr(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K2(s,e=!1){const n=Ht(s),r=await n.getIdToken(e),l=Um(r);Ae(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:l,token:r,authTime:Fl($f(l.auth_time)),issuedAtTime:Fl($f(l.iat)),expirationTime:Fl($f(l.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function $f(s){return Number(s)*1e3}function Um(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Fu("JWT malformed, contained fewer than 3 sections"),null;try{const l=P_(n);return l?JSON.parse(l):(Fu("Failed to decode base64 JWT payload"),null)}catch(l){return Fu("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function mv(s){const e=Um(s);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xi&&Q2(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function Q2({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fl(this.lastLoginAt),this.creationTime=Fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(s){var w;const e=s.auth,n=await s.getIdToken(),r=await Zl(s,ih(e,{idToken:n}));Ae(r==null?void 0:r.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=(w=l.providerUserInfo)!=null&&w.length?eb(l.providerUserInfo):[],d=$2(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!(d!=null&&d.length),v=p?y:!1,x={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new um(l.createdAt,l.lastLoginAt),isAnonymous:v};Object.assign(s,x)}async function X2(s){const e=Ht(s);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $2(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function eb(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(s,e){const n=await J_(s,{},async()=>{const r=oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await W_(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&Cr(s.emulatorConfig.host)&&(y.credentials="include"),Z_.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J2(s,e){return Nr(s,"POST","/v2/accounts:revokeToken",Ir(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):mv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=mv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:l,expiresIn:c}=await Z2(e,n);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:l,expirationTime:c}=n,d=new po;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Ae(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Ae(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new po,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(s,e){Ae(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:n,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new Y2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new um(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const n=await Zl(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K2(this,e)}reload(){return X2(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(xs(this.auth));const e=await this.getIdToken();return await Zl(this,G2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,l=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,p=n.tenantId??void 0,y=n._redirectEventId??void 0,v=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:w,emailVerified:k,isAnonymous:L,providerData:Q,stsTokenManager:ie}=n;Ae(w&&ie,e,"internal-error");const W=po.fromJSON(this.name,ie);Ae(typeof w=="string",e,"internal-error"),cr(r,e.name),cr(l,e.name),Ae(typeof k=="boolean",e,"internal-error"),Ae(typeof L=="boolean",e,"internal-error"),cr(c,e.name),cr(d,e.name),cr(p,e.name),cr(y,e.name),cr(v,e.name),cr(x,e.name);const de=new vi({uid:w,auth:e,email:l,emailVerified:k,displayName:r,isAnonymous:L,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:W,createdAt:v,lastLoginAt:x});return Q&&Array.isArray(Q)&&(de.providerData=Q.map(pe=>({...pe}))),y&&(de._redirectEventId=y),de}static async _fromIdTokenResponse(e,n,r=!1){const l=new po;l.updateFromServerResponse(n);const c=new vi({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await sh(c),c}static async _fromGetAccountInfoResponse(e,n,r){const l=n.users[0];Ae(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?eb(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!(c!=null&&c.length),p=new po;p.updateFromIdToken(r);const y=new vi({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new um(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(c!=null&&c.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;function _s(s){Ts(s instanceof Function,"Expected a class definition");let e=gv.get(s);return e?(Ts(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,gv.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tb.type="NONE";const pv=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(s,e,n){return`firebase:${s}:${e}:${n}`}class yo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Gu(this.userKey,l.apiKey,c),this.fullPersistenceKey=Gu("persistence",l.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ih(this.auth,{idToken:e}).catch(()=>{});return n?vi._fromGetAccountInfoResponse(this.auth,n,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yo(_s(pv),e,r);const l=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=l[0]||_s(pv);const d=Gu(r,e.config.apiKey,e.name);let p=null;for(const v of n)try{const x=await v._get(d);if(x){let w;if(typeof x=="string"){const k=await ih(e,{idToken:x}).catch(()=>{});if(!k)break;w=await vi._fromGetAccountInfoResponse(e,k,x)}else w=vi._fromJSON(e,x);v!==c&&(p=w),c=v;break}}catch{}const y=l.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new yo(c,e,r):(c=y[0],p&&await c._set(d,p.toJSON()),await Promise.all(n.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new yo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ob(e))return"Blackberry";if(lb(e))return"Webos";if(ib(e))return"Safari";if((e.includes("chrome/")||sb(e))&&!e.includes("edge/"))return"Chrome";if(ab(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nb(s=cn()){return/firefox\//i.test(s)}function ib(s=cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sb(s=cn()){return/crios\//i.test(s)}function rb(s=cn()){return/iemobile/i.test(s)}function ab(s=cn()){return/android/i.test(s)}function ob(s=cn()){return/blackberry/i.test(s)}function lb(s=cn()){return/webos/i.test(s)}function zm(s=cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function W2(s=cn()){var e;return zm(s)&&!!((e=window.navigator)!=null&&e.standalone)}function eS(){return mT()&&document.documentMode===10}function cb(s=cn()){return zm(s)||ab(s)||lb(s)||ob(s)||/windows phone/i.test(s)||rb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(s,e=[]){let n;switch(s){case"Browser":n=yv(cn());break;case"Worker":n=`${yv(cn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=c=>new Promise((d,p)=>{try{const y=e(c);d(y)}catch(y){p(y)}});r.onAbort=n,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(s,e={}){return Nr(s,"GET","/v2/passwordPolicy",Ir(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=6;class sS{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iS,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),l&&(n.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,l){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vv(this),this.idTokenSubscription=new vv(this),this.beforeStateQueue=new tS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,l,c;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((l=this._popupRedirectResolver)!=null&&l._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ih(this,{idToken:e}),r=await vi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Un(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(p=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(p,p))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(c=this.redirectUser)==null?void 0:c._redirectEventId,p=r==null?void 0:r._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===p)&&(y!=null&&y.user)&&(r=y.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(d){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(xs(this));const n=e?Ht(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(xs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(xs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nS(this),n=new sS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ac("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J2(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,l){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,r,l);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var l;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((l=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:l.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&M2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function va(s){return Ht(s)}class vv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ET(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aS(s){wh=s}function hb(s){return wh.loadJS(s)}function oS(){return wh.recaptchaEnterpriseScript}function lS(){return wh.gapiScript}function cS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class uS{constructor(){this.enterprise=new hS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dS="recaptcha-enterprise",db="NO_RECAPTCHA";class fS{constructor(e){this.type=dS,this.auth=va(e)}async verify(e="verify",n=!1){async function r(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,p)=>{F2(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const v=new H2(y);return c.tenantId==null?c._agentRecaptchaConfig=v:c._tenantRecaptchaConfigs[c.tenantId]=v,d(v.siteKey)}}).catch(y=>{p(y)})})}function l(c,d,p){const y=window.grecaptcha;fv(y)?y.enterprise.ready(()=>{y.enterprise.execute(c,{action:e}).then(v=>{d(v)}).catch(()=>{d(db)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uS().execute("siteKey",{action:"verify"}):new Promise((c,d)=>{r(this.auth).then(p=>{if(!n&&fv(window.grecaptcha))l(p,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=oS();y.length!==0&&(y+=p),hb(y).then(()=>{l(p,c,d)}).catch(v=>{d(v)})}}).catch(p=>{d(p)})})}}async function _v(s,e,n,r=!1,l=!1){const c=new fS(s);let d;if(l)d=db;else try{d=await c.verify(n)}catch{d=await c.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const y=p.phoneEnrollmentInfo.phoneNumber,v=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const y=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return r?Object.assign(p,{captchaResp:d}):Object.assign(p,{captchaResponse:d}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function hm(s,e,n,r,l){var c;if((c=s._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await _v(s,e,n,n==="getOobCode");return r(s,d)}else return r(s,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const p=await _v(s,e,n,n==="getOobCode");return r(s,p)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(s,e){const n=Sh(s,"auth");if(n.isInitialized()){const l=n.getImmediate(),c=n.getOptions();if(ha(c,e??{}))return l;_i(l,"already-initialized")}return n.initialize({options:e})}function gS(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pS(s,e,n){const r=va(s);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=fb(e),{host:d,port:p}=yS(e),y=p===null?"":`:${p}`,v={url:`${c}//${d}${y}/`},x=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(ha(v,r.config.emulator)&&ha(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,Cr(d)?(Om(`${c}//${d}${y}`),Dm("Auth",!0)):vS()}function fb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function yS(s){const e=fb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:bv(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:bv(d)}}}function bv(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function vS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,n){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function _S(s,e){return Nr(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(s,e){return cc(s,"POST","/v1/accounts:signInWithPassword",Ir(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(s,e){return cc(s,"POST","/v1/accounts:signInWithEmailLink",Ir(s,e))}async function ES(s,e){return cc(s,"POST","/v1/accounts:signInWithEmailLink",Ir(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends Bm{constructor(e,n,r,l=null){super("password",r),this._email=e,this._password=n,this._tenantId=l}static _fromEmailAndPassword(e,n){return new Jl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hm(e,n,"signInWithPassword",bS);case"emailLink":return xS(e,{email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hm(e,r,"signUpPassword",_S);case"emailLink":return ES(e,{idToken:n,email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(s,e){return cc(s,"POST","/v1/accounts:signInWithIdp",Ir(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="http://localhost";class fa extends Bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_i("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=n;if(!r||!l)return null;const d=new fa(r,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return vo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vo(e,n)}buildRequest(){const e={requestUri:TS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wS(s){const e=Ml(jl(s)).link,n=e?Ml(jl(e)).deep_link_id:null,r=Ml(jl(s)).deep_link_id;return(r?Ml(jl(r)).link:null)||r||n||e||s}class qm{constructor(e){const n=Ml(jl(e)),r=n.apiKey??null,l=n.oobCode??null,c=SS(n.mode??null);Ae(r&&l&&c,"argument-error"),this.apiKey=r,this.operation=c,this.code=l,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=wS(e);try{return new qm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return Jl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qm.parseLink(n);return Ae(r,"argument-error"),Jl._fromEmailAndCode(e,r.code,r.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends mb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends uc{constructor(){super("facebook.com")}static credential(e){return fa._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fa._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.GOOGLE_SIGN_IN_METHOD="google.com";hr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends uc{constructor(){super("github.com")}static credential(e){return fa._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends uc{constructor(){super("twitter.com")}static credential(e,n){return fa._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(s,e){return cc(s,"POST","/v1/accounts:signUp",Ir(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,l=!1){const c=await vi._fromIdTokenResponse(e,r,l),d=xv(r);return new ma({user:c,providerId:d,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const l=xv(r);return new ma({user:e,providerId:l,_tokenResponse:r,operationType:n})}}function xv(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends Xi{constructor(e,n,r,l){super(n.code,n.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,l){return new rh(e,n,r,l)}}function gb(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(s,c,e,r):c})}async function CS(s,e,n=!1){const r=await Zl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ma._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(s,e,n=!1){const{auth:r}=s;if(Un(r.app))return Promise.reject(xs(r));const l="reauthenticate";try{const c=await Zl(s,gb(r,l,e,s),n);Ae(c.idToken,r,"internal-error");const d=Um(c.idToken);Ae(d,r,"internal-error");const{sub:p}=d;return Ae(s.uid===p,r,"user-mismatch"),ma._forOperation(s,l,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&_i(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pb(s,e,n=!1){if(Un(s.app))return Promise.reject(xs(s));const r="signIn",l=await gb(s,r,e),c=await ma._fromIdTokenResponse(s,r,l);return n||await s._updateCurrentUser(c.user),c}async function NS(s,e){return pb(va(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yb(s){const e=va(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RS(s,e,n){if(Un(s.app))return Promise.reject(xs(s));const r=va(s),d=await hm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AS).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&yb(s),y}),p=await ma._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(p.user),p}function kS(s,e,n){return Un(s.app)?Promise.reject(xs(s)):NS(Ht(s),Io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yb(s),r})}function OS(s,e,n,r){return Ht(s).onIdTokenChanged(e,n,r)}function DS(s,e,n){return Ht(s).beforeAuthStateChanged(e,n)}function MS(s,e,n,r){return Ht(s).onAuthStateChanged(e,n,r)}function jS(s){return Ht(s).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1e3,LS=10;class _b extends vb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),l=this.localCache[n];r!==l&&e(n,l,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const r=e.key;n?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!n&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);eS()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,LS):l()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}_b.type="LOCAL";const PS=_b;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb extends vb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bb.type="SESSION";const xb=bb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(l=>l.isListeningto(e));if(n)return n;const r=new Ah(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:l,data:c}=n.data,d=this.handlersMap[l];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(d).map(async v=>v(n.origin,c)),y=await US(p);n.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ah.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,y)=>{const v=Hm("",20);l.port1.start();const x=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(w){const k=w;if(k.data.eventId===v)switch(k.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(k.data.response);break;default:clearTimeout(x),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bi(){return window}function BS(s){Bi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(){return typeof Bi().WorkerGlobalScope<"u"&&typeof Bi().importScripts=="function"}async function qS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HS(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function FS(){return Eb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="firebaseLocalStorageDb",GS=1,oh="firebaseLocalStorage",Sb="fbase_key";class hc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(s,e){return s.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function KS(){const s=indexedDB.deleteDatabase(Tb);return new hc(s).toPromise()}function dm(){const s=indexedDB.open(Tb,GS);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(oh,{keyPath:Sb})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(oh)?e(r):(r.close(),await KS(),e(await dm()))})})}async function Ev(s,e,n){const r=Ch(s,!0).put({[Sb]:e,value:n});return new hc(r).toPromise()}async function QS(s,e){const n=Ch(s,!1).get(e),r=await new hc(n).toPromise();return r===void 0?null:r.value}function Tv(s,e){const n=Ch(s,!0).delete(e);return new hc(n).toPromise()}const YS=800,XS=3;class wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Eb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ah._getInstance(FS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await qS(),!this.activeServiceWorker)return;this.sender=new zS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dm();return await Ev(e,ah,"1"),await Tv(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ev(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=Ch(l,!1).getAll();return new hc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wb.type="LOCAL";const $S=wb;new lc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(s,e){return e?_s(e):(Ae(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm extends Bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function JS(s){return pb(s.auth,new Fm(s),s.bypassAuthState)}function WS(s){const{auth:e,user:n}=s;return Ae(n,e,"internal-error"),IS(n,new Fm(s),s.bypassAuthState)}async function ew(s){const{auth:e,user:n}=s;return Ae(n,e,"internal-error"),CS(n,new Fm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,n,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JS;case"linkViaPopup":case"linkViaRedirect":return ew;case"reauthViaPopup":case"reauthViaRedirect":return WS;default:_i(this.auth,"internal-error")}}resolve(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ts(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=new lc(2e3,1e4);class go extends Ab{constructor(e,n,r,l,c){super(e,n,l,c),this.provider=r,this.authWindow=null,this.pollId=null,go.currentPopupAction&&go.currentPopupAction.cancel(),go.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Ts(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,go.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tw.get())};e()}}go.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="pendingRedirect",Ku=new Map;class iw extends Ab{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ku.get(this.auth._key());if(!e){try{const r=await sw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ku.set(this.auth._key(),e)}return this.bypassAuthState||Ku.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sw(s,e){const n=ow(e),r=aw(s);if(!await r._isAvailable())return!1;const l=await r._get(n)==="true";return await r._remove(n),l}function rw(s,e){Ku.set(s._key(),e)}function aw(s){return _s(s._redirectPersistence)}function ow(s){return Gu(nw,s.config.apiKey,s.name)}async function lw(s,e,n=!1){if(Un(s.app))return Promise.reject(xs(s));const r=va(s),l=ZS(r,e),d=await new iw(r,l,n).execute();return d&&!n&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=600*1e3;class uw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Cb(e)){const l=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(zi(this.auth,l))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cw&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sv(e))}saveEventToCache(e){this.cachedEventUids.add(Sv(e)),this.lastProcessedEventTime=Date.now()}}function Sv(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Cb({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(s,e={}){return Nr(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mw=/^https?/;async function gw(s){if(s.config.emulator)return;const{authorizedDomains:e}=await dw(s);for(const n of e)try{if(pw(n))return}catch{}_i(s,"unauthorized-domain")}function pw(s){const e=cm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===r}if(!mw.test(n))return!1;if(fw.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=new lc(3e4,6e4);function wv(){const s=Bi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function vw(s){return new Promise((e,n)=>{var l,c,d;function r(){wv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wv(),n(zi(s,"network-request-failed"))},timeout:yw.get()})}if((c=(l=Bi().gapi)==null?void 0:l.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((d=Bi().gapi)!=null&&d.load)r();else{const p=cS("iframefcb");return Bi()[p]=()=>{gapi.load?r():n(zi(s,"network-request-failed"))},hb(`${lS()}?onload=${p}`).catch(y=>n(y))}}).catch(e=>{throw Qu=null,e})}let Qu=null;function _w(s){return Qu=Qu||vw(s),Qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=new lc(5e3,15e3),xw="__/auth/iframe",Ew="emulator/auth/iframe",Tw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ww(s){const e=s.config;Ae(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Pm(e,Ew):`https://${s.config.authDomain}/${xw}`,r={apiKey:e.apiKey,appName:s.name,v:Co},l=Sw.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${n}?${oc(r).slice(1)}`}async function Aw(s){const e=await _w(s),n=Bi().gapi;return Ae(n,s,"internal-error"),e.open({where:document.body,url:ww(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tw,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const d=zi(s,"network-request-failed"),p=Bi().setTimeout(()=>{c(d)},bw.get());function y(){Bi().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Iw=500,Nw=600,Rw="_blank",kw="http://localhost";class Av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ow(s,e,n,r=Iw,l=Nw){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...Cw,width:r.toString(),height:l.toString(),top:c,left:d},v=cn().toLowerCase();n&&(p=sb(v)?Rw:n),nb(v)&&(e=e||kw,y.scrollbars="yes");const x=Object.entries(y).reduce((k,[L,Q])=>`${k}${L}=${Q},`,"");if(W2(v)&&p!=="_self")return Dw(e||"",p),new Av(null);const w=window.open(e||"",p,x);Ae(w,s,"popup-blocked");try{w.focus()}catch{}return new Av(w)}function Dw(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="__/auth/handler",jw="emulator/auth/handler",Vw=encodeURIComponent("fac");async function Cv(s,e,n,r,l,c){Ae(s.config.authDomain,s,"auth-domain-config-required"),Ae(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:Co,eventId:l};if(e instanceof mb){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",xT(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,w]of Object.entries({}))d[x]=w}if(e instanceof uc){const x=e.getScopes().filter(w=>w!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const x of Object.keys(p))p[x]===void 0&&delete p[x];const y=await s._getAppCheckToken(),v=y?`#${Vw}=${encodeURIComponent(y)}`:"";return`${Lw(s)}?${oc(p).slice(1)}${v}`}function Lw({config:s}){return s.emulator?Pm(s,jw):`https://${s.authDomain}/${Mw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="webStorageSupport";class Pw{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xb,this._completeRedirectFn=lw,this._overrideRedirectResult=rw}async _openPopup(e,n,r,l){var d;Ts((d=this.eventManagers[e._key()])==null?void 0:d.manager,"_initialize() not called before _openPopup()");const c=await Cv(e,n,r,cm(),l);return Ow(e,c,Hm())}async _openRedirect(e,n,r,l){await this._originValidation(e);const c=await Cv(e,n,r,cm(),l);return BS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:l,promise:c}=this.eventManagers[n];return l?Promise.resolve(l):(Ts(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Aw(e),r=new uw(e);return n.register("authEvent",l=>(Ae(l==null?void 0:l.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zf,{type:Zf},l=>{var d;const c=(d=l==null?void 0:l[0])==null?void 0:d[Zf];c!==void 0&&n(!!c),_i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=gw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cb()||ib()||zm()}}const Uw=Pw;var Iv="@firebase/auth",Nv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qw(s){da(new br("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Ae(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ub(s)},v=new rS(r,l,c,y);return gS(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),da(new br("auth-internal",e=>{const n=va(e.getProvider("auth").getImmediate());return(r=>new zw(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bs(Iv,Nv,Bw(s)),bs(Iv,Nv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=300,Fw=q_("authIdTokenMaxAge")||Hw;let Rv=null;const Gw=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Fw)return;const l=n==null?void 0:n.token;Rv!==l&&(Rv=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function Kw(s=Vm()){const e=Sh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=mS(s,{popupRedirectResolver:Uw,persistence:[$S,PS,xb]}),r=q_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=Gw(c.toString());DS(n,d,()=>d(n.currentUser)),OS(n,p=>d(p))}}const l=U_("auth");return l&&pS(n,`http://${l}`),n}function Qw(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}aS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=zi("internal-error");c.customData=l,n(c)},r.type="text/javascript",r.charset="UTF-8",Qw().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qw("Browser");var kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,Ib;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function A(){}A.prototype=S.prototype,C.F=S.prototype,C.prototype=new A,C.prototype.constructor=C,C.D=function(I,N,j){for(var O=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)O[Ue-2]=arguments[Ue];return S.prototype[N].apply(I,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(C,S,A){A||(A=0);const I=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)I[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;N<16;++N)I[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=C.g[0],A=C.g[1],N=C.g[2];let j=C.g[3],O;O=S+(j^A&(N^j))+I[0]+3614090360&4294967295,S=A+(O<<7&4294967295|O>>>25),O=j+(N^S&(A^N))+I[1]+3905402710&4294967295,j=S+(O<<12&4294967295|O>>>20),O=N+(A^j&(S^A))+I[2]+606105819&4294967295,N=j+(O<<17&4294967295|O>>>15),O=A+(S^N&(j^S))+I[3]+3250441966&4294967295,A=N+(O<<22&4294967295|O>>>10),O=S+(j^A&(N^j))+I[4]+4118548399&4294967295,S=A+(O<<7&4294967295|O>>>25),O=j+(N^S&(A^N))+I[5]+1200080426&4294967295,j=S+(O<<12&4294967295|O>>>20),O=N+(A^j&(S^A))+I[6]+2821735955&4294967295,N=j+(O<<17&4294967295|O>>>15),O=A+(S^N&(j^S))+I[7]+4249261313&4294967295,A=N+(O<<22&4294967295|O>>>10),O=S+(j^A&(N^j))+I[8]+1770035416&4294967295,S=A+(O<<7&4294967295|O>>>25),O=j+(N^S&(A^N))+I[9]+2336552879&4294967295,j=S+(O<<12&4294967295|O>>>20),O=N+(A^j&(S^A))+I[10]+4294925233&4294967295,N=j+(O<<17&4294967295|O>>>15),O=A+(S^N&(j^S))+I[11]+2304563134&4294967295,A=N+(O<<22&4294967295|O>>>10),O=S+(j^A&(N^j))+I[12]+1804603682&4294967295,S=A+(O<<7&4294967295|O>>>25),O=j+(N^S&(A^N))+I[13]+4254626195&4294967295,j=S+(O<<12&4294967295|O>>>20),O=N+(A^j&(S^A))+I[14]+2792965006&4294967295,N=j+(O<<17&4294967295|O>>>15),O=A+(S^N&(j^S))+I[15]+1236535329&4294967295,A=N+(O<<22&4294967295|O>>>10),O=S+(N^j&(A^N))+I[1]+4129170786&4294967295,S=A+(O<<5&4294967295|O>>>27),O=j+(A^N&(S^A))+I[6]+3225465664&4294967295,j=S+(O<<9&4294967295|O>>>23),O=N+(S^A&(j^S))+I[11]+643717713&4294967295,N=j+(O<<14&4294967295|O>>>18),O=A+(j^S&(N^j))+I[0]+3921069994&4294967295,A=N+(O<<20&4294967295|O>>>12),O=S+(N^j&(A^N))+I[5]+3593408605&4294967295,S=A+(O<<5&4294967295|O>>>27),O=j+(A^N&(S^A))+I[10]+38016083&4294967295,j=S+(O<<9&4294967295|O>>>23),O=N+(S^A&(j^S))+I[15]+3634488961&4294967295,N=j+(O<<14&4294967295|O>>>18),O=A+(j^S&(N^j))+I[4]+3889429448&4294967295,A=N+(O<<20&4294967295|O>>>12),O=S+(N^j&(A^N))+I[9]+568446438&4294967295,S=A+(O<<5&4294967295|O>>>27),O=j+(A^N&(S^A))+I[14]+3275163606&4294967295,j=S+(O<<9&4294967295|O>>>23),O=N+(S^A&(j^S))+I[3]+4107603335&4294967295,N=j+(O<<14&4294967295|O>>>18),O=A+(j^S&(N^j))+I[8]+1163531501&4294967295,A=N+(O<<20&4294967295|O>>>12),O=S+(N^j&(A^N))+I[13]+2850285829&4294967295,S=A+(O<<5&4294967295|O>>>27),O=j+(A^N&(S^A))+I[2]+4243563512&4294967295,j=S+(O<<9&4294967295|O>>>23),O=N+(S^A&(j^S))+I[7]+1735328473&4294967295,N=j+(O<<14&4294967295|O>>>18),O=A+(j^S&(N^j))+I[12]+2368359562&4294967295,A=N+(O<<20&4294967295|O>>>12),O=S+(A^N^j)+I[5]+4294588738&4294967295,S=A+(O<<4&4294967295|O>>>28),O=j+(S^A^N)+I[8]+2272392833&4294967295,j=S+(O<<11&4294967295|O>>>21),O=N+(j^S^A)+I[11]+1839030562&4294967295,N=j+(O<<16&4294967295|O>>>16),O=A+(N^j^S)+I[14]+4259657740&4294967295,A=N+(O<<23&4294967295|O>>>9),O=S+(A^N^j)+I[1]+2763975236&4294967295,S=A+(O<<4&4294967295|O>>>28),O=j+(S^A^N)+I[4]+1272893353&4294967295,j=S+(O<<11&4294967295|O>>>21),O=N+(j^S^A)+I[7]+4139469664&4294967295,N=j+(O<<16&4294967295|O>>>16),O=A+(N^j^S)+I[10]+3200236656&4294967295,A=N+(O<<23&4294967295|O>>>9),O=S+(A^N^j)+I[13]+681279174&4294967295,S=A+(O<<4&4294967295|O>>>28),O=j+(S^A^N)+I[0]+3936430074&4294967295,j=S+(O<<11&4294967295|O>>>21),O=N+(j^S^A)+I[3]+3572445317&4294967295,N=j+(O<<16&4294967295|O>>>16),O=A+(N^j^S)+I[6]+76029189&4294967295,A=N+(O<<23&4294967295|O>>>9),O=S+(A^N^j)+I[9]+3654602809&4294967295,S=A+(O<<4&4294967295|O>>>28),O=j+(S^A^N)+I[12]+3873151461&4294967295,j=S+(O<<11&4294967295|O>>>21),O=N+(j^S^A)+I[15]+530742520&4294967295,N=j+(O<<16&4294967295|O>>>16),O=A+(N^j^S)+I[2]+3299628645&4294967295,A=N+(O<<23&4294967295|O>>>9),O=S+(N^(A|~j))+I[0]+4096336452&4294967295,S=A+(O<<6&4294967295|O>>>26),O=j+(A^(S|~N))+I[7]+1126891415&4294967295,j=S+(O<<10&4294967295|O>>>22),O=N+(S^(j|~A))+I[14]+2878612391&4294967295,N=j+(O<<15&4294967295|O>>>17),O=A+(j^(N|~S))+I[5]+4237533241&4294967295,A=N+(O<<21&4294967295|O>>>11),O=S+(N^(A|~j))+I[12]+1700485571&4294967295,S=A+(O<<6&4294967295|O>>>26),O=j+(A^(S|~N))+I[3]+2399980690&4294967295,j=S+(O<<10&4294967295|O>>>22),O=N+(S^(j|~A))+I[10]+4293915773&4294967295,N=j+(O<<15&4294967295|O>>>17),O=A+(j^(N|~S))+I[1]+2240044497&4294967295,A=N+(O<<21&4294967295|O>>>11),O=S+(N^(A|~j))+I[8]+1873313359&4294967295,S=A+(O<<6&4294967295|O>>>26),O=j+(A^(S|~N))+I[15]+4264355552&4294967295,j=S+(O<<10&4294967295|O>>>22),O=N+(S^(j|~A))+I[6]+2734768916&4294967295,N=j+(O<<15&4294967295|O>>>17),O=A+(j^(N|~S))+I[13]+1309151649&4294967295,A=N+(O<<21&4294967295|O>>>11),O=S+(N^(A|~j))+I[4]+4149444226&4294967295,S=A+(O<<6&4294967295|O>>>26),O=j+(A^(S|~N))+I[11]+3174756917&4294967295,j=S+(O<<10&4294967295|O>>>22),O=N+(S^(j|~A))+I[2]+718787259&4294967295,N=j+(O<<15&4294967295|O>>>17),O=A+(j^(N|~S))+I[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.v=function(C,S){S===void 0&&(S=C.length);const A=S-this.blockSize,I=this.C;let N=this.h,j=0;for(;j<S;){if(N==0)for(;j<=A;)l(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<S;)if(I[N++]=C.charCodeAt(j++),N==this.blockSize){l(this,I),N=0;break}}else for(;j<S;)if(I[N++]=C[j++],N==this.blockSize){l(this,I),N=0;break}}this.h=N,this.o+=S},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;S=this.o*8;for(var A=C.length-8;A<C.length;++A)C[A]=S&255,S/=256;for(this.v(C),C=Array(16),S=0,A=0;A<4;++A)for(let I=0;I<32;I+=8)C[S++]=this.g[A]>>>I&255;return C};function c(C,S){var A=p;return Object.prototype.hasOwnProperty.call(A,C)?A[C]:A[C]=S(C)}function d(C,S){this.h=S;const A=[];let I=!0;for(let N=C.length-1;N>=0;N--){const j=C[N]|0;I&&j==S||(A[N]=j,I=!1)}this.g=A}var p={};function y(C){return-128<=C&&C<128?c(C,function(S){return new d([S|0],S<0?-1:0)}):new d([C|0],C<0?-1:0)}function v(C){if(isNaN(C)||!isFinite(C))return w;if(C<0)return W(v(-C));const S=[];let A=1;for(let I=0;C>=A;I++)S[I]=C/A|0,A*=4294967296;return new d(S,0)}function x(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return W(x(C.substring(1),S));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=v(Math.pow(S,8));let I=w;for(let j=0;j<C.length;j+=8){var N=Math.min(8,C.length-j);const O=parseInt(C.substring(j,j+N),S);N<8?(N=v(Math.pow(S,N)),I=I.j(N).add(v(O))):(I=I.j(A),I=I.add(v(O)))}return I}var w=y(0),k=y(1),L=y(16777216);s=d.prototype,s.m=function(){if(ie(this))return-W(this).m();let C=0,S=1;for(let A=0;A<this.g.length;A++){const I=this.i(A);C+=(I>=0?I:4294967296+I)*S,S*=4294967296}return C},s.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(Q(this))return"0";if(ie(this))return"-"+W(this).toString(C);const S=v(Math.pow(C,6));var A=this;let I="";for(;;){const N=ce(A,S).g;A=de(A,N.j(S));let j=((A.g.length>0?A.g[0]:A.h)>>>0).toString(C);if(A=N,Q(A))return j+I;for(;j.length<6;)j="0"+j;I=j+I}},s.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function Q(C){if(C.h!=0)return!1;for(let S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function ie(C){return C.h==-1}s.l=function(C){return C=de(this,C),ie(C)?-1:Q(C)?0:1};function W(C){const S=C.g.length,A=[];for(let I=0;I<S;I++)A[I]=~C.g[I];return new d(A,~C.h).add(k)}s.abs=function(){return ie(this)?W(this):this},s.add=function(C){const S=Math.max(this.g.length,C.g.length),A=[];let I=0;for(let N=0;N<=S;N++){let j=I+(this.i(N)&65535)+(C.i(N)&65535),O=(j>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);I=O>>>16,j&=65535,O&=65535,A[N]=O<<16|j}return new d(A,A[A.length-1]&-2147483648?-1:0)};function de(C,S){return C.add(W(S))}s.j=function(C){if(Q(this)||Q(C))return w;if(ie(this))return ie(C)?W(this).j(W(C)):W(W(this).j(C));if(ie(C))return W(this.j(W(C)));if(this.l(L)<0&&C.l(L)<0)return v(this.m()*C.m());const S=this.g.length+C.g.length,A=[];for(var I=0;I<2*S;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<C.g.length;N++){const j=this.i(I)>>>16,O=this.i(I)&65535,Ue=C.i(N)>>>16,Xe=C.i(N)&65535;A[2*I+2*N]+=O*Xe,pe(A,2*I+2*N),A[2*I+2*N+1]+=j*Xe,pe(A,2*I+2*N+1),A[2*I+2*N+1]+=O*Ue,pe(A,2*I+2*N+1),A[2*I+2*N+2]+=j*Ue,pe(A,2*I+2*N+2)}for(C=0;C<S;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=S;C<2*S;C++)A[C]=0;return new d(A,0)};function pe(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function ae(C,S){this.g=C,this.h=S}function ce(C,S){if(Q(S))throw Error("division by zero");if(Q(C))return new ae(w,w);if(ie(C))return S=ce(W(C),S),new ae(W(S.g),W(S.h));if(ie(S))return S=ce(C,W(S)),new ae(W(S.g),S.h);if(C.g.length>30){if(ie(C)||ie(S))throw Error("slowDivide_ only works with positive integers.");for(var A=k,I=S;I.l(C)<=0;)A=te(A),I=te(I);var N=oe(A,1),j=oe(I,1);for(I=oe(I,2),A=oe(A,2);!Q(I);){var O=j.add(I);O.l(C)<=0&&(N=N.add(A),j=O),I=oe(I,1),A=oe(A,1)}return S=de(C,N.j(S)),new ae(N,S)}for(N=w;C.l(S)>=0;){for(A=Math.max(1,Math.floor(C.m()/S.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),j=v(A),O=j.j(S);ie(O)||O.l(C)>0;)A-=I,j=v(A),O=j.j(S);Q(j)&&(j=k),N=N.add(j),C=de(C,O)}return new ae(N,C)}s.B=function(C){return ce(this,C).h},s.and=function(C){const S=Math.max(this.g.length,C.g.length),A=[];for(let I=0;I<S;I++)A[I]=this.i(I)&C.i(I);return new d(A,this.h&C.h)},s.or=function(C){const S=Math.max(this.g.length,C.g.length),A=[];for(let I=0;I<S;I++)A[I]=this.i(I)|C.i(I);return new d(A,this.h|C.h)},s.xor=function(C){const S=Math.max(this.g.length,C.g.length),A=[];for(let I=0;I<S;I++)A[I]=this.i(I)^C.i(I);return new d(A,this.h^C.h)};function te(C){const S=C.g.length+1,A=[];for(let I=0;I<S;I++)A[I]=C.i(I)<<1|C.i(I-1)>>>31;return new d(A,C.h)}function oe(C,S){const A=S>>5;S%=32;const I=C.g.length-A,N=[];for(let j=0;j<I;j++)N[j]=S>0?C.i(j+A)>>>S|C.i(j+A+1)<<32-S:C.i(j+A);return new d(N,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ib=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=x,vr=d}).apply(typeof kv<"u"?kv:typeof self<"u"?self:typeof window<"u"?window:{});var Uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nb,Vl,Rb,Yu,fm,kb,Ob,Db;(function(){var s,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uu=="object"&&Uu];for(var g=0;g<u.length;++g){var b=u[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function l(u,g){if(g)e:{var b=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var P=u[T];if(!(P in b))break e;b=b[P]}u=u[u.length-1],T=b[u],g=g(T),g!=T&&g!=null&&e(b,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var b=[],T;for(T in g)Object.prototype.hasOwnProperty.call(g,T)&&b.push([T,g[T]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function y(u,g,b){return u.call.apply(u.bind,arguments)}function v(u,g,b){return v=y,v.apply(null,arguments)}function x(u,g){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function w(u,g){function b(){}b.prototype=g.prototype,u.Z=g.prototype,u.prototype=new b,u.prototype.constructor=u,u.Ob=function(T,P,F){for(var he=Array(arguments.length-2),De=2;De<arguments.length;De++)he[De-2]=arguments[De];return g.prototype[P].apply(T,he)}}var k=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const g=u.length;if(g>0){const b=Array(g);for(let T=0;T<g;T++)b[T]=u[T];return b}return[]}function Q(u,g){for(let T=1;T<arguments.length;T++){const P=arguments[T];var b=typeof P;if(b=b!="object"?b:P?Array.isArray(P)?"array":b:"null",b=="array"||b=="object"&&typeof P.length=="number"){b=u.length||0;const F=P.length||0;u.length=b+F;for(let he=0;he<F;he++)u[b+he]=P[he]}else u.push(P)}}class ie{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function W(u){d.setTimeout(()=>{throw u},0)}function de(){var u=C;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class pe{constructor(){this.h=this.g=null}add(g,b){const T=ae.get();T.set(g,b),this.h?this.h.next=T:this.g=T,this.h=T}}var ae=new ie(()=>new ce,u=>u.reset());class ce{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let te,oe=!1,C=new pe,S=()=>{const u=Promise.resolve(void 0);te=()=>{u.then(A)}};function A(){for(var u;u=de();){try{u.h.call(u.g)}catch(b){W(b)}var g=ae;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}oe=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var j=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const b=()=>{};d.addEventListener("test",b,g),d.removeEventListener("test",b,g)}catch{}return u})();function O(u){return/^[\s\xa0]*$/.test(u)}function Ue(u,g){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}w(Ue,N),Ue.prototype.init=function(u,g){const b=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(b=="mouseover"?g=u.fromElement:b=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Xe="closure_listenable_"+(Math.random()*1e6|0),K=0;function le(u,g,b,T,P){this.listener=u,this.proxy=null,this.src=g,this.type=b,this.capture=!!T,this.ha=P,this.key=++K,this.da=this.fa=!1}function ye(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function X(u,g,b){for(const T in u)g.call(b,u[T],T,u)}function ue(u,g){for(const b in u)g.call(void 0,u[b],b,u)}function R(u){const g={};for(const b in u)g[b]=u[b];return g}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(u,g){let b,T;for(let P=1;P<arguments.length;P++){T=arguments[P];for(b in T)u[b]=T[b];for(let F=0;F<H.length;F++)b=H[F],Object.prototype.hasOwnProperty.call(T,b)&&(u[b]=T[b])}}function J(u){this.src=u,this.g={},this.h=0}J.prototype.add=function(u,g,b,T,P){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const he=me(u,g,T,P);return he>-1?(g=u[he],b||(g.fa=!1)):(g=new le(g,this.src,F,!!T,P),g.fa=b,u.push(g)),g};function fe(u,g){const b=g.type;if(b in u.g){var T=u.g[b],P=Array.prototype.indexOf.call(T,g,void 0),F;(F=P>=0)&&Array.prototype.splice.call(T,P,1),F&&(ye(g),u.g[b].length==0&&(delete u.g[b],u.h--))}}function me(u,g,b,T){for(let P=0;P<u.length;++P){const F=u[P];if(!F.da&&F.listener==g&&F.capture==!!b&&F.ha==T)return P}return-1}var Ie="closure_lm_"+(Math.random()*1e6|0),Ve={};function Ge(u,g,b,T,P){if(Array.isArray(g)){for(let F=0;F<g.length;F++)Ge(u,g[F],b,T,P);return null}return b=$i(b),u&&u[Xe]?u.J(g,b,p(T)?!!T.capture:!1,P):fn(u,g,b,!1,T,P)}function fn(u,g,b,T,P,F){if(!g)throw Error("Invalid event type");const he=p(P)?!!P.capture:!!P;let De=Hn(u);if(De||(u[Ie]=De=new J(u)),b=De.add(g,b,T,he,F),b.proxy)return b;if(T=un(),b.proxy=T,T.src=u,T.listener=b,u.addEventListener)j||(P=he),P===void 0&&(P=!1),u.addEventListener(g.toString(),T,P);else if(u.attachEvent)u.attachEvent(gn(g.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function un(){function u(b){return g.call(u.src,u.listener,b)}const g=As;return u}function mn(u,g,b,T,P){if(Array.isArray(g))for(var F=0;F<g.length;F++)mn(u,g[F],b,T,P);else T=p(T)?!!T.capture:!!T,b=$i(b),u&&u[Xe]?(u=u.i,F=String(g).toString(),F in u.g&&(g=u.g[F],b=me(g,b,T,P),b>-1&&(ye(g[b]),Array.prototype.splice.call(g,b,1),g.length==0&&(delete u.g[F],u.h--)))):u&&(u=Hn(u))&&(g=u.g[g.toString()],u=-1,g&&(u=me(g,b,T,P)),(b=u>-1?g[u]:null)&&oi(b))}function oi(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Xe])fe(g.i,u);else{var b=u.type,T=u.proxy;g.removeEventListener?g.removeEventListener(b,T,u.capture):g.detachEvent?g.detachEvent(gn(b),T):g.addListener&&g.removeListener&&g.removeListener(T),(b=Hn(g))?(fe(b,u),b.h==0&&(b.src=null,g[Ie]=null)):ye(u)}}}function gn(u){return u in Ve?Ve[u]:Ve[u]="on"+u}function As(u,g){if(u.da)u=!0;else{g=new Ue(g,this);const b=u.listener,T=u.ha||u.src;u.fa&&oi(u),u=b.call(T,g)}return u}function Hn(u){return u=u[Ie],u instanceof J?u:null}var Or="__closure_events_fn_"+(Math.random()*1e9>>>0);function $i(u){return typeof u=="function"?u:(u[Or]||(u[Or]=function(g){return u.handleEvent(g)}),u[Or])}function ut(){I.call(this),this.i=new J(this),this.M=this,this.G=null}w(ut,I),ut.prototype[Xe]=!0,ut.prototype.removeEventListener=function(u,g,b,T){mn(this,u,g,b,T)};function Et(u,g){var b,T=u.G;if(T)for(b=[];T;T=T.G)b.push(T);if(u=u.M,T=g.type||g,typeof g=="string")g=new N(g,u);else if(g instanceof N)g.target=g.target||u;else{var P=g;g=new N(T,u),B(g,P)}P=!0;let F,he;if(b)for(he=b.length-1;he>=0;he--)F=g.g=b[he],P=Cn(F,T,!0,g)&&P;if(F=g.g=u,P=Cn(F,T,!0,g)&&P,P=Cn(F,T,!1,g)&&P,b)for(he=0;he<b.length;he++)F=g.g=b[he],P=Cn(F,T,!1,g)&&P}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const b=u.g[g];for(let T=0;T<b.length;T++)ye(b[T]);delete u.g[g],u.h--}}this.G=null},ut.prototype.J=function(u,g,b,T){return this.i.add(String(u),g,!1,b,T)},ut.prototype.K=function(u,g,b,T){return this.i.add(String(u),g,!0,b,T)};function Cn(u,g,b,T){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let P=!0;for(let F=0;F<g.length;++F){const he=g[F];if(he&&!he.da&&he.capture==b){const De=he.listener,At=he.ha||he.src;he.fa&&fe(u.i,he),P=De.call(At,T)!==!1&&P}}return P&&!T.defaultPrevented}function Dr(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:d.setTimeout(u,g||0)}function Cs(u){u.g=Dr(()=>{u.g=null,u.i&&(u.i=!1,Cs(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class Pt extends I{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Cs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(u){I.call(this),this.h=u,this.g={}}w(bi,I);var xi=[];function Is(u){X(u.g,function(g,b){this.g.hasOwnProperty(b)&&oi(g)},u),u.g={}}bi.prototype.N=function(){bi.Z.N.call(this),Is(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var li=d.JSON.stringify,Mr=d.JSON.parse,Ns=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function ci(){}function xa(){}var In={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gt(){N.call(this,"d")}w(gt,N);function Qt(){N.call(this,"c")}w(Qt,N);var lt={},Ea=null;function Rs(){return Ea=Ea||new ut}lt.Ia="serverreachability";function Ta(u){N.call(this,lt.Ia,u)}w(Ta,N);function Fn(u){const g=Rs();Et(g,new Ta(g))}lt.STAT_EVENT="statevent";function Zi(u,g){N.call(this,lt.STAT_EVENT,u),this.stat=g}w(Zi,N);function _t(u){const g=Rs();Et(g,new Zi(g,u))}lt.Ja="timingevent";function Gn(u,g){N.call(this,lt.Ja,u),this.size=g}w(Gn,N);function Nn(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},g)}function nn(){this.g=!0}nn.prototype.ua=function(){this.g=!1};function Do(u,g,b,T,P,F){u.info(function(){if(u.g)if(F){var he="",De=F.split("&");for(let Je=0;Je<De.length;Je++){var At=De[Je].split("=");if(At.length>1){const pt=At[0];At=At[1];const Zn=pt.split("_");he=Zn.length>=2&&Zn[1]=="type"?he+(pt+"="+At+"&"):he+(pt+"=redacted&")}}}else he=null;else he=F;return"XMLHTTP REQ ("+T+") [attempt "+P+"]: "+g+`
`+b+`
`+he})}function jr(u,g,b,T,P,F,he){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+P+"]: "+g+`
`+b+`
`+F+" "+he})}function Kn(u,g,b,T){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+Mo(u,b)+(T?" "+T:"")})}function Ji(u,g){u.info(function(){return"TIMEOUT: "+g})}nn.prototype.info=function(){};function Mo(u,g){if(!u.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var b=F[u];if(!(b.length<2)){var T=b[1];if(Array.isArray(T)&&!(T.length<1)){var P=T[0];if(P!="noop"&&P!="stop"&&P!="close")for(let he=1;he<T.length;he++)T[he]=""}}}}return li(F)}catch{return g}}var Ei={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Vr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ks;function Wi(){}w(Wi,ci),Wi.prototype.g=function(){return new XMLHttpRequest},ks=new Wi;function sn(u){return encodeURIComponent(String(u))}function Y(u){var g=1;u=u.split(":");const b=[];for(;g>0&&u.length;)b.push(u.shift()),g--;return u.length&&b.push(u.join(":")),b}function Re(u,g,b,T){this.j=u,this.i=g,this.l=b,this.S=T||1,this.V=new bi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var Ke={},Tt={};function Qn(u,g,b){u.M=1,u.A=Lr(kt(g)),u.u=b,u.R=!0,Sa(u,null)}function Sa(u,g){u.F=Date.now(),Ti(u),u.B=kt(u.A);var b=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Ia(b.i,"t",T),u.C=0,b=u.j.L,u.h=new ht,u.g=kc(u.j,b?g:null,!u.u),u.P>0&&(u.O=new Pt(v(u.Y,u,u.g),u.P)),g=u.V,b=u.g,T=u.ba;var P="readystatechange";Array.isArray(P)||(P&&(xi[0]=P.toString()),P=xi);for(let F=0;F<P.length;F++){const he=Ge(b,P[F],T||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=u.J?R(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Fn(),Do(u.i,u.v,u.B,u.l,u.S,u.u)}Re.prototype.ba=function(u){u=u.target;const g=this.O;g&&di(u)==3?g.j():this.Y(u)},Re.prototype.Y=function(u){try{if(u==this.g)e:{const De=di(this.g),At=this.g.ya(),Je=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||De!=4||At==7||(At==8||Je<=0?Fn(3):Fn(2)),Si(this);var g=this.g.ca();this.X=g;var b=Fh(this);if(this.o=g==200,jr(this.i,this.v,this.B,this.l,this.S,De,g),this.o){if(this.U&&!this.L){t:{if(this.g){var T,P=this.g;if((T=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(T)){var F=T;break t}}F=null}if(u=F)Kn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wi(this,u);else{this.o=!1,this.m=3,_t(12),Rn(this),Yn(this);break e}}if(this.R){u=!0;let pt;for(;!this.K&&this.C<b.length;)if(pt=vc(this,b),pt==Tt){De==4&&(this.m=4,_t(14),u=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Ke){this.m=4,_t(15),Kn(this.i,this.l,b,"[Invalid Chunk]"),u=!1;break}else Kn(this.i,this.l,pt,null),wi(this,pt);if(yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||b.length!=0||this.h.h||(this.m=1,_t(16),u=!1),this.o=this.o&&u,!u)Kn(this.i,this.l,b,"[Invalid Chunked Response]"),Rn(this),Yn(this);else if(b.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Xo(he),he.P=!0,_t(11))}}else Kn(this.i,this.l,b,null),wi(this,b);De==4&&Rn(this),this.o&&!this.K&&(De==4?Cc(this.j,this):(this.o=!1,Ti(this)))}else ts(this.g),g==400&&b.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),Rn(this),Yn(this)}}}catch{}finally{}};function Fh(u){if(!yc(u))return u.g.la();const g=Yt(u.g);if(g==="")return"";let b="";const T=g.length,P=di(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Rn(u),Yn(u),"";u.h.i=new d.TextDecoder}for(let F=0;F<T;F++)u.h.h=!0,b+=u.h.i.decode(g[F],{stream:!(P&&F==T-1)});return g.length=0,u.h.g+=b,u.C=0,u.h.g}function yc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function vc(u,g){var b=u.C,T=g.indexOf(`
`,b);return T==-1?Tt:(b=Number(g.substring(b,T)),isNaN(b)?Ke:(T+=1,T+b>g.length?Tt:(g=g.slice(T,T+b),u.C=T+b,g)))}Re.prototype.cancel=function(){this.K=!0,Rn(this)};function Ti(u){u.T=Date.now()+u.H,wa(u,u.H)}function wa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Nn(v(u.aa,u),g)}function Si(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Re.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ji(this.i,this.B),this.M!=2&&(Fn(),_t(17)),Rn(this),this.m=2,Yn(this)):wa(this,this.T-u)};function Yn(u){u.j.I==0||u.K||Cc(u.j,u)}function Rn(u){Si(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Is(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function wi(u,g){try{var b=u.j;if(b.I!=0&&(b.g==u||Ci(b.h,u))){if(!u.L&&Ci(b.h,u)&&b.I==3){try{var T=b.Ba.g.parse(g)}catch{T=null}if(Array.isArray(T)&&T.length==3){var P=T;if(P[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<u.F)Da(b),Us(b);else break e;Fr(b),_t(18)}}else b.xa=P[1],0<b.xa-b.K&&P[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Nn(v(b.Va,b),6e3));Ai(b.h)<=1&&b.ta&&(b.ta=void 0)}else Di(b,11)}else if((u.L||b.g==u)&&Da(b),!O(g))for(P=b.Ba.g.parse(g),g=0;g<P.length;g++){let Je=P[g];const pt=Je[0];if(!(pt<=b.K))if(b.K=pt,Je=Je[1],b.I==2)if(Je[0]=="c"){b.M=Je[1],b.ba=Je[2];const Zn=Je[3];Zn!=null&&(b.ka=Zn,b.j.info("VER="+b.ka));const Mi=Je[4];Mi!=null&&(b.za=Mi,b.j.info("SVER="+b.za));const fi=Je[5];fi!=null&&typeof fi=="number"&&fi>0&&(T=1.5*fi,b.O=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const mi=u.g;if(mi){const Gr=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var F=T.h;F.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Lo(F,F.h),F.h=null))}if(T.G){const Ma=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ma&&(T.wa=Ma,tt(T.J,T.G,Ma))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-u.F,b.j.info("Handshake RTT: "+b.T+"ms")),T=b;var he=u;if(T.na=Rc(T,T.L?T.ba:null,T.W),he.L){Po(T.h,he);var De=he,At=T.O;At&&(De.H=At),De.D&&(Si(De),Ti(De)),T.g=he}else wc(T);b.i.length>0&&Oi(b)}else Je[0]!="stop"&&Je[0]!="close"||Di(b,7);else b.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Di(b,7):Qo(b):Je[0]!="noop"&&b.l&&b.l.qa(Je),b.A=0)}}Fn(4)}catch{}}var Rt=class{constructor(u,g){this.g=u,this.map=g}};function jo(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ai(u){return u.h?1:u.g?u.g.size:0}function Ci(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Lo(u,g){u.g?u.g.add(g):u.h=g}function Po(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}jo.prototype.cancel=function(){if(this.i=Uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Uo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const b of u.g.values())g=g.concat(b.G);return g}return L(u.i)}var _c=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aa(u,g){if(u){u=u.split("&");for(let b=0;b<u.length;b++){const T=u[b].indexOf("=");let P,F=null;T>=0?(P=u[b].substring(0,T),F=u[b].substring(T+1)):P=u[b],g(P,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof kn?(this.l=u.l,Ft(this,u.j),this.o=u.o,this.g=u.g,Os(this,u.u),this.h=u.h,zo(this,Tc(u.i)),this.m=u.m):u&&(g=String(u).match(_c))?(this.l=!1,Ft(this,g[1]||"",!0),this.o=Ii(g[2]||""),this.g=Ii(g[3]||"",!0),Os(this,g[4]),this.h=Ii(g[5]||"",!0),zo(this,g[6]||"",!0),this.m=Ii(g[7]||"")):(this.l=!1,this.i=new Ms(null,this.l))}kn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(Pr(g,Ca,!0),":");var b=this.g;return(b||g=="file")&&(u.push("//"),(g=this.o)&&u.push(Pr(g,Ca,!0),"@"),u.push(sn(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&u.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&u.push("/"),u.push(Pr(b,b.charAt(0)=="/"?Bo:bc,!0))),(b=this.i.toString())&&u.push("?",b),(b=this.m)&&u.push("#",Pr(b,xc)),u.join("")},kn.prototype.resolve=function(u){const g=kt(this);let b=!!u.j;b?Ft(g,u.j):b=!!u.o,b?g.o=u.o:b=!!u.g,b?g.g=u.g:b=u.u!=null;var T=u.h;if(b)Os(g,u.u);else if(b=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var P=g.h.lastIndexOf("/");P!=-1&&(T=g.h.slice(0,P+1)+T)}if(P=T,P==".."||P==".")T="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){T=P.lastIndexOf("/",0)==0,P=P.split("/");const F=[];for(let he=0;he<P.length;){const De=P[he++];De=="."?T&&he==P.length&&F.push(""):De==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),T&&he==P.length&&F.push("")):(F.push(De),T=!0)}T=F.join("/")}else T=P}return b?g.h=T:b=u.i.toString()!=="",b?zo(g,Tc(u.i)):b=!!u.m,b&&(g.m=u.m),g};function kt(u){return new kn(u)}function Ft(u,g,b){u.j=b?Ii(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function Os(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function zo(u,g,b){g instanceof Ms?(u.i=g,Na(u.i,u.l)):(b||(g=Pr(g,Ds)),u.i=new Ms(g,u.l))}function tt(u,g,b){u.i.set(g,b)}function Lr(u){return tt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ii(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Pr(u,g,b){return typeof u=="string"?(u=encodeURI(u).replace(g,pn),b&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ca=/[#\/\?@]/g,bc=/[#\?:]/g,Bo=/[#\?]/g,Ds=/[#\?@]/g,xc=/#/g;function Ms(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function yn(u){u.g||(u.g=new Map,u.h=0,u.i&&Aa(u.i,function(g,b){u.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}s=Ms.prototype,s.add=function(u,g){yn(this),this.i=null,u=js(this,u);let b=this.g.get(u);return b||this.g.set(u,b=[]),b.push(g),this.h+=1,this};function Ec(u,g){yn(u),g=js(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function qo(u,g){return yn(u),g=js(u,g),u.g.has(g)}s.forEach=function(u,g){yn(this),this.g.forEach(function(b,T){b.forEach(function(P){u.call(g,P,T,this)},this)},this)};function Ho(u,g){yn(u);let b=[];if(typeof g=="string")qo(u,g)&&(b=b.concat(u.g.get(js(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)b=b.concat(u[g]);return b}s.set=function(u,g){return yn(this),this.i=null,u=js(this,u),qo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},s.get=function(u,g){return u?(u=Ho(this,u),u.length>0?String(u[0]):g):g};function Ia(u,g,b){Ec(u,g),b.length>0&&(u.i=null,u.g.set(js(u,g),L(b)),u.h+=b.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let T=0;T<g.length;T++){var b=g[T];const P=sn(b);b=Ho(this,b);for(let F=0;F<b.length;F++){let he=P;b[F]!==""&&(he+="="+sn(b[F])),u.push(he)}}return this.i=u.join("&")};function Tc(u){const g=new Ms;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function js(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Na(u,g){g&&!u.j&&(yn(u),u.i=null,u.g.forEach(function(b,T){const P=T.toLowerCase();T!=P&&(Ec(this,T),Ia(this,P,b))},u)),u.j=g}function ui(u,g){const b=new nn;if(d.Image){const T=new Image;T.onload=x(Xn,b,"TestLoadImage: loaded",!0,g,T),T.onerror=x(Xn,b,"TestLoadImage: error",!1,g,T),T.onabort=x(Xn,b,"TestLoadImage: abort",!1,g,T),T.ontimeout=x(Xn,b,"TestLoadImage: timeout",!1,g,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else g(!1)}function Fo(u,g){const b=new nn,T=new AbortController,P=setTimeout(()=>{T.abort(),Xn(b,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:T.signal}).then(F=>{clearTimeout(P),F.ok?Xn(b,"TestPingServer: ok",!0,g):Xn(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),Xn(b,"TestPingServer: error",!1,g)})}function Xn(u,g,b,T,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),T(b)}catch{}}function Vs(){this.g=new Ns}function Ni(u){this.i=u.Sb||null,this.h=u.ab||!1}w(Ni,ci),Ni.prototype.g=function(){return new Ur(this.i,this.h)};function Ur(u,g){ut.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(Ur,ut),s=Ur.prototype,s.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,hi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||d).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ra(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ra(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ls(this):hi(this),this.readyState==3&&Ra(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,Ls(this))},s.Na=function(u){this.g&&(this.response=u,Ls(this))},s.ga=function(){this.g&&Ls(this)};function Ls(u){u.readyState=4,u.l=null,u.j=null,u.B=null,hi(u)}s.setRequestHeader=function(u,g){this.A.append(u,g)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,u.push(b[0]+": "+b[1]),b=g.next();return u.join(`\r
`)};function hi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ur.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function $n(u){let g="";return X(u,function(b,T){g+=T,g+=":",g+=b,g+=`\r
`}),g}function zr(u,g,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=$n(b),typeof u=="string"?b!=null&&sn(b):tt(u,g,b))}function st(u){ut.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(st,ut);var Ri=/^https?$/i,Go=["POST","PUT"];s=st.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,g,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ks.g(),this.g.onreadystatechange=k(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){Br(this,F);return}if(u=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var P in T)b.set(P,T[P]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const F of T.keys())b.set(F,T.get(F));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find(F=>F.toLowerCase()=="content-type"),P=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(Go,g,void 0)>=0)||T||P||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,he]of b)this.g.setRequestHeader(F,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){Br(this,F)}};function Br(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Ko(u),es(u)}function Ko(u){u.A||(u.A=!0,Et(u,"complete"),Et(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Et(this,"complete"),Et(this,"abort"),es(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),st.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?qr(this):this.Xa())},s.Xa=function(){qr(this)};function qr(u){if(u.h&&typeof c<"u"){if(u.v&&di(u)==4)setTimeout(u.Ca.bind(u),0);else if(Et(u,"readystatechange"),di(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var T;if(T=F===0){let he=String(u.D).match(_c)[1]||null;!he&&d.self&&d.self.location&&(he=d.self.location.protocol.slice(0,-1)),T=!Ri.test(he?he.toLowerCase():"")}b=T}if(b)Et(u,"complete"),Et(u,"success");else{u.o=6;try{var P=di(u)>2?u.g.statusText:""}catch{P=""}u.l=P+" ["+u.ca()+"]",Ko(u)}}finally{es(u)}}}}function es(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const b=u.g;u.g=null,g||Et(u,"ready");try{b.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function di(u){return u.g?u.g.readyState:0}s.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Mr(g)}};function Yt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ts(u){const g={};u=(u.g&&di(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(O(u[T]))continue;var b=Y(u[T]);const P=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const F=g[P]||[];g[P]=F,F.push(b)}ue(g,function(T){return T.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(u,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[u]||g}function Ps(u){this.za=0,this.i=[],this.j=new nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,u),this.Za=ki("retryDelaySeedMs",1e4,u),this.Ta=ki("forwardChannelMaxRetries",2,u),this.va=ki("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new jo(u&&u.concurrentRequestLimit),this.Ba=new Vs,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Ps.prototype,s.ka=8,s.I=1,s.connect=function(u,g,b,T){_t(0),this.W=u,this.H=g||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.J=Rc(this,null,this.W),Oi(this)};function Qo(u){if(ka(u),u.I==3){var g=u.V++,b=kt(u.J);if(tt(b,"SID",u.M),tt(b,"RID",g),tt(b,"TYPE","terminate"),Hr(u,b),g=new Re(u,u.j,g),g.M=2,g.A=Lr(kt(b)),b=!1,d.navigator&&d.navigator.sendBeacon)try{b=d.navigator.sendBeacon(g.A.toString(),"")}catch{}!b&&d.Image&&(new Image().src=g.A,b=!0),b||(g.g=kc(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ti(g)}Nc(u)}function Us(u){u.g&&(Xo(u),u.g.cancel(),u.g=null)}function ka(u){Us(u),u.v&&(d.clearTimeout(u.v),u.v=null),Da(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Oi(u){if(!Vo(u.h)&&!u.m){u.m=!0;var g=u.Ea;te||S(),oe||(te(),oe=!0),C.add(g,u),u.D=0}}function Oa(u,g){return Ai(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Nn(v(u.Ea,u,g),Ic(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const P=new Re(this,this.j,u);let F=this.o;if(this.U&&(F?(F=R(F),B(F,this.U)):F=this.U),this.u!==null||this.R||(P.J=F,F=null),this.S)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(g+=T,g>4096){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Sc(this,P,g),b=kt(this.J),tt(b,"RID",u),tt(b,"CVER",22),this.G&&tt(b,"X-HTTP-Session-Id",this.G),Hr(this,b),F&&(this.R?g="headers="+sn($n(F))+"&"+g:this.u&&zr(b,this.u,F)),Lo(this.h,P),this.Ra&&tt(b,"TYPE","init"),this.S?(tt(b,"$req",g),tt(b,"SID","null"),P.U=!0,Qn(P,b,null)):Qn(P,b,g),this.I=2}}else this.I==3&&(u?Yo(this,u):this.i.length==0||Vo(this.h)||Yo(this))};function Yo(u,g){var b;g?b=g.l:b=u.V++;const T=kt(u.J);tt(T,"SID",u.M),tt(T,"RID",b),tt(T,"AID",u.K),Hr(u,T),u.u&&u.o&&zr(T,u.u,u.o),b=new Re(u,u.j,b,u.D+1),u.u===null&&(b.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Sc(u,b,1e3),b.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Lo(u.h,b),Qn(b,T,g)}function Hr(u,g){u.H&&X(u.H,function(b,T){tt(g,T,b)}),u.l&&X({},function(b,T){tt(g,T,b)})}function Sc(u,g,b){b=Math.min(u.i.length,b);const T=u.l?v(u.l.Ka,u.l,u):null;e:{var P=u.i;let De=-1;for(;;){const At=["count="+b];De==-1?b>0?(De=P[0].g,At.push("ofs="+De)):De=0:At.push("ofs="+De);let Je=!0;for(let pt=0;pt<b;pt++){var F=P[pt].g;const Zn=P[pt].map;if(F-=De,F<0)De=Math.max(0,P[pt].g-100),Je=!1;else try{F="req"+F+"_"||"";try{var he=Zn instanceof Map?Zn:Object.entries(Zn);for(const[Mi,fi]of he){let mi=fi;p(fi)&&(mi=li(fi)),At.push(F+Mi+"="+encodeURIComponent(mi))}}catch(Mi){throw At.push(F+"type="+encodeURIComponent("_badmap")),Mi}}catch{T&&T(Zn)}}if(Je){he=At.join("&");break e}}he=void 0}return u=u.i.splice(0,b),g.G=u,he}function wc(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;te||S(),oe||(te(),oe=!0),C.add(g,u),u.A=0}}function Fr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Nn(v(u.Da,u),Ic(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,Ac(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Nn(v(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),Us(this),Ac(this))};function Xo(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Ac(u){u.g=new Re(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=kt(u.na);tt(g,"RID","rpc"),tt(g,"SID",u.M),tt(g,"AID",u.K),tt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&tt(g,"TO",u.ia),tt(g,"TYPE","xmlhttp"),Hr(u,g),u.u&&u.o&&zr(g,u.u,u.o),u.O&&(u.g.H=u.O);var b=u.g;u=u.ba,b.M=1,b.A=Lr(kt(g)),b.u=null,b.R=!0,Sa(b,u)}s.Va=function(){this.C!=null&&(this.C=null,Us(this),Fr(this),_t(19))};function Da(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Cc(u,g){var b=null;if(u.g==g){Da(u),Xo(u),u.g=null;var T=2}else if(Ci(u.h,g))b=g.G,Po(u.h,g),T=1;else return;if(u.I!=0){if(g.o)if(T==1){b=g.u?g.u.length:0,g=Date.now()-g.F;var P=u.D;T=Rs(),Et(T,new Gn(T,b)),Oi(u)}else wc(u);else if(P=g.m,P==3||P==0&&g.X>0||!(T==1&&Oa(u,g)||T==2&&Fr(u)))switch(b&&b.length>0&&(g=u.h,g.i=g.i.concat(b)),P){case 1:Di(u,5);break;case 4:Di(u,10);break;case 3:Di(u,6);break;default:Di(u,2)}}}function Ic(u,g){let b=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(b*=2),b*g}function Di(u,g){if(u.j.info("Error code "+g),g==2){var b=v(u.bb,u),T=u.Ua;const P=!T;T=new kn(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ft(T,"https"),Lr(T),P?ui(T.toString(),b):Fo(T.toString(),b)}else _t(2);u.I=0,u.l&&u.l.pa(g),Nc(u),ka(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Nc(u){if(u.I=0,u.ja=[],u.l){const g=Uo(u.h);(g.length!=0||u.i.length!=0)&&(Q(u.ja,g),Q(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Rc(u,g,b){var T=b instanceof kn?kt(b):new kn(b);if(T.g!="")g&&(T.g=g+"."+T.g),Os(T,T.u);else{var P=d.location;T=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;const F=new kn(null);T&&Ft(F,T),g&&(F.g=g),P&&Os(F,P),b&&(F.h=b),T=F}return b=u.G,g=u.wa,b&&g&&tt(T,b,g),tt(T,"VER",u.ka),Hr(u,T),T}function kc(u,g,b){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new st(new Ni({ab:b})):new st(u.ma),g.Fa(u.L),g}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oc(){}s=Oc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function zs(){}zs.prototype.g=function(u,g){return new hn(u,g)};function hn(u,g){ut.call(this),this.g=new Ps(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!O(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!O(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ns(this)}w(hn,ut),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Qo(this.g)},hn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var b={};b.__data__=u,u=b}else this.v&&(b={},b.__data__=li(u),u=b);g.i.push(new Rt(g.Ya++,u)),g.I==3&&Oi(g)},hn.prototype.N=function(){this.g.l=null,delete this.j,Qo(this.g),delete this.g,hn.Z.N.call(this)};function Dc(u){gt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const b in g){u=b;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}w(Dc,gt);function Mc(){Qt.call(this),this.status=1}w(Mc,Qt);function ns(u){this.g=u}w(ns,Oc),ns.prototype.ra=function(){Et(this.g,"a")},ns.prototype.qa=function(u){Et(this.g,new Dc(u))},ns.prototype.pa=function(u){Et(this.g,new Mc)},ns.prototype.oa=function(){Et(this.g,"b")},zs.prototype.createWebChannel=zs.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Db=function(){return new zs},Ob=function(){return Rs()},kb=lt,fm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ei.NO_ERROR=0,Ei.TIMEOUT=8,Ei.HTTP_ERROR=6,Yu=Ei,Vr.COMPLETE="complete",Rb=Vr,xa.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",ut.prototype.listen=ut.prototype.J,Vl=xa,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,Nb=st}).apply(typeof Uu<"u"?Uu:typeof self<"u"?self:typeof window<"u"?window:{});const Ov="@firebase/firestore",Dv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new Mm("@firebase/firestore");function uo(){return ga.logLevel}function ge(s,...e){if(ga.logLevel<=qe.DEBUG){const n=e.map(Gm);ga.debug(`Firestore (${No}): ${s}`,...n)}}function Ss(s,...e){if(ga.logLevel<=qe.ERROR){const n=e.map(Gm);ga.error(`Firestore (${No}): ${s}`,...n)}}function bo(s,...e){if(ga.logLevel<=qe.WARN){const n=e.map(Gm);ga.warn(`Firestore (${No}): ${s}`,...n)}}function Gm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Mb(s,r,n)}function Mb(s,e,n){let r=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ss(r),new Error(r)}function et(s,e,n,r){let l="Unexpected state";typeof n=="string"?l=n:r=n,s||Mb(e,l,r)}function Oe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(on.UNAUTHENTICATED)))}shutdown(){}}class Xw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class $w{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,n(y)):Promise.resolve();let c=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _r,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _r)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new jb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class Zw{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Jw{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Zw(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ww{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const r=c=>{c.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ge("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=eA(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<n&&(r+=e.charAt(l[c]%62))}return r}}function He(s,e){return s<e?-1:s>e?1:0}function mm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return Jf(l)===Jf(c)?He(l,c):Jf(l)?1:-1}return He(s.length,e.length)}const tA=55296,nA=57343;function Jf(s){const e=s.charCodeAt(0);return e>=tA&&e<=nA}function xo(s,e,n){return s.length===e.length&&s.every(((r,l)=>n(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="__name__";class Ui{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ui?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let l=0;l<r;l++){const c=Ui.compareSegments(e.get(l),n.get(l));if(c!==0)return c}return He(e.length,n.length)}static compareSegments(e,n){const r=Ui.isNumericId(e),l=Ui.isNumericId(n);return r&&!l?-1:!r&&l?1:r&&l?Ui.extractNumericId(e).compare(Ui.extractNumericId(n)):mm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class bt extends Ui{construct(e,n,r){return new bt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((l=>l.length>0)))}return new bt(n)}static emptyPath(){return new bt([])}}const iA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ui{construct(e,n,r){return new en(e,n,r)}static isValidIdentifier(e){return iA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jv}static keyField(){return new en([jv])}static fromServerFormat(e){const n=[];let r="",l=0;const c=()=>{if(r.length===0)throw new xe(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new xe(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new xe(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(r+=p,l++):(c(),l++)}if(c(),d)throw new xe(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(bt.fromString(e))}static fromName(e){return new Te(bt.fromString(e).popFirst(5))}static empty(){return new Te(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return bt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(s,e,n){if(!n)throw new xe(se.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function rA(s,e,n,r){if(e===!0&&r===!0)throw new xe(se.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function Vv(s){if(!Te.isDocumentKey(s))throw new xe(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Vb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Qm(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce(12329,{type:typeof s})}function pa(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new xe(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qm(s);throw new xe(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(s,e){const n={typeString:s};return e&&(n.value=e),n}function dc(s,e){if(!Vb(s))throw new xe(se.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){n=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${r}' field to equal '${c.value}'`;break}}if(n)throw new xe(se.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv=-62135596800,Pv=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Pv);return new mt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Lv)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Pv}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dc(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Lv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Lt("string",mt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new mt(0,0))}static max(){return new Ne(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=-1;function aA(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ne.fromTimestamp(r===1e9?new mt(n+1,0):new mt(n,r));return new xr(l,Te.empty(),e)}function oA(s){return new xr(s.readTime,s.key,Wl)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(Ne.min(),Te.empty(),Wl)}static max(){return new xr(Ne.max(),Te.empty(),Wl)}}function lA(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(s.documentKey,e.documentKey),n!==0?n:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s){if(s.code!==se.FAILED_PRECONDITION||s.message!==cA)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(n,c).next(r,l)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ne.reject(n)}static resolve(e){return new ne(((n,r)=>{n(e)}))}static reject(e){return new ne(((n,r)=>{r(e)}))}static waitFor(e){return new ne(((n,r)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&n()}),(y=>r(y)))})),d=!0,c===l&&n()}))}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next((l=>l?ne.resolve(l):r()));return n}static forEach(e,n){const r=[];return e.forEach(((l,c)=>{r.push(n.call(this,l,c))})),this.waitFor(r)}static mapArray(e,n){return new ne(((r,l)=>{const c=e.length,d=new Array(c);let p=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next((x=>{d[v]=x,++p,p===c&&r(d)}),(x=>l(x)))}}))}static doWhile(e,n){return new ne(((r,l)=>{const c=()=>{e()===!0?n().next((()=>{c()}),l):r()};c()}))}}function hA(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ih.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=-1;function Nh(s){return s==null}function lh(s){return s===0&&1/s==-1/0}function dA(s){return typeof s=="number"&&Number.isInteger(s)&&!lh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="";function fA(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=Uv(e)),e=mA(s.get(n),e);return Uv(e)}function mA(s,e){let n=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":n+="";break;case Lb:n+="";break;default:n+=c}}return n}function Uv(s){return s+Lb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Rr(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Pb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return n+r.left.size;l<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zu(this.root,e,this.comparator,!1)}getReverseIterator(){return new zu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zu(this.root,e,this.comparator,!0)}}class zu{constructor(e,n,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?r(e.key,n):1,n&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,l,c){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=l??Wt.EMPTY,this.right=c??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,l,c){return new Wt(e??this.key,n??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,n,r),null):c===0?l.copy(null,n,null,null,null):l.copy(null,null,null,null,l.right.insert(e,n,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,l=this;if(n(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,n),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),n(e,l.key)===0){if(l.right.isEmpty())return Wt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,n))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,l,c){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;n(l.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bv(this.data.getIterator())}getIteratorFrom(e){return new Bv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new qt(this.comparator);return n.data=e,n}}class Bv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new zn([])}unionWith(e){let n=new qt(en.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ub("Invalid base64 string: "+c):c}})(e);return new tn(n)}static fromUint8Array(e){const n=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let l=0;l<n.length;l++)r[l]=n.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const gA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(s){if(et(!!s,39018),typeof s=="string"){let e=0;const n=gA.exec(s);if(et(!!n,46558,{timestamp:s}),n[1]){let l=n[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(s.seconds),nanos:Nt(s.nanos)}}function Nt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Tr(s){return typeof s=="string"?tn.fromBase64String(s):tn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="server_timestamp",Bb="__type__",qb="__previous_value__",Hb="__local_write_time__";function Xm(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Bb])==null?void 0:r.stringValue)===zb}function Rh(s){const e=s.mapValue.fields[qb];return Xm(e)?Rh(e):e}function ec(s){const e=Er(s.mapValue.fields[Hb].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n,r,l,c,d,p,y,v,x){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=x}}const ch="(default)";class tc{constructor(e,n){this.projectId=e,this.database=n||ch}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===ch}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb="__type__",yA="__max__",Bu={mapValue:{}},Gb="__vector__",uh="value";function Sr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Xm(s)?4:_A(s)?9007199254740991:vA(s)?10:11:Ce(28295,{value:s})}function Qi(s,e){if(s===e)return!0;const n=Sr(s);if(n!==Sr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return ec(s).isEqual(ec(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Er(l.timestampValue),p=Er(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Tr(l.bytesValue).isEqual(Tr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return Nt(l.geoPointValue.latitude)===Nt(c.geoPointValue.latitude)&&Nt(l.geoPointValue.longitude)===Nt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return Nt(l.integerValue)===Nt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=Nt(l.doubleValue),p=Nt(c.doubleValue);return d===p?lh(d)===lh(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return xo(s.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(zv(d)!==zv(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Qi(d[y],p[y])))return!1;return!0})(s,e);default:return Ce(52216,{left:s})}}function nc(s,e){return(s.values||[]).find((n=>Qi(n,e)))!==void 0}function Eo(s,e){if(s===e)return 0;const n=Sr(s),r=Sr(e);if(n!==r)return He(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=Nt(c.integerValue||c.doubleValue),y=Nt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return qv(s.timestampValue,e.timestampValue);case 4:return qv(ec(s),ec(e));case 5:return mm(s.stringValue,e.stringValue);case 6:return(function(c,d){const p=Tr(c),y=Tr(d);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),y=d.split("/");for(let v=0;v<p.length&&v<y.length;v++){const x=He(p[v],y[v]);if(x!==0)return x}return He(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=He(Nt(c.latitude),Nt(d.latitude));return p!==0?p:He(Nt(c.longitude),Nt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Hv(s.arrayValue,e.arrayValue);case 10:return(function(c,d){var k,L,Q,ie;const p=c.fields||{},y=d.fields||{},v=(k=p[uh])==null?void 0:k.arrayValue,x=(L=y[uh])==null?void 0:L.arrayValue,w=He(((Q=v==null?void 0:v.values)==null?void 0:Q.length)||0,((ie=x==null?void 0:x.values)==null?void 0:ie.length)||0);return w!==0?w:Hv(v,x)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===Bu.mapValue&&d===Bu.mapValue)return 0;if(c===Bu.mapValue)return 1;if(d===Bu.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),v=d.fields||{},x=Object.keys(v);y.sort(),x.sort();for(let w=0;w<y.length&&w<x.length;++w){const k=mm(y[w],x[w]);if(k!==0)return k;const L=Eo(p[y[w]],v[x[w]]);if(L!==0)return L}return He(y.length,x.length)})(s.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function qv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const n=Er(s),r=Er(e),l=He(n.seconds,r.seconds);return l!==0?l:He(n.nanos,r.nanos)}function Hv(s,e){const n=s.values||[],r=e.values||[];for(let l=0;l<n.length&&l<r.length;++l){const c=Eo(n[l],r[l]);if(c)return c}return He(n.length,r.length)}function To(s){return gm(s)}function gm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=Er(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Tr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Te.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",l=!0;for(const c of n.values||[])l?l=!1:r+=",",r+=gm(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let l="{",c=!0;for(const d of r)c?c=!1:l+=",",l+=`${d}:${gm(n.fields[d])}`;return l+"}"})(s.mapValue):Ce(61005,{value:s})}function Xu(s){switch(Sr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(s);return e?16+Xu(e):16;case 5:return 2*s.stringValue.length;case 6:return Tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Xu(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Rr(r.fields,((c,d)=>{l+=c.length+Xu(d)})),l})(s.mapValue);default:throw Ce(13486,{value:s})}}function pm(s){return!!s&&"integerValue"in s}function $m(s){return!!s&&"arrayValue"in s}function Fv(s){return!!s&&"nullValue"in s}function Gv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function $u(s){return!!s&&"mapValue"in s}function vA(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[Fb])==null?void 0:r.stringValue)===Gb}function Gl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Rr(s.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Gl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Gl(s.arrayValue.values[n]);return e}return{...s}}function _A(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===yA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(n)}setAll(e){let n=en.emptyPath(),r={},l=[];e.forEach(((d,p)=>{if(!n.isImmediateParentOf(p)){const y=this.getFieldsMap(n);this.applyChanges(y,r,l),r={},l=[],n=p.popLast()}d?r[p.lastSegment()]=Gl(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,r,l)}delete(e){const n=this.field(e.popLast());$u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=n.mapValue.fields[e.get(r)];$u(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=l),n=l}return n.mapValue.fields}applyChanges(e,n,r){Rr(n,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new wn(Gl(this.value))}}function Kb(s){const e=[];return Rr(s.fields,((n,r)=>{const l=new en([n]);if($u(r)){const c=Kb(r.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n,r,l,c,d,p){this.key=e,this.documentType=n,this.version=r,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new ln(e,0,Ne.min(),Ne.min(),Ne.min(),wn.empty(),0)}static newFoundDocument(e,n,r,l){return new ln(e,1,n,Ne.min(),r,l,0)}static newNoDocument(e,n){return new ln(e,2,n,Ne.min(),Ne.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new ln(e,3,n,Ne.min(),Ne.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n){this.position=e,this.inclusive=n}}function Kv(s,e,n){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],d=s.position[l];if(c.field.isKeyField()?r=Te.comparator(Te.fromName(d.referenceValue),n.key):r=Eo(d,n.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Qi(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n="asc"){this.field=e,this.dir=n}}function bA(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{}class zt extends Qb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new EA(e,n,r):n==="array-contains"?new wA(e,r):n==="in"?new AA(e,r):n==="not-in"?new CA(e,r):n==="array-contains-any"?new IA(e,r):new zt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TA(e,r):new SA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Eo(n,this.value)):n!==null&&Sr(this.value)===Sr(n)&&this.matchesComparison(Eo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yi extends Qb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yi(e,n)}matches(e){return Yb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yb(s){return s.op==="and"}function Xb(s){return xA(s)&&Yb(s)}function xA(s){for(const e of s.filters)if(e instanceof Yi)return!1;return!0}function ym(s){if(s instanceof zt)return s.field.canonicalString()+s.op.toString()+To(s.value);if(Xb(s))return s.filters.map((e=>ym(e))).join(",");{const e=s.filters.map((n=>ym(n))).join(",");return`${s.op}(${e})`}}function $b(s,e){return s instanceof zt?(function(r,l){return l instanceof zt&&r.op===l.op&&r.field.isEqual(l.field)&&Qi(r.value,l.value)})(s,e):s instanceof Yi?(function(r,l){return l instanceof Yi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,d,p)=>c&&$b(d,l.filters[p])),!0):!1})(s,e):void Ce(19439)}function Zb(s){return s instanceof zt?(function(n){return`${n.field.canonicalString()} ${n.op} ${To(n.value)}`})(s):s instanceof Yi?(function(n){return n.op.toString()+" {"+n.getFilters().map(Zb).join(" ,")+"}"})(s):"Filter"}class EA extends zt{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class TA extends zt{constructor(e,n){super(e,"in",n),this.keys=Jb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class SA extends zt{constructor(e,n){super(e,"not-in",n),this.keys=Jb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Jb(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Te.fromName(r.referenceValue)))}class wA extends zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $m(n)&&nc(n.arrayValue,this.value)}}class AA extends zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&nc(this.value.arrayValue,n)}}class CA extends zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!nc(this.value.arrayValue,n)}}class IA extends zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$m(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>nc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n=null,r=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function Yv(s,e=null,n=[],r=[],l=null,c=null,d=null){return new NA(s,e,n,r,l,c,d)}function Zm(s){const e=Oe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>ym(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>To(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>To(r))).join(",")),e.Te=n}return e.Te}function Jm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!bA(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!$b(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Qv(s.startAt,e.startAt)&&Qv(s.endAt,e.endAt)}function vm(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n=null,r=[],l=[],c=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RA(s,e,n,r,l,c,d,p){return new kh(s,e,n,r,l,c,d,p)}function Wm(s){return new kh(s)}function Xv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function kA(s){return s.collectionGroup!==null}function Kl(s){const e=Oe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new qt(en.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((v=>{v.isInequality()&&(p=p.add(v.field))}))})),p})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new dh(c,r))})),n.has(en.keyField().canonicalString())||e.Ie.push(new dh(en.keyField(),r))}return e.Ie}function qi(s){const e=Oe(s);return e.Ee||(e.Ee=OA(e,Kl(s))),e.Ee}function OA(s,e){if(s.limitType==="F")return Yv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new dh(l.field,c)}));const n=s.endAt?new hh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new hh(s.startAt.position,s.startAt.inclusive):null;return Yv(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function _m(s,e,n){return new kh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Oh(s,e){return Jm(qi(s),qi(e))&&s.limitType===e.limitType}function Wb(s){return`${Zm(qi(s))}|lt:${s.limitType}`}function ho(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((l=>Zb(l))).join(", ")}]`),Nh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((l=>To(l))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((l=>To(l))).join(",")),`Target(${r})`})(qi(s))}; limitType=${s.limitType})`}function Dh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Te.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Kl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(d,p,y){const v=Kv(d,p,y);return d.inclusive?v<=0:v<0})(r.startAt,Kl(r),l)||r.endAt&&!(function(d,p,y){const v=Kv(d,p,y);return d.inclusive?v>=0:v>0})(r.endAt,Kl(r),l))})(s,e)}function DA(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function e1(s){return(e,n)=>{let r=!1;for(const l of Kl(s)){const c=MA(l,e,n);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function MA(s,e,n){const r=s.field.isKeyField()?Te.comparator(e.key,n.key):(function(c,d,p){const y=d.data.field(c),v=p.data.field(c);return y!==null&&v!==null?Eo(y,v):Ce(42886)})(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,n]);l.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[n]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,((n,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=new xt(Te.comparator);function ws(){return jA}const t1=new xt(Te.comparator);function Ll(...s){let e=t1;for(const n of s)e=e.insert(n.key,n);return e}function n1(s){let e=t1;return s.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function la(){return Ql()}function i1(){return Ql()}function Ql(){return new _a((s=>s.toString()),((s,e)=>s.isEqual(e)))}const VA=new xt(Te.comparator),LA=new qt(Te.comparator);function Fe(...s){let e=LA;for(const n of s)e=e.add(n);return e}const PA=new qt(He);function UA(){return PA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lh(e)?"-0":e}}function s1(s){return{integerValue:""+s}}function zA(s,e){return dA(e)?s1(e):eg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function BA(s,e,n){return s instanceof fh?(function(l,c){const d={fields:{[Bb]:{stringValue:zb},[Hb]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Xm(c)&&(c=Rh(c)),c&&(d.fields[qb]=c),{mapValue:d}})(n,e):s instanceof ic?a1(s,e):s instanceof sc?o1(s,e):(function(l,c){const d=r1(l,c),p=$v(d)+$v(l.Ae);return pm(d)&&pm(l.Ae)?s1(p):eg(l.serializer,p)})(s,e)}function qA(s,e,n){return s instanceof ic?a1(s,e):s instanceof sc?o1(s,e):n}function r1(s,e){return s instanceof mh?(function(r){return pm(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class fh extends Mh{}class ic extends Mh{constructor(e){super(),this.elements=e}}function a1(s,e){const n=l1(e);for(const r of s.elements)n.some((l=>Qi(l,r)))||n.push(r);return{arrayValue:{values:n}}}class sc extends Mh{constructor(e){super(),this.elements=e}}function o1(s,e){let n=l1(e);for(const r of s.elements)n=n.filter((l=>!Qi(l,r)));return{arrayValue:{values:n}}}class mh extends Mh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $v(s){return Nt(s.integerValue||s.doubleValue)}function l1(s){return $m(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function HA(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof ic&&l instanceof ic||r instanceof sc&&l instanceof sc?xo(r.elements,l.elements,Qi):r instanceof mh&&l instanceof mh?Qi(r.Ae,l.Ae):r instanceof fh&&l instanceof fh})(s.transform,e.transform)}class FA{constructor(e,n){this.version=e,this.transformResults=n}}class Hi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hi}static exists(e){return new Hi(void 0,e)}static updateTime(e){return new Hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class jh{}function c1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new h1(s.key,Hi.none()):new fc(s.key,s.data,Hi.none());{const n=s.data,r=wn.empty();let l=new qt(en.comparator);for(let c of e.fields)if(!l.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?r.delete(c):r.set(c,d),l=l.add(c)}return new kr(s.key,r,new zn(l.toArray()),Hi.none())}}function GA(s,e,n){s instanceof fc?(function(l,c,d){const p=l.value.clone(),y=Jv(l.fieldTransforms,c,d.transformResults);p.setAll(y),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,n):s instanceof kr?(function(l,c,d){if(!Zu(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=Jv(l.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(u1(l)),y.setAll(p),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,n):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function Yl(s,e,n,r){return s instanceof fc?(function(c,d,p,y){if(!Zu(c.precondition,d))return p;const v=c.value.clone(),x=Wv(c.fieldTransforms,y,d);return v.setAll(x),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null})(s,e,n,r):s instanceof kr?(function(c,d,p,y){if(!Zu(c.precondition,d))return p;const v=Wv(c.fieldTransforms,y,d),x=d.data;return x.setAll(u1(c)),x.setAll(v),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((w=>w.field)))})(s,e,n,r):(function(c,d,p){return Zu(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,n)}function KA(s,e){let n=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=r1(r.transform,l||null);c!=null&&(n===null&&(n=wn.empty()),n.set(r.field,c))}return n||null}function Zv(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&xo(r,l,((c,d)=>HA(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class fc extends jh{constructor(e,n,r,l=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class kr extends jh{constructor(e,n,r,l,c=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function u1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}})),e}function Jv(s,e,n){const r=new Map;et(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let l=0;l<n.length;l++){const c=s[l],d=c.transform,p=e.data.field(c.field);r.set(c.field,qA(d,p,n[l]))}return r}function Wv(s,e,n){const r=new Map;for(const l of s){const c=l.transform,d=n.data.field(l.field);r.set(l.field,BA(c,d,e))}return r}class h1 extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QA extends jh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,l){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&GA(c,e,r[l])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=i1();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=n.has(l.key)?null:p;const y=c1(d,p);y!==null&&r.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((n,r)=>Zv(n,r)))&&xo(this.baseMutations,e.baseMutations,((n,r)=>Zv(n,r)))}}class tg{constructor(e,n,r,l){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=l}static from(e,n,r){et(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return VA})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,r[d].version);return new tg(e,n,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ye;function ZA(s){switch(s){case se.OK:return Ce(64938);case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ce(15467,{code:s})}}function d1(s){if(s===void 0)return Ss("GRPC error has no .code"),se.UNKNOWN;switch(s){case Vt.OK:return se.OK;case Vt.CANCELLED:return se.CANCELLED;case Vt.UNKNOWN:return se.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return se.INTERNAL;case Vt.UNAVAILABLE:return se.UNAVAILABLE;case Vt.UNAUTHENTICATED:return se.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case Vt.NOT_FOUND:return se.NOT_FOUND;case Vt.ALREADY_EXISTS:return se.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return se.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case Vt.ABORTED:return se.ABORTED;case Vt.OUT_OF_RANGE:return se.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return se.UNIMPLEMENTED;case Vt.DATA_LOSS:return se.DATA_LOSS;default:return Ce(39323,{code:s})}}(Ye=Vt||(Vt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new vr([4294967295,4294967295],0);function e_(s){const e=JA().encode(s),n=new Ib;return n.update(e),new Uint8Array(n.digest())}function t_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new vr([n,r],0),new vr([l,c],0)]}class ng{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(r<0)throw new Pl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vr.fromNumber(this.ge)}ye(e,n,r){let l=e.add(n.multiply(vr.fromNumber(r)));return l.compare(WA)===1&&(l=new vr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=e_(e),[r,l]=t_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);if(!this.we(d))return!1}return!0}static create(e,n,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new ng(c,l,n);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const n=e_(e),[r,l]=t_(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n,r,l,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const l=new Map;return l.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vh(Ne.min(),l,new xt(He),ws(),Fe())}}class mc{constructor(e,n,r,l,c){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mc(r,n,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r,l){this.be=e,this.removedTargetIds=n,this.key=r,this.De=l}}class f1{constructor(e,n){this.targetId=e,this.Ce=n}}class m1{constructor(e,n,r=tn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=l}}class n_{constructor(){this.ve=0,this.Fe=i_(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),r=Fe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:n=n.add(l);break;case 1:r=r.add(l);break;default:Ce(38017,{changeType:c})}})),new mc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=i_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eC{constructor(e){this.Ge=e,this.ze=new Map,this.je=ws(),this.Je=qu(),this.He=qu(),this.Ye=new xt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,l)=>{this.rt(l)&&n(l)}))}st(e){const n=e.targetId,r=e.Ce.count,l=this.ot(n);if(l){const c=l.target;if(vm(c))if(r===0){const d=new Te(c.path);this.et(n,d,ln.newNoDocument(d,Ne.min()))}else et(r===1,20013,{expectedCount:r});else{const d=this._t(n);if(d!==r){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=n;let d,p;try{d=Tr(r).toUint8Array()}catch(y){if(y instanceof Ub)return bo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new ng(d,l,c)}catch(y){return bo(y instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let l=0;return r.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(n,c,null),l++)})),l}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&vm(p.target)){const y=new Te(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,ln.newNoDocument(y,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let r=Fe();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new Vh(e,n,this.Ye,this.je,r);return this.je=ws(),this.Je=qu(),this.He=qu(),this.Ye=new xt(He),l}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,n)?l.Qe(n,1):l.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new n_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new qt(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new qt(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new n_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qu(){return new xt(Te.comparator)}function i_(){return new xt(Te.comparator)}const tC={asc:"ASCENDING",desc:"DESCENDING"},nC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iC={and:"AND",or:"OR"};class sC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bm(s,e){return s.useProto3Json||Nh(e)?e:{value:e}}function gh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function g1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function rC(s,e){return gh(s,e.toTimestamp())}function Fi(s){return et(!!s,49232),Ne.fromTimestamp((function(n){const r=Er(n);return new mt(r.seconds,r.nanos)})(s))}function ig(s,e){return xm(s,e).canonicalString()}function xm(s,e){const n=(function(l){return new bt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?n:n.child(e)}function p1(s){const e=bt.fromString(s);return et(x1(e),10190,{key:e.toString()}),e}function Em(s,e){return ig(s.databaseId,e.path)}function Wf(s,e){const n=p1(e);if(n.get(1)!==s.databaseId.projectId)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new xe(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Te(v1(n))}function y1(s,e){return ig(s.databaseId,e)}function aC(s){const e=p1(s);return e.length===4?bt.emptyPath():v1(e)}function Tm(s){return new bt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function v1(s){return et(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function s_(s,e,n){return{name:Em(s,e),fields:n.value.mapValue.fields}}function oC(s,e){let n;if("targetChange"in e){e.targetChange;const r=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ce(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(v,x){return v.useProto3Json?(et(x===void 0||typeof x=="string",58123),tn.fromBase64String(x||"")):(et(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),tn.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(v){const x=v.code===void 0?se.UNKNOWN:d1(v.code);return new xe(x,v.message||"")})(d);n=new m1(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Wf(s,r.document.name),c=Fi(r.document.updateTime),d=r.document.createTime?Fi(r.document.createTime):Ne.min(),p=new wn({mapValue:{fields:r.document.fields}}),y=ln.newFoundDocument(l,c,d,p),v=r.targetIds||[],x=r.removedTargetIds||[];n=new Ju(v,x,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Wf(s,r.document),c=r.readTime?Fi(r.readTime):Ne.min(),d=ln.newNoDocument(l,c),p=r.removedTargetIds||[];n=new Ju([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Wf(s,r.document),c=r.removedTargetIds||[];n=new Ju([],c,l,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,d=new $A(l,c),p=r.targetId;n=new f1(p,d)}}return n}function lC(s,e){let n;if(e instanceof fc)n={update:s_(s,e.key,e.value)};else if(e instanceof h1)n={delete:Em(s,e.key)};else if(e instanceof kr)n={update:s_(s,e.key,e.data),updateMask:yC(e.fieldMask)};else{if(!(e instanceof QA))return Ce(16599,{Vt:e.type});n={verify:Em(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const p=d.transform;if(p instanceof fh)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof ic)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof sc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof mh)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw Ce(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:rC(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ce(27497)})(s,e.precondition)),n}function cC(s,e){return s&&s.length>0?(et(e!==void 0,14353),s.map((n=>(function(l,c){let d=l.updateTime?Fi(l.updateTime):Fi(c);return d.isEqual(Ne.min())&&(d=Fi(c)),new FA(d,l.transformResults||[])})(n,e)))):[]}function uC(s,e){return{documents:[y1(s,e.path)]}}function hC(s,e){const n={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=y1(s,l);const c=(function(v){if(v.length!==0)return b1(Yi.create(v,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(v){if(v.length!==0)return v.map((x=>(function(k){return{field:fo(k.field),direction:mC(k.dir)}})(x)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const p=bm(s,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:n,parent:l}}function dC(s){let e=aC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let l=null;if(r>0){et(r===1,65062);const x=n.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let c=[];n.where&&(c=(function(w){const k=_1(w);return k instanceof Yi&&Xb(k)?k.getFilters():[k]})(n.where));let d=[];n.orderBy&&(d=(function(w){return w.map((k=>(function(Q){return new dh(mo(Q.field),(function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(k)))})(n.orderBy));let p=null;n.limit&&(p=(function(w){let k;return k=typeof w=="object"?w.value:w,Nh(k)?null:k})(n.limit));let y=null;n.startAt&&(y=(function(w){const k=!!w.before,L=w.values||[];return new hh(L,k)})(n.startAt));let v=null;return n.endAt&&(v=(function(w){const k=!w.before,L=w.values||[];return new hh(L,k)})(n.endAt)),RA(e,l,d,c,p,"F",y,v)}function fC(s,e){const n=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:l})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=mo(n.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=mo(n.unaryFilter.field);return zt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mo(n.unaryFilter.field);return zt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=mo(n.unaryFilter.field);return zt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(s):s.fieldFilter!==void 0?(function(n){return zt.create(mo(n.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return Yi.create(n.compositeFilter.filters.map((r=>_1(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(s):Ce(30097,{filter:s})}function mC(s){return tC[s]}function gC(s){return nC[s]}function pC(s){return iC[s]}function fo(s){return{fieldPath:s.canonicalString()}}function mo(s){return en.fromServerFormat(s.fieldPath)}function b1(s){return s instanceof zt?(function(n){if(n.op==="=="){if(Gv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NAN"}};if(Fv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NAN"}};if(Fv(n.value))return{unaryFilter:{field:fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fo(n.field),op:gC(n.op),value:n.value}}})(s):s instanceof Yi?(function(n){const r=n.getFilters().map((l=>b1(l)));return r.length===1?r[0]:{compositeFilter:{op:pC(n.op),filters:r}}})(s):Ce(54877,{filter:s})}function yC(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function x1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r,l,c=Ne.min(),d=Ne.min(),p=tn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.yt=e}}function _C(s){const e=dC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?_m(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.Cn=new xC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(xr.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class xC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n]||new qt(bt.comparator),c=!l.has(r);return this.index[n]=l.add(r),c}has(e){const n=e.lastSegment(),r=e.popLast(),l=this.index[n];return l&&l.has(r)}getEntries(e){return(this.index[e]||new qt(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},E1=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(E1,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new So(0)}static cr(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="LruGarbageCollector",EC=1048576;function o_([s,e],[n,r]){const l=He(s,n);return l===0?He(e,r):l}class TC{constructor(e){this.Ir=e,this.buffer=new qt(o_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();o_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(a_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?ge(a_,"Ignoring IndexedDB error during garbage collection: ",n):await Ro(n)}await this.Vr(3e5)}))}}class wC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return ne.resolve(Ih.ce);const r=new TC(n);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(r_)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,l,c,d,p,y,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),l=this.params.maximumSequenceNumbersToCollect):l=w,d=Date.now(),this.nthSequenceNumber(e,l)))).next((w=>(r=w,p=Date.now(),this.removeTargets(e,r,n)))).next((w=>(c=w,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(v=Date.now(),uo()<=qe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${w} documents in `+(v-y)+`ms
Total Duration: ${v-x}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:w}))))}}function AC(s,e){return new wC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.changes=new _a((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n,r,l){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,n)))).next((l=>(r!==null&&Yl(r.mutation,l,zn.empty(),mt.now()),l)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Fe()){const l=la();return this.populateOverlays(e,l,n).next((()=>this.computeViews(e,n,l,r).next((c=>{let d=Ll();return c.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const r=la();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Fe())))}populateOverlays(e,n,r){const l=[];return r.forEach((c=>{n.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{n.set(d,p)}))}))}computeViews(e,n,r,l){let c=ws();const d=Ql(),p=(function(){return Ql()})();return n.forEach(((y,v)=>{const x=r.get(v.key);l.has(v.key)&&(x===void 0||x.mutation instanceof kr)?c=c.insert(v.key,v):x!==void 0?(d.set(v.key,x.mutation.getFieldMask()),Yl(x.mutation,v,x.mutation.getFieldMask(),mt.now())):d.set(v.key,zn.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((v,x)=>d.set(v,x))),n.forEach(((v,x)=>p.set(v,new IC(x,d.get(v)??null)))),p)))}recalculateAndSaveOverlays(e,n){const r=Ql();let l=new xt(((d,p)=>d-p)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const p of d)p.keys().forEach((y=>{const v=n.get(y);if(v===null)return;let x=r.get(y)||zn.empty();x=p.applyToLocalView(v,x),r.set(y,x);const w=(l.get(p.batchId)||Fe()).add(y);l=l.insert(p.batchId,w)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),v=y.key,x=y.value,w=i1();x.forEach((k=>{if(!c.has(k)){const L=c1(n.get(k),r.get(k));L!==null&&w.set(k,L),c=c.add(k)}})),d.push(this.documentOverlayCache.saveOverlays(e,v,w))}return ne.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,l){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,l):this.getDocumentsMatchingCollectionQuery(e,n,r,l)}getNextDocuments(e,n,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,l-c.size):ne.resolve(la());let p=Wl,y=c;return d.next((v=>ne.forEach(v,((x,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),c.get(x)?ne.resolve():this.remoteDocumentCache.getEntry(e,x).next((k=>{y=y.insert(x,k)}))))).next((()=>this.populateOverlays(e,v,c))).next((()=>this.computeViews(e,y,v,Fe()))).next((x=>({batchId:p,changes:n1(x)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((r=>{let l=Ll();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,l){const c=n.collectionGroup;let d=Ll();return this.indexManager.getCollectionParents(e,c).next((p=>ne.forEach(p,(y=>{const v=(function(w,k){return new kh(k,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,r,l).next((x=>{x.forEach(((w,k)=>{d=d.insert(w,k)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,c,l)))).next((d=>{c.forEach(((y,v)=>{const x=v.getKey();d.get(x)===null&&(d=d.insert(x,ln.newInvalidDocument(x)))}));let p=Ll();return d.forEach(((y,v)=>{const x=c.get(y);x!==void 0&&Yl(x.mutation,v,zn.empty(),mt.now()),Dh(n,v)&&(p=p.insert(y,v))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ne.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(l){return{id:l.id,version:l.version,createTime:Fi(l.createTime)}})(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(l){return{name:l.name,query:_C(l.bundledQuery),readTime:Fi(l.readTime)}})(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.overlays=new xt(Te.comparator),this.qr=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=la();return ne.forEach(n,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((l,c)=>{this.St(e,n,c)})),ne.resolve()}removeOverlaysForBatchId(e,n,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const l=la(),c=n.length+1,d=new Te(n.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return ne.resolve(l)}getOverlaysForCollectionGroup(e,n,r,l){let c=new xt(((v,x)=>v-x));const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>r){let x=c.get(v.largestBatchId);x===null&&(x=la(),c=c.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const p=la(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((v,x)=>p.set(v,x))),!(p.size()>=l)););return ne.resolve(p)}St(e,n,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new XA(n,r));let c=this.qr.get(n);c===void 0&&(c=Fe(),this.qr.set(n,c)),this.qr.set(n,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.Qr=new qt(Kt.$r),this.Ur=new qt(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Kt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Kt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Te(new bt([])),r=new Kt(n,e),l=new Kt(n,e+1),c=[];return this.Ur.forEachInRange([r,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new bt([])),r=new Kt(n,e),l=new Kt(n,e+1);let c=Fe();return this.Ur.forEachInRange([r,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Kt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Kt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Kt.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new YA(c,n,r,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Kt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ne.resolve(d)}lookupMutationBatch(e,n){return ne.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,l=this.ei(r),c=l<0?0:l;return ne.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Ym:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Kt(n,0),l=new Kt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),ne.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(He);return n.forEach((l=>{const c=new Kt(l,0),d=new Kt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{r=r.add(p.Yr)}))})),ne.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,l=r.length+1;let c=r;Te.isDocumentKey(c)||(c=c.child(""));const d=new Kt(new Te(c),0);let p=new qt(He);return this.Zr.forEachWhile((y=>{const v=y.key.path;return!!r.isPrefixOf(v)&&(v.length===l&&(p=p.add(y.Yr)),!0)}),d),ne.resolve(this.ti(p))}ti(e){const n=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&n.push(l)})),n}removeMutationBatch(e,n){et(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ne.forEach(n.mutations,(l=>{const c=new Kt(l.key,n.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Kt(n,0),l=this.Zr.firstAfterOrEqual(r);return ne.resolve(n.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.ri=e,this.docs=(function(){return new xt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,l=this.docs.get(r),c=l?l.size:0,d=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let r=ws();return n.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():ln.newInvalidDocument(l))})),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,l){let c=ws();const d=n.path,p=new Te(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:v,value:{document:x}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||lA(oA(x),r)<=0||(l.has(x.key)||Dh(n,x))&&(c=c.insert(x.key,x.mutableCopy()))}return ne.resolve(c)}getAllFromCollectionGroup(e,n,r,l){Ce(9500)}ii(e,n){return ne.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new jC(this)}getSize(e){return ne.resolve(this.size)}}class jC extends CC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?n.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),ne.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.persistence=e,this.si=new _a((n=>Zm(n)),Jm),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new sg,this.targetCount=0,this.ai=So.ur()}forEachTarget(e,n){return this.si.forEach(((r,l)=>n(l))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ne.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new So(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Pr(n),ne.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=n&&r.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),ne.waitFor(c).next((()=>l))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const l=this.persistence.referenceDelegate,c=[];return l&&n.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),ne.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ih(0),this.li=!1,this.li=!0,this.hi=new OC,this.referenceDelegate=e(this),this.Pi=new VC(this),this.indexManager=new bC,this.remoteDocumentCache=(function(l){return new MC(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vC(n),this.Ii=new RC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new DC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const l=new LC(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,n){return ne.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class LC extends uA{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new sg,this.Vi=null}static mi(e){return new rg(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(r=>{const l=Te.fromPath(r);return this.gi(e,l).next((c=>{c||n.removeEntry(l,Ne.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ne.or([()=>ne.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ph{constructor(e,n){this.persistence=e,this.pi=new _a((r=>fA(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=AC(this,n)}static mi(e,n){return new ph(e,n)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((l=>r+l))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return ne.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?ne.resolve():n(l)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,n).next((p=>{p||(r++,c.removeEntry(d,Ne.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ne.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xu(e.data.value)),n}br(e,n,r){return ne.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const l=this.pi.get(n);return ne.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n,r,l){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=l}static As(e,n){let r=Fe(),l=Fe();for(const c of n.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new ag(e,n.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return gT()?8:hA(cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,l){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,l,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new PC;return this.Ss(e,n,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,n,d,p.size)}))})).next((()=>c.result))}bs(e,n,r,l){return r.documentReadCount<this.fs?(uo()<=qe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",ho(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(uo()<=qe.DEBUG&&ge("QueryEngine","Query:",ho(n),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(uo()<=qe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",ho(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qi(n))):ne.resolve())}ys(e,n){if(Xv(n))return ne.resolve(null);let r=qi(n);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(n.limit!==null&&l===1&&(n=_m(n,null,"F"),r=qi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Fe(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const v=this.Ds(n,p);return this.Cs(n,v,d,y.readTime)?this.ys(e,_m(n,null,"F")):this.vs(e,v,n,y)}))))})))))}ws(e,n,r,l){return Xv(n)||l.isEqual(Ne.min())?ne.resolve(null):this.ps.getDocuments(e,r).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,r,l)?ne.resolve(null):(uo()<=qe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ho(n)),this.vs(e,d,n,aA(l,Wl)).next((p=>p)))}))}Ds(e,n){let r=new qt(e1(e));return n.forEach(((l,c)=>{Dh(e,c)&&(r=r.add(c))})),r}Cs(e,n,r,l){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,n,r){return uo()<=qe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",ho(n)),this.ps.getDocumentsMatchingQuery(e,n,xr.min(),r)}vs(e,n,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="LocalStore",zC=3e8;class BC{constructor(e,n,r,l){this.persistence=e,this.Fs=n,this.serializer=l,this.Ms=new xt(He),this.xs=new _a((c=>Zm(c)),Jm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function qC(s,e,n,r){return new BC(s,e,n,r)}async function S1(s,e){const n=Oe(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return n.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],p=[];let y=Fe();for(const v of l){d.push(v.batchId);for(const x of v.mutations)y=y.add(x.key)}for(const v of c){p.push(v.batchId);for(const x of v.mutations)y=y.add(x.key)}return n.localDocuments.getDocuments(r,y).next((v=>({Ls:v,removedBatchIds:d,addedBatchIds:p})))}))}))}function HC(s,e){const n=Oe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,v,x){const w=v.batch,k=w.keys();let L=ne.resolve();return k.forEach((Q=>{L=L.next((()=>x.getEntry(y,Q))).next((ie=>{const W=v.docVersions.get(Q);et(W!==null,48541),ie.version.compareTo(W)<0&&(w.applyToRemoteDocument(ie,v),ie.isValidDocument()&&(ie.setReadTime(v.commitVersion),x.addEntry(ie)))}))})),L.next((()=>p.mutationQueue.removeMutationBatch(y,w)))})(n,r,e,c).next((()=>c.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Fe();for(let v=0;v<p.mutationResults.length;++v)p.mutationResults[v].transformResults.length>0&&(y=y.add(p.batch.mutations[v].key));return y})(e)))).next((()=>n.localDocuments.getDocuments(r,l)))}))}function w1(s){const e=Oe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function FC(s,e){const n=Oe(s),r=e.snapshotVersion;let l=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});l=n.Ms;const p=[];e.targetChanges.forEach(((x,w)=>{const k=l.get(w);if(!k)return;p.push(n.Pi.removeMatchingKeys(c,x.removedDocuments,w).next((()=>n.Pi.addMatchingKeys(c,x.addedDocuments,w))));let L=k.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(w)!==null?L=L.withResumeToken(tn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):x.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(x.resumeToken,r)),l=l.insert(w,L),(function(ie,W,de){return ie.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-ie.snapshotVersion.toMicroseconds()>=zC?!0:de.addedDocuments.size+de.modifiedDocuments.size+de.removedDocuments.size>0})(k,L,x)&&p.push(n.Pi.updateTargetData(c,L))}));let y=ws(),v=Fe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(c,x))})),p.push(GC(c,d,e.documentUpdates).next((x=>{y=x.ks,v=x.qs}))),!r.isEqual(Ne.min())){const x=n.Pi.getLastRemoteSnapshotVersion(c).next((w=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(x)}return ne.waitFor(p).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,y,v))).next((()=>y))})).then((c=>(n.Ms=l,c)))}function GC(s,e,n){let r=Fe(),l=Fe();return n.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let d=ws();return n.forEach(((p,y)=>{const v=c.get(p);y.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Ne.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):ge(og,"Ignoring outdated watch update for ",p,". Current version:",v.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function KC(s,e){const n=Oe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ym),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function QC(s,e){const n=Oe(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return n.Pi.getTargetData(r,e).next((c=>c?(l=c,ne.resolve(l)):n.Pi.allocateTargetId(r).next((d=>(l=new gr(e,d,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=n.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Sm(s,e,n){const r=Oe(s),l=r.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!ko(d))throw d;ge(og,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function l_(s,e,n){const r=Oe(s);let l=Ne.min(),c=Fe();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,v,x){const w=Oe(y),k=w.xs.get(x);return k!==void 0?ne.resolve(w.Ms.get(k)):w.Pi.getTargetData(v,x)})(r,d,qi(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,n?l:Ne.min(),n?c:Fe()))).next((p=>(YC(r,DA(e),p),{documents:p,Qs:c})))))}function YC(s,e,n){let r=s.Os.get(e)||Ne.min();n.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class c_{constructor(){this.activeTargetIds=UA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XC{constructor(){this.Mo=new c_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new c_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="ConnectivityMonitor";class h_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(u_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(u_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu=null;function wm(){return Hu===null?Hu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hu++,"0x"+Hu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",ZC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===ch?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,n,r,l,c){const d=wm(),p=this.zo(e,n.toUriEncodedString());ge(em,`Sending RPC '${e}' ${d}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:v}=new URL(p),x=Cr(v);return this.Jo(e,p,y,r,x).then((w=>(ge(em,`Received RPC '${e}' ${d}: `,w),w)),(w=>{throw bo(em,`RPC '${e}' ${d} failed with error: `,w,"url: ",p,"request:",r),w}))}Ho(e,n,r,l,c,d){return this.Go(e,n,r,l,c)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+No})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,n){const r=ZC[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class eI extends JC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,l,c){const d=wm();return new Promise(((p,y)=>{const v=new Nb;v.setWithCredentials(!0),v.listenOnce(Rb.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case Yu.NO_ERROR:const w=v.getResponseJson();ge(an,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),p(w);break;case Yu.TIMEOUT:ge(an,`RPC '${e}' ${d} timed out`),y(new xe(se.DEADLINE_EXCEEDED,"Request time out"));break;case Yu.HTTP_ERROR:const k=v.getStatus();if(ge(an,`RPC '${e}' ${d} failed with status:`,k,"response text:",v.getResponseText()),k>0){let L=v.getResponseJson();Array.isArray(L)&&(L=L[0]);const Q=L==null?void 0:L.error;if(Q&&Q.status&&Q.message){const ie=(function(de){const pe=de.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(pe)>=0?pe:se.UNKNOWN})(Q.status);y(new xe(ie,Q.message))}else y(new xe(se.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new xe(se.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{ge(an,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(l);ge(an,`RPC '${e}' ${d} sending request:`,l),v.send(n,"POST",x,r,15)}))}T_(e,n,r){const l=wm(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Db(),p=Ob(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,r),y.encodeInitMessageHeaders=!0;const x=c.join("");ge(an,`Creating RPC '${e}' stream ${l}: ${x}`,y);const w=d.createWebChannel(x,y);this.I_(w);let k=!1,L=!1;const Q=new WC({Yo:W=>{L?ge(an,`Not sending because RPC '${e}' stream ${l} is closed:`,W):(k||(ge(an,`Opening RPC '${e}' stream ${l} transport.`),w.open(),k=!0),ge(an,`RPC '${e}' stream ${l} sending:`,W),w.send(W))},Zo:()=>w.close()}),ie=(W,de,pe)=>{W.listen(de,(ae=>{try{pe(ae)}catch(ce){setTimeout((()=>{throw ce}),0)}}))};return ie(w,Vl.EventType.OPEN,(()=>{L||(ge(an,`RPC '${e}' stream ${l} transport opened.`),Q.o_())})),ie(w,Vl.EventType.CLOSE,(()=>{L||(L=!0,ge(an,`RPC '${e}' stream ${l} transport closed`),Q.a_(),this.E_(w))})),ie(w,Vl.EventType.ERROR,(W=>{L||(L=!0,bo(an,`RPC '${e}' stream ${l} transport errored. Name:`,W.name,"Message:",W.message),Q.a_(new xe(se.UNAVAILABLE,"The operation could not be completed")))})),ie(w,Vl.EventType.MESSAGE,(W=>{var de;if(!L){const pe=W.data[0];et(!!pe,16349);const ae=pe,ce=(ae==null?void 0:ae.error)||((de=ae[0])==null?void 0:de.error);if(ce){ge(an,`RPC '${e}' stream ${l} received error:`,ce);const te=ce.status;let oe=(function(A){const I=Vt[A];if(I!==void 0)return d1(I)})(te),C=ce.message;oe===void 0&&(oe=se.INTERNAL,C="Unknown error status: "+te+" with message "+ce.message),L=!0,Q.a_(new xe(oe,C)),w.close()}else ge(an,`RPC '${e}' stream ${l} received:`,pe),Q.u_(pe)}})),ie(p,kb.STAT_EVENT,(W=>{W.stat===fm.PROXY?ge(an,`RPC '${e}' stream ${l} detected buffering proxy`):W.stat===fm.NOPROXY&&ge(an,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(s){return new sC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,n-r);l>0&&ge("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="PersistentStream";class C1{constructor(e,n,r,l,c,d,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===se.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===n&&this.G_(r,l)}),(r=>{e((()=>{const l=new xe(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(d_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(d_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tI extends C1{constructor(e,n,r,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,l,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oC(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ne.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ne.min():d.readTime?Fi(d.readTime):Ne.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Tm(this.serializer),n.addTarget=(function(c,d){let p;const y=d.target;if(p=vm(y)?{documents:uC(c,y)}:{query:hC(c,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=g1(c,d.resumeToken);const v=bm(c,d.expectedCount);v!==null&&(p.expectedCount=v)}else if(d.snapshotVersion.compareTo(Ne.min())>0){p.readTime=gh(c,d.snapshotVersion.toTimestamp());const v=bm(c,d.expectedCount);v!==null&&(p.expectedCount=v)}return p})(this.serializer,e);const r=fC(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Tm(this.serializer),n.removeTarget=e,this.q_(n)}}class nI extends C1{constructor(e,n,r,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=cC(e.writeResults,e.commitTime),r=Fi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Tm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>lC(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{}class sI extends iI{constructor(e,n,r,l){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,xm(n,r),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new xe(se.UNKNOWN,c.toString())}))}Ho(e,n,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,xm(n,r),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xe(se.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class aI{constructor(e,n,r,l,c){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{ba(this)&&(ge(ya,"Restarting streams for network reachability change."),await(async function(y){const v=Oe(y);v.Ea.add(4),await gc(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Ph(v)})(this))}))})),this.Ra=new rI(r,l)}}async function Ph(s){if(ba(s))for(const e of s.da)await e(!0)}async function gc(s){for(const e of s.da)await e(!1)}function I1(s,e){const n=Oe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),hg(n)?ug(n):Oo(n).O_()&&cg(n,e))}function lg(s,e){const n=Oe(s),r=Oo(n);n.Ia.delete(e),r.O_()&&N1(n,e),n.Ia.size===0&&(r.O_()?r.L_():ba(n)&&n.Ra.set("Unknown"))}function cg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(s).Y_(e)}function N1(s,e){s.Va.Ue(e),Oo(s).Z_(e)}function ug(s){s.Va=new eC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Oo(s).start(),s.Ra.ua()}function hg(s){return ba(s)&&!Oo(s).x_()&&s.Ia.size>0}function ba(s){return Oe(s).Ea.size===0}function R1(s){s.Va=void 0}async function oI(s){s.Ra.set("Online")}async function lI(s){s.Ia.forEach(((e,n)=>{cg(s,e)}))}async function cI(s,e){R1(s),hg(s)?(s.Ra.ha(e),ug(s)):s.Ra.set("Unknown")}async function uI(s,e,n){if(s.Ra.set("Online"),e instanceof m1&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){ge(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yh(s,r)}else if(e instanceof Ju?s.Va.Ze(e):e instanceof f1?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ne.min()))try{const r=await w1(s.localStore);n.compareTo(r)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const x=c.Ia.get(v);x&&c.Ia.set(v,x.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,v)=>{const x=c.Ia.get(y);if(!x)return;c.Ia.set(y,x.withResumeToken(tn.EMPTY_BYTE_STRING,x.snapshotVersion)),N1(c,y);const w=new gr(x.target,y,v,x.sequenceNumber);cg(c,w)})),c.remoteSyncer.applyRemoteEvent(p)})(s,n)}catch(r){ge(ya,"Failed to raise snapshot:",r),await yh(s,r)}}async function yh(s,e,n){if(!ko(e))throw e;s.Ea.add(1),await gc(s),s.Ra.set("Offline"),n||(n=()=>w1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ge(ya,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Ph(s)}))}function k1(s,e){return e().catch((n=>yh(s,n,e)))}async function Uh(s){const e=Oe(s),n=wr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ym;for(;hI(e);)try{const l=await KC(e.localStore,r);if(l===null){e.Ta.length===0&&n.L_();break}r=l.batchId,dI(e,l)}catch(l){await yh(e,l)}O1(e)&&D1(e)}function hI(s){return ba(s)&&s.Ta.length<10}function dI(s,e){s.Ta.push(e);const n=wr(s);n.O_()&&n.X_&&n.ea(e.mutations)}function O1(s){return ba(s)&&!wr(s).x_()&&s.Ta.length>0}function D1(s){wr(s).start()}async function fI(s){wr(s).ra()}async function mI(s){const e=wr(s);for(const n of s.Ta)e.ea(n.mutations)}async function gI(s,e,n){const r=s.Ta.shift(),l=tg.from(r,e,n);await k1(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await Uh(s)}async function pI(s,e){e&&wr(s).X_&&await(async function(r,l){if((function(d){return ZA(d)&&d!==se.ABORTED})(l.code)){const c=r.Ta.shift();wr(r).B_(),await k1(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await Uh(r)}})(s,e),O1(s)&&D1(s)}async function f_(s,e){const n=Oe(s);n.asyncQueue.verifyOperationInProgress(),ge(ya,"RemoteStore received new credentials");const r=ba(n);n.Ea.add(3),await gc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ph(n)}async function yI(s,e){const n=Oe(s);e?(n.Ea.delete(2),await Ph(n)):e||(n.Ea.add(2),await gc(n),n.Ra.set("Unknown"))}function Oo(s){return s.ma||(s.ma=(function(n,r,l){const c=Oe(n);return c.sa(),new tI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:oI.bind(null,s),t_:lI.bind(null,s),r_:cI.bind(null,s),H_:uI.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),hg(s)?ug(s):s.Ra.set("Unknown")):(await s.ma.stop(),R1(s))}))),s.ma}function wr(s){return s.fa||(s.fa=(function(n,r,l){const c=Oe(n);return c.sa(),new nI(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:fI.bind(null,s),r_:pI.bind(null,s),ta:mI.bind(null,s),na:gI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await Uh(s)):(await s.fa.stop(),s.Ta.length>0&&(ge(ya,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n,r,l,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,l,c){const d=Date.now()+r,p=new dg(e,n,d,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(s,e){if(Ss("AsyncQueue",`${e}: ${s}`),ko(s))return new xe(se.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=Ll(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const l=n.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.ga=new xt(Te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class wo{constructor(e,n,r,l,c,d,p,y,v){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,r,l,c){const d=[];return n.forEach((p=>{d.push({type:0,doc:p})})),new wo(e,n,_o.emptySet(n),d,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++)if(n[l].type!==r[l].type||!n[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _I{constructor(){this.queries=g_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const l=Oe(n),c=l.queries;l.queries=g_(),c.forEach(((d,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new xe(se.ABORTED,"Firestore shutting down"))}}function g_(){return new _a((s=>Wb(s)),Oh)}async function bI(s,e){const n=Oe(s);let r=3;const l=e.query;let c=n.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new vI,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await n.onListen(l,!0);break;case 1:c.wa=await n.onListen(l,!1);break;case 2:await n.onFirstRemoteStoreListen(l)}}catch(d){const p=fg(d,`Initialization of query '${ho(e.query)}' failed`);return void e.onError(p)}n.queries.set(l,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&mg(n)}async function xI(s,e){const n=Oe(s),r=e.query;let l=3;const c=n.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function EI(s,e){const n=Oe(s);let r=!1;for(const l of e){const c=l.query,d=n.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(r=!0);d.wa=l}}r&&mg(n)}function TI(s,e,n){const r=Oe(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(n);r.queries.delete(e)}function mg(s){s.Ca.forEach((e=>{e.next()}))}var Am,p_;(p_=Am||(Am={})).Ma="default",p_.Cache="cache";class SI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Am.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.key=e}}class j1{constructor(e){this.key=e}}class wI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=e1(e),this.tu=new _o(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new m_,l=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,w)=>{const k=l.get(x),L=Dh(this.query,w)?w:null,Q=!!k&&this.mutatedKeys.has(k.key),ie=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let W=!1;k&&L?k.data.isEqual(L.data)?Q!==ie&&(r.track({type:3,doc:L}),W=!0):this.su(k,L)||(r.track({type:2,doc:L}),W=!0,(y&&this.eu(L,y)>0||v&&this.eu(L,v)<0)&&(p=!0)):!k&&L?(r.track({type:0,doc:L}),W=!0):k&&!L&&(r.track({type:1,doc:k}),W=!0,(y||v)&&(p=!0)),W&&(L?(d=d.add(L),c=ie?c.add(x):c.delete(x)):(d=d.delete(x),c=c.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),c=c.delete(x.key),r.track({type:1,doc:x})}return{tu:d,iu:r,Cs:p,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,w)=>(function(L,Q){const ie=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:W})}};return ie(L)-ie(Q)})(x.type,w.type)||this.eu(x.doc,w.doc))),this.ou(r),l=l??!1;const p=n&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,v=y!==this.Za;return this.Za=y,d.length!==0||v?{snapshot:new wo(this.query,e.tu,c,d,e.mutatedKeys,y===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new m_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new j1(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new M1(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gg="SyncEngine";class AI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class CI{constructor(e){this.key=e,this.hu=!1}}class II{constructor(e,n,r,l,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new _a((p=>Wb(p)),Oh),this.Iu=new Map,this.Eu=new Set,this.du=new xt(Te.comparator),this.Au=new Map,this.Ru=new sg,this.Vu={},this.mu=new Map,this.fu=So.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function NI(s,e,n=!0){const r=B1(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await V1(r,e,n,!0),l}async function RI(s,e){const n=B1(s);await V1(n,e,!0,!1)}async function V1(s,e,n,r){const l=await QC(s.localStore,qi(e)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,n);let p;return r&&(p=await kI(s,e,c,d==="current",l.resumeToken)),s.isPrimaryClient&&n&&I1(s.remoteStore,l),p}async function kI(s,e,n,r,l){s.pu=(w,k,L)=>(async function(ie,W,de,pe){let ae=W.view.ru(de);ae.Cs&&(ae=await l_(ie.localStore,W.query,!1).then((({documents:C})=>W.view.ru(C,ae))));const ce=pe&&pe.targetChanges.get(W.targetId),te=pe&&pe.targetMismatches.get(W.targetId)!=null,oe=W.view.applyChanges(ae,ie.isPrimaryClient,ce,te);return v_(ie,W.targetId,oe.au),oe.snapshot})(s,w,k,L);const c=await l_(s.localStore,e,!0),d=new wI(e,c.Qs),p=d.ru(c.documents),y=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",l),v=d.applyChanges(p,s.isPrimaryClient,y);v_(s,n,v.au);const x=new AI(e,n,d);return s.Tu.set(e,x),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),v.snapshot}async function OI(s,e,n){const r=Oe(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((d=>!Oh(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Sm(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),n&&lg(r.remoteStore,l.targetId),Cm(r,l.targetId)})).catch(Ro)):(Cm(r,l.targetId),await Sm(r.localStore,l.targetId,!0))}async function DI(s,e){const n=Oe(s),r=n.Tu.get(e),l=n.Iu.get(r.targetId);n.isPrimaryClient&&l.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),lg(n.remoteStore,r.targetId))}async function MI(s,e,n){const r=BI(s);try{const l=await(function(d,p){const y=Oe(d),v=mt.now(),x=p.reduce(((L,Q)=>L.add(Q.key)),Fe());let w,k;return y.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let Q=ws(),ie=Fe();return y.Ns.getEntries(L,x).next((W=>{Q=W,Q.forEach(((de,pe)=>{pe.isValidDocument()||(ie=ie.add(de))}))})).next((()=>y.localDocuments.getOverlayedDocuments(L,Q))).next((W=>{w=W;const de=[];for(const pe of p){const ae=KA(pe,w.get(pe.key).overlayedDocument);ae!=null&&de.push(new kr(pe.key,ae,Kb(ae.value.mapValue),Hi.exists(!0)))}return y.mutationQueue.addMutationBatch(L,v,de,p)})).next((W=>{k=W;const de=W.applyToLocalDocumentSet(w,ie);return y.documentOverlayCache.saveOverlays(L,W.batchId,de)}))})).then((()=>({batchId:k.batchId,changes:n1(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,p,y){let v=d.Vu[d.currentUser.toKey()];v||(v=new xt(He)),v=v.insert(p,y),d.Vu[d.currentUser.toKey()]=v})(r,l.batchId,n),await pc(r,l.changes),await Uh(r.remoteStore)}catch(l){const c=fg(l,"Failed to persist write");n.reject(c)}}async function L1(s,e){const n=Oe(s);try{const r=await FC(n.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=n.Au.get(c);d&&(et(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?et(d.hu,14607):l.removedDocuments.size>0&&(et(d.hu,42227),d.hu=!1))})),await pc(n,r,e)}catch(r){await Ro(r)}}function y_(s,e,n){const r=Oe(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const l=[];r.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const y=Oe(d);y.onlineState=p;let v=!1;y.queries.forEach(((x,w)=>{for(const k of w.Sa)k.va(p)&&(v=!0)})),v&&mg(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jI(s,e,n){const r=Oe(s);r.sharedClientState.updateQueryState(e,"rejected",n);const l=r.Au.get(e),c=l&&l.key;if(c){let d=new xt(Te.comparator);d=d.insert(c,ln.newNoDocument(c,Ne.min()));const p=Fe().add(c),y=new Vh(Ne.min(),new Map,new xt(He),d,p);await L1(r,y),r.du=r.du.remove(c),r.Au.delete(e),pg(r)}else await Sm(r.localStore,e,!1).then((()=>Cm(r,e,n))).catch(Ro)}async function VI(s,e){const n=Oe(s),r=e.batch.batchId;try{const l=await HC(n.localStore,e);U1(n,r,null),P1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pc(n,l)}catch(l){await Ro(l)}}async function LI(s,e,n){const r=Oe(s);try{const l=await(function(d,p){const y=Oe(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let x;return y.mutationQueue.lookupMutationBatch(v,p).next((w=>(et(w!==null,37113),x=w.keys(),y.mutationQueue.removeMutationBatch(v,w)))).next((()=>y.mutationQueue.performConsistencyCheck(v))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(v,x,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x))).next((()=>y.localDocuments.getDocuments(v,x)))}))})(r.localStore,e);U1(r,e,n),P1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pc(r,l)}catch(l){await Ro(l)}}function P1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function U1(s,e,n){const r=Oe(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(n?c.reject(n):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function Cm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||z1(s,r)}))}function z1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(lg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),pg(s))}function v_(s,e,n){for(const r of n)r instanceof M1?(s.Ru.addReference(r.key,e),PI(s,r)):r instanceof j1?(ge(gg,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||z1(s,r.key)):Ce(19791,{wu:r})}function PI(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(ge(gg,"New document in limbo: "+n),s.Eu.add(r),pg(s))}function pg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Te(bt.fromString(e)),r=s.fu.next();s.Au.set(r,new CI(n)),s.du=s.du.insert(n,r),I1(s.remoteStore,new gr(qi(Wm(n.path)),r,"TargetPurposeLimboResolution",Ih.ce))}}async function pc(s,e,n){const r=Oe(s),l=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{d.push(r.pu(y,e,n).then((v=>{var x;if((v||n)&&r.isPrimaryClient){const w=v?!v.fromCache:(x=n==null?void 0:n.targetChanges.get(y.targetId))==null?void 0:x.current;r.sharedClientState.updateQueryState(y.targetId,w?"current":"not-current")}if(v){l.push(v);const w=ag.As(y.targetId,v);c.push(w)}})))})),await Promise.all(d),r.Pu.H_(l),await(async function(y,v){const x=Oe(y);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ne.forEach(v,(k=>ne.forEach(k.Es,(L=>x.persistence.referenceDelegate.addReference(w,k.targetId,L))).next((()=>ne.forEach(k.ds,(L=>x.persistence.referenceDelegate.removeReference(w,k.targetId,L)))))))))}catch(w){if(!ko(w))throw w;ge(og,"Failed to update sequence numbers: "+w)}for(const w of v){const k=w.targetId;if(!w.fromCache){const L=x.Ms.get(k),Q=L.snapshotVersion,ie=L.withLastLimboFreeSnapshotVersion(Q);x.Ms=x.Ms.insert(k,ie)}}})(r.localStore,c))}async function UI(s,e){const n=Oe(s);if(!n.currentUser.isEqual(e)){ge(gg,"User change. New user:",e.toKey());const r=await S1(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new xe(se.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pc(n,r.Ls)}}function zI(s,e){const n=Oe(s),r=n.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let l=Fe();const c=n.Iu.get(e);if(!c)return l;for(const d of c){const p=n.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function B1(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=L1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jI.bind(null,e),e.Pu.H_=EI.bind(null,e.eventManager),e.Pu.yu=TI.bind(null,e.eventManager),e}function BI(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LI.bind(null,e),e}class vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return qC(this.persistence,new UC,e.initialUser,this.serializer)}Cu(e){return new T1(rg.mi,this.serializer)}Du(e){return new XC}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vh.provider={build:()=>new vh};class qI extends vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof ph,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new T1((r=>ph.mi(r,n)),this.serializer)}}class Im{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>y_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=UI.bind(null,this.syncEngine),await yI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _I})()}createDatastore(e){const n=Lh(e.databaseInfo.databaseId),r=(function(c){return new eI(c)})(e.databaseInfo);return(function(c,d,p,y){return new sI(c,d,p,y)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,l,c,d,p){return new aI(r,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>y_(this.syncEngine,n,0)),(function(){return h_.v()?new h_:new $C})())}createSyncEngine(e,n){return(function(l,c,d,p,y,v,x){const w=new II(l,c,d,p,y,v);return x&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(l){const c=Oe(l);ge(ya,"RemoteStore shutting down."),c.Ea.add(5),await gc(c),c.Aa.shutdown(),c.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Im.provider={build:()=>new Im};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="FirestoreClient";class FI{constructor(e,n,r,l,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=l,this.user=on.UNAUTHENTICATED,this.clientId=Km.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{ge(Ar,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ge(Ar,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fg(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function nm(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Ar,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await S1(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function __(s,e){s.asyncQueue.verifyOperationInProgress();const n=await GI(s);ge(Ar,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((r=>f_(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>f_(e.remoteStore,l))),s._onlineComponents=e}async function GI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Ar,"Using user provided OfflineComponentProvider");try{await nm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(l){return l.name==="FirebaseError"?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),await nm(s,new vh)}}else ge(Ar,"Using default OfflineComponentProvider"),await nm(s,new qI(void 0));return s._offlineComponents}async function q1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Ar,"Using user provided OnlineComponentProvider"),await __(s,s._uninitializedComponentsProvider._online)):(ge(Ar,"Using default OnlineComponentProvider"),await __(s,new Im))),s._onlineComponents}function KI(s){return q1(s).then((e=>e.syncEngine))}async function QI(s){const e=await q1(s),n=e.eventManager;return n.onListen=NI.bind(null,e.syncEngine),n.onUnlisten=OI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=RI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DI.bind(null,e.syncEngine),n}function YI(s,e,n={}){const r=new _r;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,y,v){const x=new HI({next:k=>{x.Nu(),d.enqueueAndForget((()=>xI(c,w)));const L=k.docs.has(p);!L&&k.fromCache?v.reject(new xe(se.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&k.fromCache&&y&&y.source==="server"?v.reject(new xe(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(k)},error:k=>v.reject(k)}),w=new SI(Wm(p.path),x,{includeMetadataChanges:!0,qa:!0});return bI(c,w)})(await QI(s),s.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firestore.googleapis.com",x_=!0;class E_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F1,this.ssl=x_}else this.host=e.host,this.ssl=e.ssl??x_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=E1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EC)throw new xe(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H1(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xe(se.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yg{constructor(e,n,r,l){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Yw;switch(r.type){case"firstParty":return new Jw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=b_.get(n);r&&(ge("ComponentProvider","Removing Datastore"),b_.delete(n),r.terminate())})(this),Promise.resolve()}}function XI(s,e,n,r={}){var v;s=pa(s,yg);const l=Cr(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${n}`;l&&(Om(`https://${p}`),Dm("Firestore",!0)),c.host!==F1&&c.host!==p&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!ha(y,d)&&(s._setSettings(y),r.mockUserToken)){let x,w;if(typeof r.mockUserToken=="string")x=r.mockUserToken,w=on.MOCK_USER;else{x=aT(r.mockUserToken,(v=s._app)==null?void 0:v.options.projectId);const k=r.mockUserToken.sub||r.mockUserToken.user_id;if(!k)throw new xe(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new on(k)}s._authCredentials=new Xw(new jb(x,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vg(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(dc(n,Bt._jsonSchema))return new Bt(e,r||null,new Te(bt.fromString(n.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Lt("string",Bt._jsonSchemaVersion),referencePath:Lt("string")};class rc extends vg{constructor(e,n,r){super(e,n,Wm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Te(e))}withConverter(e){return new rc(this.firestore,e,this._path)}}function Ul(s,e,...n){if(s=Ht(s),arguments.length===1&&(e=Km.newId()),sA("doc","path",e),s instanceof yg){const r=bt.fromString(e,...n);return Vv(r),new Bt(s,null,new Te(r))}{if(!(s instanceof Bt||s instanceof rc))throw new xe(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(bt.fromString(e,...n));return Vv(r),new Bt(s.firestore,s instanceof rc?s.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="AsyncQueue";class S_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A1(this,"async_queue_retry"),this._c=()=>{const r=tm();r&&ge(T_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=tm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=tm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;ge(T_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",w_(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const l=dg.createAndSchedule(this,e,n,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ce(47125,{Pc:w_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function w_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class zh extends yg{constructor(e,n,r,l){super(e,n,r,l),this.type="firestore",this._queue=new S_,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S_(e),this._firestoreClient=void 0,await e}}}function $I(s,e){const n=typeof s=="object"?s:Vm(),r=typeof s=="string"?s:ch,l=Sh(n,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=z_("firestore");c&&XI(l,...c)}return l}function G1(s){if(s._terminated)throw new xe(se.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||ZI(s),s._firestoreClient}function ZI(s){var r,l,c;const e=s._freezeSettings(),n=(function(p,y,v,x){return new pA(p,y,v,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,H1(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new FI(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(tn.fromBase64String(e))}catch(n){throw new xe(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ai._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dc(e,ai._jsonSchema))return ai.fromBase64String(e.bytes)}}ai._jsonSchemaVersion="firestore/bytes/1.0",ai._jsonSchema={type:Lt("string",ai._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(dc(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Lt("string",Gi._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dc(e,Ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ki(e.vectorValues);throw new xe(se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:Lt("string",Ki._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=/^__.*__$/;class WI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new fc(e,this.data,n,this.fieldTransforms)}}class K1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Q1(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:s})}}class bg{constructor(e,n,r,l,c,d){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var l;const n=(l=this.path)==null?void 0:l.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _h(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Q1(this.Ac)&&JI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class eN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lh(e)}Cc(e,n,r,l=!1){return new bg({Ac:e,methodName:n,Dc:r,path:en.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Y1(s){const e=s._freezeSettings(),n=Lh(s._databaseId);return new eN(s._databaseId,!!e.ignoreUndefinedProperties,n)}function tN(s,e,n,r,l,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,n,l);xg("Data must be an object, but it was:",d,r);const p=X1(r,d);let y,v;if(c.merge)y=new zn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const x=[];for(const w of c.mergeFields){const k=Nm(e,w,n);if(!d.contains(k))throw new xe(se.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);Z1(x,k)||x.push(k)}y=new zn(x),v=d.fieldTransforms.filter((w=>y.covers(w.field)))}else y=null,v=d.fieldTransforms;return new WI(new wn(p),y,v)}class qh extends _g{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qh}}function nN(s,e,n,r){const l=s.Cc(1,e,n);xg("Data must be an object, but it was:",l,r);const c=[],d=wn.empty();Rr(r,((y,v)=>{const x=Eg(e,y,n);v=Ht(v);const w=l.yc(x);if(v instanceof qh)c.push(x);else{const k=Hh(v,w);k!=null&&(c.push(x),d.set(x,k))}}));const p=new zn(c);return new K1(d,p,l.fieldTransforms)}function iN(s,e,n,r,l,c){const d=s.Cc(1,e,n),p=[Nm(e,r,n)],y=[l];if(c.length%2!=0)throw new xe(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<c.length;k+=2)p.push(Nm(e,c[k])),y.push(c[k+1]);const v=[],x=wn.empty();for(let k=p.length-1;k>=0;--k)if(!Z1(v,p[k])){const L=p[k];let Q=y[k];Q=Ht(Q);const ie=d.yc(L);if(Q instanceof qh)v.push(L);else{const W=Hh(Q,ie);W!=null&&(v.push(L),x.set(L,W))}}const w=new zn(v);return new K1(x,w,d.fieldTransforms)}function Hh(s,e){if($1(s=Ht(s)))return xg("Unsupported field value:",e,s),X1(s,e);if(s instanceof _g)return(function(r,l){if(!Q1(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let d=0;for(const p of r){let y=Hh(p,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zA(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=mt.fromDate(r);return{timestampValue:gh(l.serializer,c)}}if(r instanceof mt){const c=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gh(l.serializer,c)}}if(r instanceof Gi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:g1(l.serializer,r._byteString)};if(r instanceof Bt){const c=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ig(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Ki)return(function(d,p){return{mapValue:{fields:{[Fb]:{stringValue:Gb},[uh]:{arrayValue:{values:d.toArray().map((v=>{if(typeof v!="number")throw p.Sc("VectorValues must only contain numeric values.");return eg(p.serializer,v)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Qm(r)}`)})(s,e)}function X1(s,e){const n={};return Pb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(s,((r,l)=>{const c=Hh(l,e.mc(r));c!=null&&(n[r]=c)})),{mapValue:{fields:n}}}function $1(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof mt||s instanceof Gi||s instanceof ai||s instanceof Bt||s instanceof _g||s instanceof Ki)}function xg(s,e,n){if(!$1(n)||!Vb(n)){const r=Qm(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function Nm(s,e,n){if((e=Ht(e))instanceof Bh)return e._internalPath;if(typeof e=="string")return Eg(s,e);throw _h("Field path arguments must be of type string or ",s,!1,void 0,n)}const sN=new RegExp("[~\\*/\\[\\]]");function Eg(s,e,n){if(e.search(sN)>=0)throw _h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Bh(...e.split("."))._internalPath}catch{throw _h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function _h(s,e,n,r,l){const c=r&&!r.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${r}`),d&&(y+=` in document ${l}`),y+=")"),new xe(se.INVALID_ARGUMENT,p+s+y)}function Z1(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,r,l,c){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(W1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rN extends J1{data(){return super.data()}}function W1(s,e){return typeof e=="string"?Eg(s,e):e instanceof Bh?e._internalPath:e._delegate._internalPath}class aN{convertValue(e,n="none"){switch(Sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rr(e,((l,c)=>{r[l]=this.convertValue(c,n)})),r}convertVectorValue(e){var r,l,c;const n=(c=(l=(r=e.fields)==null?void 0:r[uh].arrayValue)==null?void 0:l.values)==null?void 0:c.map((d=>Nt(d.doubleValue)));return new Ki(n)}convertGeoPoint(e){return new Gi(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const n=Er(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=bt.fromString(e);et(x1(r),9688,{name:e});const l=new tc(r.get(1),r.get(3)),c=new Te(r.popFirst(5));return l.isEqual(n)||Ss(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(s,e,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,r}class zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ua extends J1{constructor(e,n,r,l,c,d){super(e,n,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(W1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ua._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ua._jsonSchemaVersion="firestore/documentSnapshot/1.0",ua._jsonSchema={type:Lt("string",ua._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Wu extends ua{data(e={}){return super.data(e)}}class Xl{constructor(e,n,r,l){this._firestore=e,this._userDataWriter=n,this._snapshot=l,this.metadata=new zl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Wu(this._firestore,this._userDataWriter,r.key,r,new zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const y=new Wu(l._firestore,l._userDataWriter,p.doc.key,p.doc,new zl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Wu(l._firestore,l._userDataWriter,p.doc.key,p.doc,new zl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let v=-1,x=-1;return p.type!==0&&(v=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),x=d.indexOf(p.doc.key)),{type:lN(p.type),doc:y,oldIndex:v,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Km.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(s){s=pa(s,Bt);const e=pa(s.firestore,zh);return YI(G1(e),s._key).then((n=>hN(e,s,n)))}Xl._jsonSchemaVersion="firestore/querySnapshot/1.0",Xl._jsonSchema={type:Lt("string",Xl._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class uN extends aN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function ex(s,e,n){s=pa(s,Bt);const r=pa(s.firestore,zh),l=oN(s.converter,e,n);return tx(r,[tN(Y1(r),"setDoc",s._key,l,s.converter!==null,n).toMutation(s._key,Hi.none())])}function A_(s,e,n,...r){s=pa(s,Bt);const l=pa(s.firestore,zh),c=Y1(l);let d;return d=typeof(e=Ht(e))=="string"||e instanceof Bh?iN(c,"updateDoc",s._key,e,n,r):nN(c,"updateDoc",s._key,e),tx(l,[d.toMutation(s._key,Hi.exists(!0))])}function tx(s,e){return(function(r,l){const c=new _r;return r.asyncQueue.enqueueAndForget((async()=>MI(await KI(r),l,c))),c.promise})(G1(s),e)}function hN(s,e,n){const r=n.docs.get(e._key),l=new uN(s);return new ua(s,l,e._key,r,new zl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(l){No=l})(Co),da(new br("firestore",((r,{instanceIdentifier:l,options:c})=>{const d=r.getProvider("app").getImmediate(),p=new zh(new $w(r.getProvider("auth-internal")),new Ww(d,r.getProvider("app-check-internal")),(function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new xe(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(v.options.projectId,x)})(d,l),d);return c={useFetchStreams:n,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),bs(Ov,Dv,e),bs(Ov,Dv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="type.googleapis.com/google.protobuf.Int64Value",fN="type.googleapis.com/google.protobuf.UInt64Value";function nx(s,e){const n={};for(const r in s)s.hasOwnProperty(r)&&(n[r]=e(s[r]));return n}function bh(s){if(s==null)return null;if(s instanceof Number&&(s=s.valueOf()),typeof s=="number"&&isFinite(s)||s===!0||s===!1||Object.prototype.toString.call(s)==="[object String]")return s;if(s instanceof Date)return s.toISOString();if(Array.isArray(s))return s.map(e=>bh(e));if(typeof s=="function"||typeof s=="object")return nx(s,e=>bh(e));throw new Error("Data cannot be encoded in JSON: "+s)}function Ao(s){if(s==null)return s;if(s["@type"])switch(s["@type"]){case dN:case fN:{const e=Number(s.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+s);return e}default:throw new Error("Data cannot be decoded from JSON: "+s)}return Array.isArray(s)?s.map(e=>Ao(e)):typeof s=="function"||typeof s=="object"?nx(s,e=>Ao(e)):s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class An extends Xi{constructor(e,n,r){super(`${Tg}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,An.prototype)}}function mN(s){if(s>=200&&s<300)return"ok";switch(s){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function xh(s,e){let n=mN(s),r=n,l;try{const c=e&&e.error;if(c){const d=c.status;if(typeof d=="string"){if(!C_[d])return new An("internal","internal");n=C_[d],r=d}const p=c.message;typeof p=="string"&&(r=p),l=c.details,l!==void 0&&(l=Ao(l))}}catch{}return n==="ok"?null:new An(n,r,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r,l){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Un(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(c=>this.auth=c,()=>{}),this.messaging||r.get().then(c=>this.messaging=c,()=>{}),this.appCheck||l==null||l.get().then(c=>this.appCheck=c,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),l=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:l}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="us-central1",pN=/^data: (.*?)(?:\n|$)/;function yN(s){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new An("deadline-exceeded","deadline-exceeded"))},s)}),cancel:()=>{e&&clearTimeout(e)}}}class vN{constructor(e,n,r,l,c=Rm,d=(...p)=>fetch(...p)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new gN(e,n,r,l),this.cancelAllRequests=new Promise(p=>{this.deleteService=()=>Promise.resolve(p())});try{const p=new URL(c);this.customDomain=p.origin+(p.pathname==="/"?"":p.pathname),this.region=Rm}catch{this.customDomain=null,this.region=c}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function _N(s,e,n){const r=Cr(e);s.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Om(s.emulatorOrigin+"/backends"),Dm("Functions",!0))}function bN(s,e,n){const r=l=>EN(s,e,l,{});return r.stream=(l,c)=>SN(s,e,l,c),r}function ix(s){return s.emulatorOrigin&&Cr(s.emulatorOrigin)?"include":void 0}async function xN(s,e,n,r,l){n["Content-Type"]="application/json";let c;try{c=await r(s,{method:"POST",body:JSON.stringify(e),headers:n,credentials:ix(l)})}catch{return{status:0,json:null}}let d=null;try{d=await c.json()}catch{}return{status:c.status,json:d}}async function sx(s,e){const n={},r=await s.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function EN(s,e,n,r){const l=s._url(e);return TN(s,l,n,r)}async function TN(s,e,n,r){n=bh(n);const l={data:n},c=await sx(s,r),d=r.timeout||7e4,p=yN(d),y=await Promise.race([xN(e,l,c,s.fetchImpl,s),p.promise,s.cancelAllRequests]);if(p.cancel(),!y)throw new An("cancelled","Firebase Functions instance was deleted.");const v=xh(y.status,y.json);if(v)throw v;if(!y.json)throw new An("internal","Response is not valid JSON object.");let x=y.json.data;if(typeof x>"u"&&(x=y.json.result),typeof x>"u")throw new An("internal","Response is missing data field.");return{data:Ao(x)}}function SN(s,e,n,r){const l=s._url(e);return wN(s,l,n,r||{})}async function wN(s,e,n,r){var k;n=bh(n);const l={data:n},c=await sx(s,r);c["Content-Type"]="application/json",c.Accept="text/event-stream";let d;try{d=await s.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:r==null?void 0:r.signal,credentials:ix(s)})}catch(L){if(L instanceof Error&&L.name==="AbortError"){const ie=new An("cancelled","Request was cancelled.");return{data:Promise.reject(ie),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(ie)}}}}}}const Q=xh(0,null);return{data:Promise.reject(Q),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(Q)}}}}}}let p,y;const v=new Promise((L,Q)=>{p=L,y=Q});(k=r==null?void 0:r.signal)==null||k.addEventListener("abort",()=>{const L=new An("cancelled","Request was cancelled.");y(L)});const x=d.body.getReader(),w=AN(x,p,y,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const L=w.getReader();return{async next(){const{value:Q,done:ie}=await L.read();return{value:Q,done:ie}},async return(){return await L.cancel(),{done:!0,value:void 0}}}}},data:v}}function AN(s,e,n,r){const l=(d,p)=>{const y=d.match(pN);if(!y)return;const v=y[1];try{const x=JSON.parse(v);if("result"in x){e(Ao(x.result));return}if("message"in x){p.enqueue(Ao(x.message));return}if("error"in x){const w=xh(0,x);p.error(w),n(w);return}}catch(x){if(x instanceof An){p.error(x),n(x);return}}},c=new TextDecoder;return new ReadableStream({start(d){let p="";return y();async function y(){if(r!=null&&r.aborted){const v=new An("cancelled","Request was cancelled");return d.error(v),n(v),Promise.resolve()}try{const{value:v,done:x}=await s.read();if(x){p.trim()&&l(p.trim(),d),d.close();return}if(r!=null&&r.aborted){const k=new An("cancelled","Request was cancelled");d.error(k),n(k),await s.cancel();return}p+=c.decode(v,{stream:!0});const w=p.split(`
`);p=w.pop()||"";for(const k of w)k.trim()&&l(k.trim(),d);return y()}catch(v){const x=v instanceof An?v:xh(0,null);d.error(x),n(x)}}},cancel(){return s.cancel()}})}const I_="@firebase/functions",N_="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="auth-internal",IN="app-check-internal",NN="messaging-internal";function RN(s){const e=(n,{instanceIdentifier:r})=>{const l=n.getProvider("app").getImmediate(),c=n.getProvider(CN),d=n.getProvider(NN),p=n.getProvider(IN);return new vN(l,c,d,p,r)};da(new br(Tg,e,"PUBLIC").setMultipleInstances(!0)),bs(I_,N_,s),bs(I_,N_,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kN(s=Vm(),e=Rm){const r=Sh(Ht(s),Tg).getImmediate({identifier:e}),l=z_("functions");return l&&ON(r,...l),r}function ON(s,e,n){_N(Ht(s),e,n)}function Bn(s,e,n){return bN(Ht(s),e)}RN();const DN={apiKey:"AIzaSyC9jWwGBOw0hRqdYdurZHrYV13MI-PXN1Q",authDomain:"ali-app-cc572.firebaseapp.com",projectId:"ali-app-cc572",storageBucket:"ali-app-cc572.firebasestorage.app",messagingSenderId:"587106321563",appId:"1:587106321563:web:4719624a87640d2df7723e",measurementId:"G-KY4N2RC4YP"},Sg=G_(DN),Eh=Kw(Sg),Bl=$I(Sg),qn=kN(Sg),MN=async(s,e)=>{const r=(await RS(Eh,s.email,e)).user,l={...s,id:r.uid,integrations:M_};await ex(Ul(Bl,"users",r.uid),l)},jN=async(s,e)=>{await kS(Eh,s,e)},VN=()=>{const[s,e]=re.useState("login"),[n,r]=re.useState(1),[l,c]=re.useState(null),[d,p]=re.useState(!1),[y,v]=re.useState({email:"test@example.com",password:"password123",name:"",surname:"",age:"",sex:"Male",job:"",industry:"Technology",education:"Bachelor's Degree",confirmPassword:"",companySize:"1-10 employees",websiteURL:"",promotionOffers:[{type:"product",name:""}],competitors:[{name:"",website:""}]}),x=S=>{v({...y,[S.target.name]:S.target.value})},w=(S,A,I)=>{const N=[...y.competitors];N[S][A]=I,v({...y,competitors:N})},k=()=>{y.competitors.length<3&&v(S=>({...S,competitors:[...S.competitors,{name:"",website:""}]}))},L=S=>{v(A=>({...A,competitors:A.competitors.filter((I,N)=>N!==S)}))},Q=(S,A)=>{const I=[...y.promotionOffers];I[S].name=A,v({...y,promotionOffers:I})},ie=S=>{v(A=>({...A,promotionOffers:[...A.promotionOffers,{type:S,name:""}]}))},W=S=>{v(A=>({...A,promotionOffers:A.promotionOffers.filter((I,N)=>N!==S)}))},de=S=>{if(S.preventDefault(),c(null),n===1&&y.password!==y.confirmPassword){c("Passwords do not match.");return}n<3?r(A=>A+1):pe(S)},pe=async S=>{S.preventDefault(),c(null),p(!0);try{if(s==="login")await jN(y.email,y.password);else if(s==="register"){if(y.password!==y.confirmPassword)throw new Error("Passwords do not match.");const A={email:y.email,name:y.name,surname:y.surname,age:parseInt(y.age,10),sex:y.sex,job:y.job,industry:y.industry,education:y.education,companySize:y.companySize,websiteURL:y.websiteURL,promotionOffers:y.promotionOffers.filter(I=>I.name.trim()!==""),competitors:y.competitors.filter(I=>I.name.trim()!=="")};await MN(A,y.password)}else s==="forgot"&&(console.log("Password reset requested for:",y.email),e("confirm"))}catch(A){c(A instanceof Error?A.message:"An unknown error occurred.")}finally{p(!1)}},ae="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400",ce="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",te=({step:S,title:A,active:I})=>m.jsxs("div",{className:`flex items-center ${I?"text-indigo-600 dark:text-indigo-400":"text-gray-400 dark:text-gray-500"}`,children:[m.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${I?"border-indigo-600 dark:border-indigo-400":"border-gray-400 dark:border-gray-500"}`,children:S}),m.jsx("span",{className:`ml-2 font-semibold ${I?"":"hidden sm:inline"}`,children:A})]}),oe=()=>{const S=y.promotionOffers.filter(I=>I.type==="product"),A=y.promotionOffers.filter(I=>I.type==="service");return m.jsxs("form",{onSubmit:de,children:[m.jsxs("div",{className:"mb-6 flex justify-around border-b border-gray-200 dark:border-gray-700 pb-4",children:[m.jsx(te,{step:1,title:"Your Profile",active:n>=1}),m.jsx(te,{step:2,title:"Your Offer",active:n>=2}),m.jsx(te,{step:3,title:"Competition",active:n>=3})]}),n===1&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("input",{type:"email",name:"email",value:y.email,onChange:x,placeholder:"Email",required:!0,className:ae}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:ce,children:"Name"}),m.jsx("input",{type:"text",name:"name",value:y.name,onChange:x,placeholder:"Name",required:!0,className:ae})]}),m.jsxs("div",{children:[m.jsx("label",{className:ce,children:"Surname"}),m.jsx("input",{type:"text",name:"surname",value:y.surname,onChange:x,placeholder:"Surname",required:!0,className:ae})]})]}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:ce,children:"Age"}),m.jsx("input",{type:"number",name:"age",value:y.age,onChange:x,placeholder:"Age",required:!0,className:ae})]}),m.jsxs("div",{children:[m.jsx("label",{className:ce,children:"Sex"}),m.jsxs("select",{name:"sex",value:y.sex,onChange:x,className:ae,children:[m.jsx("option",{children:"Male"}),m.jsx("option",{children:"Female"}),m.jsx("option",{children:"Other"})]})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:ce,children:"Job Title"}),m.jsx("input",{type:"text",name:"job",value:y.job,onChange:x,placeholder:"e.g. Marketing Manager",required:!0,className:ae})]}),m.jsxs("div",{children:[m.jsx("label",{className:ce,children:"Industry"}),m.jsx("select",{name:"industry",value:y.industry,onChange:x,className:ae,children:j_.map(I=>m.jsx("option",{children:I},I))})]}),m.jsx("div",{children:m.jsx("input",{type:"password",name:"password",value:y.password,onChange:x,placeholder:"Password",required:!0,className:ae})}),m.jsx("div",{children:m.jsx("input",{type:"password",name:"confirmPassword",value:y.confirmPassword,onChange:x,placeholder:"Confirm Password",required:!0,className:ae})})]}),n===2&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:ce,htmlFor:"websiteURL",children:"Your business website URL (optional)"}),m.jsx("input",{id:"websiteURL",type:"url",name:"websiteURL",value:y.websiteURL,onChange:x,placeholder:"https://example.com",className:ae})]}),m.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[m.jsx("h4",{className:"font-semibold",children:"Products"}),y.promotionOffers.map((I,N)=>I.type==="product"&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"text",value:I.name,onChange:j=>Q(N,j.target.value),placeholder:`Product ${S.indexOf(I)+1}`,className:ae}),m.jsx("button",{type:"button",onClick:()=>W(N),className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900 rounded-full",children:""})]},N)),m.jsx("button",{type:"button",onClick:()=>ie("product"),className:"w-full text-indigo-600 dark:text-indigo-400 hover:underline text-sm font-medium",children:"+ Add another product"})]}),m.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg",children:[m.jsx("h4",{className:"font-semibold",children:"Services"}),y.promotionOffers.map((I,N)=>I.type==="service"&&m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"text",value:I.name,onChange:j=>Q(N,j.target.value),placeholder:`Service ${A.indexOf(I)+1}`,className:ae}),m.jsx("button",{type:"button",onClick:()=>W(N),className:"p-2 text-red-500 hover:bg-red-100 dark:hover:bg-red-900 rounded-full",children:""})]},N)),m.jsx("button",{type:"button",onClick:()=>ie("service"),className:"w-full text-indigo-600 dark:text-indigo-400 hover:underline text-sm font-medium",children:"+ Add another service"})]})]}),n===3&&m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-semibold text-center",children:"Who are your biggest competitors?"}),m.jsx("p",{className:"text-sm text-center text-gray-500 dark:text-gray-400 -mt-2 mb-4",children:"Provide up to 3 competitors. This will help the AI create a strategy to help you stand out."}),y.competitors.map((I,N)=>m.jsxs("div",{className:"p-3 border border-gray-200 dark:border-gray-600 rounded-lg space-y-2 relative",children:[y.competitors.length>1&&m.jsx("button",{type:"button",onClick:()=>L(N),className:"absolute -top-2 -right-2 bg-red-500 text-white w-6 h-6 rounded-full flex items-center justify-center",children:""}),m.jsx("input",{type:"text",value:I.name,onChange:j=>w(N,"name",j.target.value),placeholder:`Competitor ${N+1} Name`,className:ae,required:!0}),m.jsx("input",{type:"url",value:I.website,onChange:j=>w(N,"website",j.target.value),placeholder:"Website URL (optional)",className:ae})]},N)),y.competitors.length<3&&m.jsx("button",{type:"button",onClick:k,className:"w-full text-indigo-600 dark:text-indigo-400 hover:underline text-sm font-medium",children:"+ Add another competitor"})]}),m.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[n>1&&m.jsx("button",{type:"button",onClick:()=>r(I=>I-1),className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500 font-semibold",children:"Back"}),m.jsx("button",{type:"submit",className:`w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 font-semibold ${n>1?"w-auto":""}`,disabled:d,children:d?"Processing...":n===3?"Finish Registration":"Next Step"})]})]})},C=()=>s==="forgot"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Forgot Password"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Enter your email to receive a reset link."})]}),m.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[m.jsx("input",{type:"email",name:"email",value:y.email,onChange:x,placeholder:"Email",required:!0,className:ae}),m.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 font-semibold",disabled:d,children:d?"Sending...":"Send Reset Link"})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsx("button",{onClick:()=>e("login"),className:"text-sm text-indigo-600 hover:underline dark:text-indigo-400",children:"Back to Login"})})]}):s==="confirm"?m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Check Your Email"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:["If an account exists for ",m.jsx("strong",{children:y.email}),", you will receive an email with instructions on how to reset your password."]}),m.jsx("button",{onClick:()=>e("login"),className:"mt-8 w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 font-semibold",children:"Back to Login"})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:s==="login"?"Welcome Back!":"Create an Account"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:s==="login"?"Sign in to continue":"Join us to optimize your marketing"})]}),s==="login"?m.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[m.jsx("input",{type:"email",name:"email",value:y.email,onChange:x,placeholder:"Email",required:!0,className:ae}),m.jsx("input",{type:"password",name:"password",value:y.password,onChange:x,placeholder:"Password",required:!0,className:ae}),m.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 font-semibold",disabled:d,children:d?"Logging in...":"Login"})]}):oe(),l&&m.jsx("p",{className:"mt-4 text-center text-sm text-red-500",children:l}),m.jsxs("div",{className:"mt-4 flex items-center justify-center text-xs text-gray-500 dark:text-gray-400",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),m.jsx("span",{children:"All your information is encrypted and stored securely."})]}),m.jsxs("div",{className:"mt-6 text-center",children:[m.jsx("button",{onClick:()=>{e(s==="login"?"register":"login"),r(1),c(null)},className:"text-sm text-indigo-600 hover:underline dark:text-indigo-400",children:s==="login"?"Need an account? Register":"Already have an account? Login"}),s==="login"&&m.jsx("span",{className:"mx-2 text-gray-400",children:"|"}),s==="login"&&m.jsx("button",{onClick:()=>e("forgot"),className:"text-sm text-indigo-600 hover:underline dark:text-indigo-400",children:"Forgot Password?"})]})]});return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4 py-8",children:m.jsx("div",{className:"max-w-xl w-full",children:m.jsx(vt,{children:C()})})})},LN=({onComplete:s})=>{const[e,n]=re.useState(0),[r,l]=re.useState(0),[c,d]=re.useState({}),[p,y]=re.useState({}),v=ql[e],x=v.questions[r],[w,k]=re.useState(30),L=re.useRef(null),Q=re.useRef(null),ie=ql.length,W=v.questions.length,de=(e*100+(r+1)/W*100)/ie,pe=()=>{L.current=Date.now(),k(30),Q.current&&clearInterval(Q.current),Q.current=setInterval(()=>{k(te=>te-1)},1e3)};re.useEffect(()=>(v.type==="hft"&&pe(),()=>{Q.current&&clearInterval(Q.current)}),[v.id,x.id]),re.useEffect(()=>{w===0&&v.type==="hft"&&ae(-1)},[w,v.type]);const ae=te=>{Q.current&&clearInterval(Q.current);const oe={...c};if(oe[v.id]||(oe[v.id]={}),oe[v.id][x.id]=te,d(oe),v.type==="hft"&&L.current){const C=Date.now()-L.current,S={...p};S[v.id]||(S[v.id]={}),S[v.id][x.id]=C,y(S)}r<W-1?l(r+1):e<ie-1?(n(e+1),l(0)):s(oe,p)},ce=()=>v.type==="hft"?m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"mb-4",children:m.jsx("p",{className:"text-lg font-medium text-gray-800 dark:text-gray-200",children:"Find the simple shape hidden in the complex figure below."})}),m.jsx("div",{className:"flex justify-center items-center my-6 h-48",children:x.complexShapeSVG&&m.jsx("div",{className:"w-48 h-48",dangerouslySetInnerHTML:{__html:x.complexShapeSVG}})}),m.jsx("div",{className:"grid grid-cols-3 gap-4",children:x.options.map(te=>m.jsx("button",{onClick:()=>ae(te.id),className:"w-full h-24 flex items-center justify-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg border-2 border-gray-200 dark:border-gray-600 hover:bg-indigo-100 dark:hover:bg-indigo-900 hover:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all",children:te.svg&&m.jsx("div",{className:"w-16 h-16 text-gray-800 dark:text-gray-200",dangerouslySetInnerHTML:{__html:te.svg}})},te.id))})]}):m.jsxs("div",{children:[m.jsx("div",{className:"mb-8",children:m.jsx("p",{className:"text-lg text-center font-medium text-gray-800 dark:text-gray-200",children:x.text})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.options.map(te=>m.jsx("button",{onClick:()=>ae(te.id),className:"w-full text-left p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:bg-indigo-100 dark:hover:bg-indigo-900 hover:border-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all",children:te.text},te.id))})]});return m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:m.jsx("div",{className:"max-w-2xl w-full",children:m.jsxs(vt,{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:v.title}),v.type==="hft"&&m.jsx("div",{className:`text-2xl font-bold rounded-full w-12 h-12 flex items-center justify-center ${w<=5?"text-red-500 animate-pulse":"text-gray-700 dark:text-gray-300"}`,children:w})]}),m.jsxs("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:["Question ",r+1," of ",W]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 mb-6",children:m.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full transition-all duration-300",style:{width:`${de}%`}})}),ce(),m.jsxs("div",{className:"mt-6 flex items-center justify-center text-xs text-gray-500 dark:text-gray-400",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z",clipRule:"evenodd"})}),m.jsx("span",{children:"Your answers are confidential and handled securely."})]})]})})})},Sn=()=>m.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}),mr=({isOpen:s,onClose:e,title:n,children:r})=>s?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm",onClick:e,children:m.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",onClick:l=>l.stopPropagation(),children:[m.jsxs("div",{className:"flex items-start justify-between p-5 border-b border-gray-200 dark:border-gray-700 rounded-t sticky top-0 bg-white dark:bg-gray-800",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n}),m.jsx("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:e,children:m.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),m.jsx("div",{className:"p-6 space-y-6",children:r})]})}):null,PN=Bn(qn,"generateSuggestions"),UN=Bn(qn,"generateTutorial"),zN=Bn(qn,"regenerateTutorial"),BN=Bn(qn,"evaluateTutorial"),qN=Bn(qn,"generateMeme"),HN=Bn(qn,"generateStrategyQuestion"),FN=Bn(qn,"generateMarketingStrategy"),GN=Bn(qn,"generateStrategySuggestions"),KN=Bn(qn,"evaluateSuggestion"),QN=Bn(qn,"generateAudio"),YN=Bn(qn,"generateFacebookPost"),XN=Bn(qn,"generateAdCopy"),$N=Bn(qn,"verifyIntegration"),ZN=async(s,e,n,r)=>{try{return(await PN({user:s,publicSuggestions:e,activeProvider:n})).data}catch(l){throw console.error("Error calling generateSuggestions function:",l),new Error("Failed to get suggestions from the cloud function.")}},JN=async(s,e,n,r,l,c)=>{try{return(await UN({user:s,integrations:e,topic:n,format:r,activeProvider:l})).data}catch(d){throw console.error("Error calling generateTutorial function:",d),new Error("Failed to generate tutorial from the cloud function.")}},WN=async(s,e,n,r,l)=>{try{return(await zN({originalTutorial:s,user:e,failedAnswers:n,activeProvider:r})).data}catch(c){throw console.error("Error calling regenerateTutorial function:",c),new Error("Failed to regenerate the tutorial from the cloud function.")}},eR=async(s,e,n)=>{try{return(await BN({tutorial:s,activeProvider:e})).data}catch(r){throw console.error("Error calling evaluateTutorial function:",r),new Error("The AI failed to evaluate the tutorial.")}},tR=async(s,e,n)=>{try{return(await qN({topic:s,activeProvider:e})).data}catch(r){throw console.error("Error calling generateMeme function:",r),r instanceof Error&&(r.message.includes("safety")||r.message.includes("policy"))?new Error("The request was blocked due to the AI's safety policy. Please try a different topic."):new Error("Failed to generate meme from the cloud function.")}},nR=async(s,e,n,r)=>{try{return(await HN({user:s,conversationHistory:e,activeProvider:n})).data}catch(l){throw console.error("Error calling generateStrategyQuestion function:",l),new Error("Failed to get the next question from the cloud function.")}},iR=async(s,e,n,r)=>{try{return(await FN({user:s,conversationHistory:e,activeProvider:n})).data}catch(l){throw console.error("Error calling generateMarketingStrategy function:",l),new Error("Failed to generate the marketing strategy from the cloud function.")}},sR=async(s,e,n,r,l,c)=>{try{return(await GN({user:s,integrations:e,strategy:n,suggestions:r,activeProvider:l})).data}catch(d){throw console.error("Error calling generateStrategySuggestions function:",d),new Error("Failed to generate strategy suggestions from the cloud function.")}},rR=async(s,e,n)=>{try{return(await KN({suggestion:s,activeProvider:e})).data}catch(r){throw console.error("Error calling evaluateSuggestion function:",r),new Error("The AI failed to evaluate the suggestion.")}},aR=async(s,e,n)=>{try{return(await QN({text:s,activeProvider:e})).data}catch(r){throw console.error("Error calling generateAudio function:",r),new Error("Failed to generate audio from text using the cloud function.")}},oR=(s,e)=>{const n=e.questions.reduce((r,l)=>{const c=s[l.id];return c===1?r+2:c===2?r-1:r},0);return n>15?"You are highly self-aware and empathetic, skilled at managing relationships and navigating social complexities effectively.":n>5?"You have a solid foundation of emotional intelligence, showing a good balance of self-awareness and empathy in most situations.":"You are developing your emotional intelligence, with strengths in some areas and opportunities for growth in understanding and managing emotions."},lR=async(s,e,n,r)=>{try{return(await YN({user:s,topic:e,activeProvider:n})).data}catch(l){throw console.error("Error calling generateFacebookPost function:",l),new Error("Failed to generate Facebook post idea from the cloud function.")}},cR=async(s,e,n,r)=>{try{return(await XN({user:s,productDescription:e,activeProvider:n})).data}catch(l){throw console.error("Error calling generateAdCopy function:",l),new Error("Failed to generate ad copy from the cloud function.")}},rx=async(s,e)=>{try{return(await $N({platform:s,apiKey:e})).data}catch(n){return console.error(`Error calling verifyIntegration function for ${s}:`,n),{valid:!1,error:n.message||`An unexpected error occurred while verifying ${s}.`}}},ca=({children:s,text:e})=>m.jsxs("div",{className:"relative flex items-center group",children:[s,m.jsx("div",{className:"absolute bottom-full mb-2 w-max max-w-xs p-2 text-sm text-white bg-gray-800 dark:bg-black rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none z-10",children:e})]}),uR=()=>m.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),hR=()=>m.jsx("svg",{className:"w-6 h-6 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),dR=()=>m.jsx("svg",{className:"h-6 w-6 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),R_=s=>{const e={[we.GoogleAds]:{ctr:4.5,conversionRate:1.48,cpc:.59},[we.Facebook]:{ctr:2.1,conversionRate:2.05,cpc:.85},[we.BingAds]:{ctr:3.2,conversionRate:1.75,cpc:.45},[we.YandexAds]:{ctr:2.8,conversionRate:1.9,cpc:.35}},n=s===7?1.05:s===30?1:.95;return Object.keys(e).forEach(r=>{const l=r;e[l].ctr*=n*(1+(Math.random()-.5)*.1),e[l].conversionRate*=n*(1+(Math.random()-.5)*.1),e[l].cpc*=n*(1+(Math.random()-.5)*.1)}),e},im=({label:s,value:e,maxValue:n,unit:r="",prefix:l=""})=>{const c=Math.min(e/n*100,100);return m.jsx(ca,{text:`${l}${e.toFixed(2)}${r}`,children:m.jsxs("div",{className:"cursor-pointer",onClick:()=>alert(`Details for ${s} will be shown here.`),children:[m.jsx("div",{className:"flex justify-between items-center mb-1",children:m.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:s})}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:m.jsx("div",{className:"bg-indigo-600 h-2.5 rounded-full",style:{width:`${c}%`}})})]})})},fR=s=>{const e={Technology:["AI in Marketing","Growth Hacking for SaaS","Content Strategy for Tech Blogs"],Healthcare:["HIPAA Compliant Digital Marketing","Building Trust with Patient Testimonials","SEO for Medical Practices"],Finance:["Financial Services SEO","Content Marketing for Fintech","Compliance in Financial Advertising"],Retail:["Omnichannel Marketing Strategies","Maximizing Holiday Sales","Customer Loyalty Programs"],Education:["Student Recruitment Strategies","Social Media for Higher Education","Online Course Marketing"],Manufacturing:["B2B Lead Generation for Manufacturers","Industrial Content Marketing","Trade Show Marketing Tips"],"E-commerce":["Conversion Rate Optimization for E-commerce","Facebook Ads for Online Stores","Abandoned Cart Email Sequences"],Other:["Local SEO Basics","Getting Started with Email Marketing","Understanding Google Analytics"]};return e[s.industry]||e.Other},k_=({user:s,integrations:e,tutorials:n,addTutorial:r,setCurrentPage:l,suggestions:c,updateSuggestion:d,addSuggestions:p,requireAi:y,activeAiProvider:v,activeAiProviderKey:x})=>{const[w,k]=re.useState(!1),[L,Q]=re.useState(!1),[ie,W]=re.useState(""),[de,pe]=re.useState("text"),[ae,ce]=re.useState([]),[te,oe]=re.useState(null),[C,S]=re.useState(!1),[A,I]=re.useState(""),[N,j]=re.useState(!1),[O,Ue]=re.useState(null),[Xe,K]=re.useState(null),[le,ye]=re.useState(!1),[X,ue]=re.useState(!1),[R,H]=re.useState([]),[B,J]=re.useState(30),[fe,me]=re.useState(R_(30)),[Ie,Ve]=re.useState(!1),[Ge,fn]=re.useState(""),[un,mn]=re.useState(!1),[oi,gn]=re.useState(null),[As,Hn]=re.useState(null),[Or,$i]=re.useState(!1),[ut,Et]=re.useState(""),[Cn,Dr]=re.useState(!1),[Cs,Pt]=re.useState(null),[bi,xi]=re.useState(null),Is=re.useMemo(()=>e.find(Y=>Y.platform===we.Facebook&&Y.status==="connected"),[e]),li=re.useMemo(()=>e.find(Y=>Y.platform===we.GoogleAds&&Y.status==="connected"),[e]);re.useEffect(()=>{me(R_(B))},[B]);const Mr=e.filter(Y=>Y.status==="error"),Ns=n.filter(Y=>Y.isCompleted&&Y.createdByUserId===s.id),ci=Ns.length,xa=Ns.filter(Y=>Y.attempts===1).length,In=ci>0?Ns.reduce((Y,Re)=>{const ht=Re.quiz.length,Ke=Re.score||0;return Y+(ht>0?Ke/ht*100:0)},0)/ci:0,gt=["New Learner","Aspiring Marketer","Adept Marketer","Strategy Master"],Qt=2,lt=Math.min(Math.floor(ci/Qt),gt.length-1),Ea=gt[lt],Rs=gt[Math.min(lt+1,gt.length-1)],Ta=(lt+1)*Qt,Fn=lt>=gt.length-1?100:ci%Qt/Qt*100,Zi=[we.GoogleAds,we.Facebook,we.BingAds,we.YandexAds],_t=c.filter(Y=>Y.suggestedForUserId===s.id&&Y.status==="evaluated"),Gn=async()=>{if(!(!v||!x)){ue(!0),H([]);try{const Y=c.filter(Ke=>Ke.isPublic),ht=(await ZN(s,Y,v,x)).map(Ke=>({...Ke,id:new Date().toISOString()+Math.random(),status:"suggested",outcome:null,isPublic:!1,suggestedForUserId:s.id}));H(ht),ye(!0)}catch(Y){console.error("Failed to generate suggestions",Y)}finally{ue(!1)}}},Nn=async(Y,Re)=>{if(!v||!x)return;H(Ke=>Ke.filter(Tt=>Tt.id!==Y.id));const ht={...Y,status:"evaluated",outcome:Re};if(p([ht]),Re==="success")try{const Ke=await rR(Y,v,x);d(Y.id,{isPublic:Ke.decision==="approve",evaluationFeedback:Ke.feedback})}catch(Ke){console.error("Failed to evaluate suggestion for public KB:",Ke)}},nn=e.filter(Y=>Y.status==="connected"&&Zi.includes(Y.platform)).map(Y=>({platform:Y.platform,...fe[Y.platform]})).filter(Y=>Y.ctr!==void 0),Do=()=>{ce(fR(s)),W(""),pe("text"),oe(null),Q(!0)},jr=async(Y=ie)=>{if(!(!v||!x)){if(!Y||Y.trim()===""){oe("Please select, enter, or let the AI suggest a topic.");return}k(!0),oe(null);try{const Re=await JN(s,e,Y,de,v,x);r(Re),Q(!1),alert(`New tutorial "${Re.title}" has been added to the Tutorials page!`)}catch(Re){const ht=Re instanceof Error?Re.message:"An unknown error occurred.";oe(ht)}finally{k(!1)}}},Kn=()=>{I(""),Ue(null),K(null),j(!1),S(!0)},Ji=async()=>{if(!(!v||!x)){if(!A.trim()){K("Please enter a topic for your meme.");return}j(!0),Ue(null),K(null);try{const Y=await tR(A,v,x);Ue(`data:image/png;base64,${Y}`)}catch(Y){const Re=Y instanceof Error?Y.message:"An unknown error occurred.";K(Re)}finally{j(!1)}}},Mo=()=>{I(""),Ue(null),K(null),j(!1)},Ei=()=>{fn(""),gn(null),Hn(null),mn(!1),Ve(!0)},Vr=async()=>{if(!(!v||!x)){if(!Ge.trim()){Hn("Please enter a topic for your post.");return}mn(!0),gn(null),Hn(null);try{const Y=await lR(s,Ge,v,x);gn(Y)}catch(Y){const Re=Y instanceof Error?Y.message:"An unknown error occurred.";Hn(Re)}finally{mn(!1)}}},ks=()=>{Et(""),Pt(null),xi(null),Dr(!1),$i(!0)},Wi=async()=>{if(!(!v||!x)){if(!ut.trim()){xi("Please describe your product or service.");return}Dr(!0),Pt(null),xi(null);try{const Y=await cR(s,ut,v,x);Pt(Y)}catch(Y){const Re=Y instanceof Error?Y.message:"An unknown error occurred.";xi(Re)}finally{Dr(!1)}}},sn=({onClick:Y,disabled:Re,loading:ht,children:Ke,className:Tt,disabledText:Qn=""})=>m.jsx(ca,{text:Re&&!ht?Qn:"",children:m.jsx("div",{className:"w-full",children:m.jsx("button",{onClick:Y,disabled:Re||ht,className:`w-full px-6 py-3 text-white rounded-md flex items-center justify-center gap-2 font-semibold ${Tt} ${Re||ht?"bg-gray-400 cursor-not-allowed":""}`,children:ht?m.jsx(Sn,{}):Ke})})});return m.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"px-4 py-6 sm:px-0 space-y-6",children:[Mr.length>0&&m.jsx(vt,{className:"border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(dR,{})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-lg font-medium text-red-800 dark:text-red-300",children:"Action Required: Integration Issues"}),m.jsxs("div",{className:"mt-2 text-sm text-red-700 dark:text-red-200",children:[m.jsx("p",{children:"The following integrations have encountered errors:"}),m.jsx("ul",{className:"list-disc list-inside mt-2 space-y-1",children:Mr.map(Y=>m.jsxs("li",{children:[m.jsxs("strong",{children:[Y.platform,":"]})," ",Y.errorMessage]},Y.platform))})]}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{onClick:()=>l("integrations"),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 text-sm font-semibold",children:"Review Integrations"})})]})]})}),m.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome, ",s.name,"!"]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs(vt,{className:"col-span-1 md:col-span-3",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"AI Actions"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Let our AI analyze your data and provide actionable insights to boost your performance."}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[m.jsx(sn,{onClick:()=>y(()=>l("strategy")),disabled:!v,className:"bg-teal-600 hover:bg-teal-700",disabledText:"Connect an AI provider to build a strategy.",children:"Build/View Strategy"}),m.jsx(sn,{onClick:()=>y(Gn),loading:X,disabled:!v,className:"bg-blue-600 hover:bg-blue-700",disabledText:"Connect an AI provider to get suggestions.",children:"Get Campaign Suggestions"}),m.jsx(sn,{onClick:()=>y(Do),disabled:!v,className:"bg-green-600 hover:bg-green-700",disabledText:"Connect an AI provider to generate tutorials.",children:"Generate Tutorial"}),m.jsx(sn,{onClick:()=>y(Ei),disabled:!Is||!v,loading:un,className:"bg-blue-500 hover:bg-blue-600",disabledText:Is?"Connect an AI provider.":"Connect Facebook to generate posts.",children:"Generate FB Post"}),m.jsx(sn,{onClick:()=>y(Kn),disabled:!v,className:"bg-purple-600 hover:bg-purple-700",disabledText:"Connect an AI provider to generate memes.",children:" Generate Meme"}),m.jsx(sn,{onClick:()=>y(ks),disabled:!li||!v,loading:Cn,className:"bg-orange-500 hover:bg-orange-600",disabledText:li?"Connect an AI provider.":"Connect Google Ads to generate copy.",children:"Generate Ad Copy"})]})]}),_t.length>0&&m.jsxs(vt,{className:"md:col-span-3",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Suggestion Evaluation Log"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Here is the history of suggestions you've evaluated. This helps the AI learn what works for you."}),m.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto pr-2",children:_t.map(Y=>m.jsxs("div",{className:`p-4 rounded-lg flex justify-between items-center ${Y.outcome==="success"?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-semibold text-lg",children:Y.title}),m.jsx("p",{className:"mt-1 text-sm text-gray-700 dark:text-gray-300",children:Y.rationale})]}),m.jsx("div",{className:`text-sm font-bold px-3 py-1 rounded-full ${Y.outcome==="success"?"text-green-800 bg-green-200 dark:text-green-200 dark:bg-green-800":"text-red-800 bg-red-200 dark:text-red-200 dark:bg-red-800"}`,children:Y.outcome==="success"?"Worked":"Failed"})]},Y.id))})]}),m.jsxs(vt,{className:"md:col-span-2",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Learner Profile"}),m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Your current rank"}),m.jsx("p",{className:"text-3xl font-bold text-indigo-500 dark:text-indigo-400",children:Ea})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:m.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${Fn}%`}})}),m.jsx("p",{className:"text-xs text-center text-gray-500 dark:text-gray-400 mt-2",children:lt>=gt.length-1?"You've reached the highest rank!":`${Ta-ci} tutorials until ${Rs}`})]}),m.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[m.jsxs("div",{className:"grid grid-cols-3 gap-y-6 gap-x-4 text-center",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:ci}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tutorials Completed"})]}),m.jsxs("div",{children:[m.jsxs("p",{className:"text-2xl font-bold",children:[In.toFixed(0),"%"]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Average Score"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-2xl font-bold",children:xa}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"First-Attempt Passes"})]}),m.jsx("div",{className:"col-span-3 border-b border-dashed border-gray-200 dark:border-gray-700 my-2"}),m.jsxs("div",{className:"col-span-3 grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold",children:s.learningStyle||"N/A"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Learning Style"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"font-semibold",children:s.marketingKnowledgeLevel}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Knowledge Level"})]})]})]}),s.eqProfile&&m.jsx("div",{className:"mt-6",children:m.jsxs("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400 italic",children:['"',s.eqProfile,'"']})})]})]}),m.jsxs(vt,{children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Integrations"}),m.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[Mr.length>0?m.jsx(hR,{}):m.jsx(uR,{}),m.jsxs("div",{children:[m.jsxs("p",{className:"font-bold text-lg",children:[e.filter(Y=>Y.status==="connected").length," / ",e.length]}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Platforms Connected"})]})]}),m.jsx("ul",{className:"space-y-2",children:e.slice(0,5).map(Y=>m.jsxs("li",{className:"flex items-center justify-between text-sm",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:Y.platform}),m.jsx("span",{className:`font-bold ${Y.status==="connected"?"text-green-500":Y.status==="error"?"text-red-500":"text-gray-400"}`,children:Y.status.charAt(0).toUpperCase()+Y.status.slice(1)})]},Y.platform))})]}),m.jsxs(vt,{className:"md:col-span-3",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Campaign Performance"}),m.jsx("div",{className:"flex items-center gap-2 mt-2 sm:mt-0",children:[7,30,90].map(Y=>m.jsxs("button",{onClick:()=>J(Y),className:`px-3 py-1 text-sm rounded-md ${B===Y?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:[Y,"d"]},Y))})]}),nn.length>0?m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 flex items-center",children:["Click-Through Rate (CTR)",m.jsx(ca,{text:"The percentage of people who saw your ad and clicked on it. Higher is better.",children:m.jsx("svg",{className:"w-4 h-4 ml-1.5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),nn.map(Y=>m.jsx(im,{label:Y.platform,value:Y.ctr,maxValue:10,unit:"%"},Y.platform))]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 flex items-center",children:["Conversion Rate",m.jsx(ca,{text:"The percentage of users who completed a desired action (e.g., purchase, sign-up). Higher is better.",children:m.jsx("svg",{className:"w-4 h-4 ml-1.5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),nn.map(Y=>m.jsx(im,{label:Y.platform,value:Y.conversionRate,maxValue:5,unit:"%"},Y.platform))]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200 flex items-center",children:["Cost Per Click (CPC)",m.jsx(ca,{text:"The average amount you pay for a single click on your ad. Lower is better.",children:m.jsx("svg",{className:"w-4 h-4 ml-1.5 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})})]}),nn.map(Y=>m.jsx(im,{label:Y.platform,value:Y.cpc,maxValue:2,prefix:"$"},Y.platform))]})]}):m.jsxs("div",{className:"text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[m.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"No Performance Data Available"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Connect your ad platforms to see your key metrics here."}),m.jsx("button",{onClick:()=>l("integrations"),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 text-sm font-semibold",children:"Manage Integrations"})]})]}),m.jsxs(vt,{className:"md:col-span-3",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Featured Success Stories"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:$E.map(Y=>m.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[m.jsx("h3",{className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:Y.title}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 mb-3",children:Y.challenge}),m.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-md text-sm",children:m.jsxs("p",{children:[m.jsx("strong",{className:"font-semibold text-indigo-800 dark:text-indigo-300",children:"Key Suggestion:"})," ",Y.solution]})}),m.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center",children:Y.metrics.map(Re=>m.jsxs("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-md",children:[m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Re.name}),m.jsx("p",{className:"font-bold text-lg",children:Re.after}),m.jsx("p",{className:`text-xs font-semibold ${Re.change.startsWith("+")?"text-green-500":"text-red-500"}`,children:Re.change})]},Re.name))})]},Y.id))})]})]})]}),m.jsx(mr,{isOpen:L,onClose:()=>Q(!1),title:"Generate a Custom Tutorial",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Suggested Topics for You"}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:ae.map(Y=>m.jsx("button",{onClick:()=>W(Y),className:`px-3 py-1 text-sm rounded-full border transition-colors ${ie===Y?"bg-indigo-600 text-white border-indigo-600":"bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:Y},Y))}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"custom-topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or enter your own topic:"}),m.jsx("input",{type:"text",id:"custom-topic",value:ie,onChange:Y=>W(Y.target.value),placeholder:"e.g., 'Advanced SEO Techniques'",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"tutorial-format",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preferred Format:"}),m.jsxs("select",{id:"tutorial-format",value:de,onChange:Y=>pe(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600",children:[m.jsx("option",{value:"text",children:"Text"}),m.jsx("option",{value:"presentation",children:"Presentation"}),m.jsx("option",{value:"audio",children:"Audio"})]})]})]}),te&&m.jsx("p",{className:"text-red-500 mt-4 text-sm",children:te}),m.jsxs("div",{className:"mt-6 flex justify-between items-center gap-4",children:[m.jsx("button",{onClick:()=>jr("AI_SUGGESTED"),disabled:w,className:"flex items-center justify-center text-sm px-4 py-2 border border-transparent rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 disabled:bg-green-400",children:"Let AI Suggest a Topic"}),m.jsxs("div",{className:"flex justify-end gap-4",children:[m.jsx("button",{onClick:()=>Q(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{onClick:()=>jr(),disabled:w,className:"flex items-center justify-center min-w-[120px] px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:w?m.jsx(Sn,{}):"Generate"})]})]})]})}),m.jsx(mr,{isOpen:C,onClose:()=>S(!1),title:"Generate a Marketing Meme",children:m.jsxs("div",{children:[N&&m.jsxs("div",{className:"text-center p-8",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(Sn,{})}),m.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Brewing up a fresh meme..."})]}),!N&&O&&m.jsxs("div",{className:"text-center",children:[m.jsx("img",{src:O,alt:"Generated Meme",className:"max-w-full mx-auto rounded-lg shadow-lg"}),m.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:["Generated by ",v]}),m.jsx("button",{onClick:Mo,className:"mt-6 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Generate Another"})]}),!N&&!O&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"meme-topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter a topic for your meme:"}),m.jsx("input",{type:"text",id:"meme-topic",value:A,onChange:Y=>I(Y.target.value),placeholder:"e.g., 'when the campaign goes viral'",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"}),Xe&&m.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md text-sm text-red-700 dark:text-red-300",children:Xe}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[m.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{onClick:Ji,disabled:!A.trim(),className:"flex items-center justify-center min-w-[120px] px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-purple-400",children:"Generate"})]})]})]})}),m.jsx(mr,{isOpen:le,onClose:()=>ye(!1),title:"AI Campaign Suggestions",children:m.jsxs("div",{children:[R.length>0?m.jsx("div",{className:"space-y-4",children:R.map(Y=>m.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h4",{className:"font-semibold text-lg",children:Y.title}),Y.aiProvider&&m.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["by ",Y.aiProvider]})]}),m.jsx("p",{className:"mt-2 text-sm text-gray-700 dark:text-gray-300",children:Y.rationale}),m.jsx("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-600 pt-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Could this work for you?"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>Nn(Y,"success"),className:"p-2 rounded-full hover:bg-green-200 dark:hover:bg-green-800",children:m.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.085a2 2 0 00-1.736.97l-2.714 5.428a2 2 0 001.736 2.97h4.618a2 2 0 002-2z"})})}),m.jsx("button",{onClick:()=>Nn(Y,"failure"),className:"p-2 rounded-full hover:bg-red-200 dark:hover:bg-red-800",children:m.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.738 3h4.017c.163 0 .326.02.485.06L17 4m-7 10v5a2 2 0 002 2h.085a2 2 0 001.736-.97l2.714-5.428a2 2 0 00-1.736-2.97h-4.618a2 2 0 00-2 2z"})})})]})]})})]},Y.id))}):m.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"No new suggestions were generated. This may be because there are no clear optimization paths at the moment."}),m.jsx("div",{className:"mt-6 flex justify-end",children:m.jsx("button",{onClick:()=>ye(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Close"})})]})}),m.jsx(mr,{isOpen:Ie,onClose:()=>Ve(!1),title:"Generate Facebook Post Idea",children:m.jsx("div",{children:un?m.jsxs("div",{className:"text-center p-8",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(Sn,{})}),m.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Generating your post idea..."})]}):oi?m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Generated Post:"}),m.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["by ",v]})]}),m.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-md whitespace-pre-wrap",children:oi.post}),m.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2",children:"Suggested Image:"}),m.jsxs("p",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-md text-sm italic",children:['"',oi.imagePrompt,'"']}),m.jsx("h3",{className:"text-lg font-semibold mt-4 mb-2",children:"Hashtags:"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:oi.hashtags.map(Y=>m.jsxs("span",{className:"text-sm bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-full",children:["#",Y]},Y))}),m.jsx("button",{onClick:Ei,className:"mt-6 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Generate Another"})]}):m.jsxs("div",{children:[m.jsx("label",{htmlFor:"fb-post-topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"What is the topic of your Facebook post?"}),m.jsx("input",{type:"text",id:"fb-post-topic",value:Ge,onChange:Y=>fn(Y.target.value),placeholder:"e.g., 'Our new summer collection launch'",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"}),As&&m.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md text-sm text-red-700 dark:text-red-300",children:As}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[m.jsx("button",{onClick:()=>Ve(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{onClick:Vr,disabled:!Ge.trim()||un,className:"flex items-center justify-center min-w-[120px] px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 disabled:bg-gray-400",children:un?m.jsx(Sn,{}):"Generate"})]})]})})}),m.jsx(mr,{isOpen:Or,onClose:()=>$i(!1),title:"Generate Ad Copy",children:m.jsx("div",{children:Cn?m.jsxs("div",{className:"text-center p-8",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(Sn,{})}),m.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Crafting high-conversion ad copy..."})]}):Cs?m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-lg font-semibold",children:"Generated Ad Copy:"}),m.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["by ",v]})]}),m.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-md",children:[m.jsx("h4",{className:"font-bold mb-2",children:"Headlines:"}),m.jsx("ul",{className:"list-disc list-inside space-y-1",children:Cs.headlines.map((Y,Re)=>m.jsx("li",{children:Y},Re))}),m.jsx("h4",{className:"font-bold mt-4 mb-2",children:"Descriptions:"}),m.jsx("ul",{className:"list-disc list-inside space-y-1",children:Cs.descriptions.map((Y,Re)=>m.jsx("li",{children:Y},Re))})]}),m.jsx("button",{onClick:ks,className:"mt-6 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Generate More"})]}):m.jsxs("div",{children:[m.jsx("label",{htmlFor:"ad-copy-topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Describe your product or service:"}),m.jsx("textarea",{id:"ad-copy-topic",value:ut,onChange:Y=>Et(Y.target.value),placeholder:"e.g., 'Handmade leather wallets with RFID blocking technology, targeted at young professionals.'",className:"w-full h-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"}),bi&&m.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md text-sm text-red-700 dark:text-red-300",children:bi}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[m.jsx("button",{onClick:()=>$i(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{onClick:Wi,disabled:!ut.trim()||Cn,className:"flex items-center justify-center min-w-[120px] px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 disabled:bg-gray-400",children:Cn?m.jsx(Sn,{}):"Generate"})]})]})})})]})},mR={[we.Facebook]:{placeholder:"Facebook User Access Token",description:"Enter your User Access Token. To unlock all features like Ads performance and post generation, ensure the token has <code>ads_read</code> and <code>pages_show_list</code> permissions.",instructionsUrl:"https://developers.facebook.com/tools/explorer/"},[we.Instagram]:{placeholder:"Instagram User Access Token",description:"Enter your Instagram User Access Token. This is obtained through the Facebook Login process and requires specific permissions for the Basic Display API.",instructionsUrl:"https://developers.facebook.com/docs/instagram-basic-display-api/overview#user-token"},[we.LinkedIn]:{placeholder:"LinkedIn OAuth 2.0 Access Token",description:"Enter your OAuth 2.0 Access Token. You can get this by creating an app in the LinkedIn Developer Portal and completing the 3-legged OAuth flow.",instructionsUrl:"https://learn.microsoft.com/en-us/linkedin/shared/authentication/authorization-code-flow"},[we.GoogleAnalytics]:{placeholder:"Google API Key or OAuth 2.0 Token",description:"Enter your Google API Key or OAuth 2.0 Access Token. For full access, this requires setting up a project in Google Cloud Console and completing an OAuth flow.",instructionsUrl:"https://developers.google.com/identity/protocols/oauth2"},[we.GoogleAds]:{placeholder:"Google Ads API Developer Token",description:"Enter your Google API Key or OAuth 2.0 Access Token. For full access, this requires setting up a project in Google Cloud Console and completing an OAuth flow.",instructionsUrl:"https://developers.google.com/google-ads/api/docs/first-call/dev-token"},[we.YandexAds]:{placeholder:"Yandex.Direct API OAuth Token",description:"Enter your OAuth token for the Yandex.Direct API. You can obtain a token by registering your application in the Yandex.OAuth service.",instructionsUrl:"https://yandex.com/dev/direct/doc/start/auth-docpage/"},[we.BingAds]:{placeholder:"Microsoft Advertising OAuth Token",description:"Enter your OAuth Access Token for Microsoft Advertising. You must register an application in the Microsoft identity platform to get credentials.",instructionsUrl:"https://learn.microsoft.com/en-us/advertising/guides/get-started?view=msads-13"},[we.OpenAI]:{placeholder:"OpenAI API Key",description:"Enter your secret API Key from your OpenAI account dashboard.",instructionsUrl:"https://platform.openai.com/api-keys"},[we.Gemini]:{placeholder:"Google AI Studio API Key",description:"Enter your API Key from Google AI Studio (previously MakerSuite).",instructionsUrl:"https://makersuite.google.com/app/apikey"},[we.TikTok]:{placeholder:"TikTok Access Token",description:"Enter your Access Token obtained via the TikTok Login Kit or by creating an app in their developer portal for the Display API.",instructionsUrl:"https://developers.tiktok.com/doc/login-kit-web/"},[we.X]:{placeholder:"X (Twitter) Bearer Token or OAuth 2.0 Token",description:"Enter your Bearer Token or an OAuth 2.0 Access Token from the X Developer Portal for your app.",instructionsUrl:"https://developer.twitter.com/en/docs/authentication/oauth-2-0/bearer-tokens"}},gR=({platform:s})=>{const e="w-10 h-10",n={[we.Facebook]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3l-.5 3h-2.5v6.8c4.56-.93 8-4.96 8-9.8z"})}),[we.Instagram]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 2C8.7 2 8.2 2.02 7.2 2.07c-1 .05-1.7.22-2.3.47-.6.25-1.1.6-1.6 1.1-.5.5-.85 1-1.1 1.6-.25.6-.42 1.3-.47 2.3C2.02 8.2 2 8.7 2 12s.02 3.8.07 4.8c.05 1 .22 1.7.47 2.3.25.6.6 1.1 1.1 1.6.5.5 1 .85 1.6 1.1.6.25 1.3.42 2.3.47 1 .05 1.5.07 4.8.07s3.8-.02 4.8-.07c1-.05 1.7-.22 2.3-.47.6-.25 1.1-.6 1.6-1.1.5-.5.85-1 1.1-1.6.25-.6.42-1.3.47-2.3.05-1 .07-1.5.07-4.8s-.02-3.8-.07-4.8c-.05-1-.22-1.7-.47-2.3-.25-.6-.6-1.1-1.1-1.6-.5-.5-1-.85-1.6-1.1-.6-.25-1.3-.42-2.3-.47C15.8 2.02 15.3 2 12 2zm0 1.8c3.2 0 3.6 0 4.8.07 1 .05 1.5.2 1.8.32.4.17.7.35 1.1.7s.55.7.7 1.1c.12.3.27.8.32 1.8.05 1.2.07 1.6.07 4.8s0 3.6-.07 4.8c-.05 1-.2 1.5-.32 1.8-.17.4-.35.7-.7 1.1s-.7.55-1.1.7c-.3.12-.8.27-1.8.32-1.2.05-1.6.07-4.8.07s-3.6 0-4.8-.07c-1-.05-1.5-.2-1.8-.32-.4-.17-.7-.35-1.1-.7s-.55-.7-.7-1.1c-.12-.3-.27-.8-.32-1.8C4.02 15.6 4 15.2 4 12s0-3.6.07-4.8c.05-1 .2-1.5.32-1.8.17-.4.35.7.7-1.1s.7-.55 1.1-.7c.3-.12.8.27 1.8-.32C8.4 4.02 8.8 4 12 4zm0 2.9c-2.8 0-5.1 2.3-5.1 5.1s2.3 5.1 5.1 5.1 5.1-2.3 5.1-5.1-2.3-5.1-5.1-5.1zm0 8.4c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3 3.3 1.5 3.3 3.3-1.5 3.3-3.3 3.3zm6.4-8.8c-.7 0-1.3.6-1.3 1.3s.6 1.3 1.3 1.3 1.3-.6 1.3-1.3-.6-1.3-1.3-1.3z"})}),[we.LinkedIn]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14zm-11.5 6.5H4V19h3.5v-9.5zM5.75 4a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5zM19 19h-3.5v-5.25c0-1.25-.02-2.85-1.75-2.85-1.75 0-2.02 1.37-2.02 2.75V19H8.25V9.5H11.6v1.5h.05c.45-.85 1.55-1.75 3.25-1.75 3.5 0 4.15 2.3 4.15 5.3V19z"})}),[we.GoogleAnalytics]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 17.5c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm5-4c0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4 4 1.79 4 4zM12 8c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zM14.5 7.5c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"})}),[we.GoogleAds]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.2 15.2L6 13.4l1.4-1.4 3.4 3.3 7.4-7.4 1.4 1.4-8.8 8.9z"})}),[we.YandexAds]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 2l2.3 7.1H22l-6 4.3 2.3 7.1-6-4.3-6 4.3 2.3-7.1-6-4.3h7.7L12 2z"})}),[we.BingAds]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M5.1 2.9l7.1 11.2L5.1 21.1V2.9zm13.8 0v18.2l-7.1-7.1L18.9 2.9z"})}),[we.OpenAI]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M20.8 7.3c-.6-1.1-1.4-2.1-2.5-2.8-1.5-.9-3.2-1.3-4.9-1.3-1.7 0-3.4.4-4.9 1.3-1.1.7-2 1.7-2.5 2.8C5.4 8.4 5 9.7 5 11s.4 2.6 1 3.7c.6 1.1 1.4 2.1 2.5 2.8 1.5.9 3.2 1.3 4.9 1.3 1.7 0 3.4-.4 4.9-1.3 1.1-.7 2-1.7 2.5-2.8.6-1.1 1-2.4 1-3.7s-.4-2.6-1-3.7zM12 20c-1.4 0-2.8-.3-4-1-.9-.5-1.7-1.2-2.3-2.1-.6-.9-1-1.9-1.2-3-.2-1.1-.2-2.3 0-3.4.2-1.1.6-2.1 1.2-3 .6-.9 1.4-1.6 2.3-2.1 1.2-.7 2.6-1 4-1s2.8.3 4 1c.9.5 1.7 1.2 2.3 2.1.6.9 1 1.9 1.2 3 .2 1.1.2 2.3 0 3.4-.2 1.1-.6 2.1-1.2 3-.6.9-1.4 1.6-2.3 2.1-1.2.7-2.6 1-4 1zM8 11h8v2H8z"})}),[we.Gemini]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2.5-8.5h5v-2h-5v2zm0 4h5v-2h-5v2z"})}),[we.TikTok]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M12.53.02C13.84 0 15.14.01 16.44 0c.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.05-4.84-.95-6.43-2.88-1.59-1.93-2.3-4.5-1.7-7.12.6-2.62 2.7-4.88 5.3-5.57 1.42-.38 2.9-.46 4.35-.14 0-2.7.05-5.4-.01-8.1z"})}),[we.X]:m.jsx("svg",{className:e,fill:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})};return m.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n[s]})},pR=({status:s,isActive:e})=>{const n="text-sm font-medium px-3 py-1 inline-block rounded-full";return s==="connected"?m.jsx("div",{className:`${n} ${e?"bg-green-200 text-green-800 dark:bg-green-800 dark:text-green-200 ring-2 ring-green-400":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:e?"Active":"Connected"}):s==="error"?m.jsx("div",{className:`${n} bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300`,children:"Error"}):m.jsx("div",{className:`${n} bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300`,children:"Not Connected"})},yR=({integrations:s,updateIntegrationStatus:e,autoOpenPlatform:n,onAutoOpenDone:r,activeAiProvider:l,setActiveAiProvider:c})=>{var ce;const[d,p]=re.useState({isOpen:!1,platform:null}),[y,v]=re.useState(""),[x,w]=re.useState(!1),[k,L]=re.useState(null),Q=re.useCallback(te=>{var C;const oe=((C=s.find(S=>S.platform===te))==null?void 0:C.apiKey)||"";v(oe),p({isOpen:!0,platform:te})},[s]);re.useEffect(()=>{n&&(Q(n),r())},[n,r,Q]);const ie=()=>{p({isOpen:!1,platform:null}),w(!1)},W=async()=>{const te=d.platform;if(!te)return;w(!0),p(C=>({...C,error:void 0}));const oe=await rx(te,y);oe.valid?(e(te,"connected",{apiKey:y}),(te===we.OpenAI||te===we.Gemini)&&c(te),ie()):p(C=>({...C,error:oe.error})),w(!1)},de=()=>{if(k){if(e(k,"disconnected"),k===l){const te=k==="OpenAI"?"Gemini":"OpenAI",oe=s.some(C=>C.platform===te&&C.status==="connected");c(oe?te:null)}L(null)}},pe=te=>{c(te)},ae=()=>{if(!d.platform)return null;const te=mR[d.platform];return m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",dangerouslySetInnerHTML:{__html:te.description}}),m.jsxs("div",{className:"text-sm p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md mb-4 border border-gray-200 dark:border-gray-600",children:[m.jsx("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-1",children:"How to obtain credentials:"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Follow the official documentation to generate your key or token.",m.jsx("a",{href:te.instructionsUrl,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-500 hover:underline ml-1 font-medium",children:"View Instructions"})]})]}),m.jsx("label",{htmlFor:"api-key-input",className:"sr-only",children:te.placeholder}),m.jsx("input",{id:"api-key-input",type:"password",value:y,onChange:oe=>v(oe.target.value),placeholder:te.placeholder,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600"}),d.error&&m.jsx("p",{className:"text-sm text-red-500 mt-2",children:d.error})]})};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[m.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-6",children:"Manage Integrations"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Connect your accounts to allow our AI to analyze data and provide tailored suggestions. Connect at least one AI Provider to enable AI features."}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(te=>{const{platform:oe,status:C,errorMessage:S}=te,A=oe==="OpenAI"||oe==="Gemini",I=l===oe;return m.jsxs(vt,{className:`flex flex-col justify-between border-2 ${A?"border-indigo-400 dark:border-indigo-700":"border-transparent"}`,children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx(gR,{platform:oe}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold",children:oe}),A&&m.jsx("div",{className:"text-xs font-medium text-indigo-500 dark:text-indigo-400",children:"AI Provider"})]})]}),m.jsx(pR,{status:C,isActive:I})]}),C==="error"&&m.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:m.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:S||"An unknown error occurred."})})]}),m.jsxs("div",{className:"flex gap-2 mt-6",children:[C==="connected"&&A&&!I&&m.jsx("button",{onClick:()=>pe(oe),className:"w-full h-10 px-4 py-2 rounded-md font-semibold text-white bg-green-600 hover:bg-green-700 transition-colors",children:"Set as Active"}),m.jsx("button",{onClick:C==="connected"?()=>L(oe):()=>Q(oe),className:`w-full h-10 px-4 py-2 rounded-md font-semibold text-white transition-colors flex items-center justify-center ${C==="connected"?"bg-gray-500 hover:bg-gray-600":C==="error"?"bg-yellow-500 hover:bg-yellow-600":"bg-indigo-600 hover:bg-indigo-700"}`,children:C==="connected"?"Manage":C==="error"?"Reconnect":"Connect"})]})]},oe)})})]})}),m.jsx(mr,{isOpen:d.isOpen,onClose:ie,title:`Connect to ${d.platform}`,children:m.jsxs("div",{children:[ae(),m.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[d.platform&&((ce=s.find(te=>te.platform===d.platform))==null?void 0:ce.status)==="connected"&&m.jsx("button",{onClick:()=>{L(d.platform),ie()},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 mr-auto",children:"Disconnect"}),m.jsx("button",{onClick:ie,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{onClick:W,disabled:x||!y.trim(),className:"min-w-[120px] px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400 dark:disabled:bg-indigo-800 flex justify-center items-center",children:x?m.jsx(Sn,{}):"Save & Connect"})]})]})}),m.jsx(mr,{isOpen:!!k,onClose:()=>L(null),title:"Confirm Disconnection",children:m.jsxs("div",{children:[m.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Are you sure you want to disconnect ",m.jsx("strong",{children:k}),"? This will remove any stored credentials and may affect AI suggestions."]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[m.jsx("button",{onClick:()=>L(null),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{onClick:de,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Disconnect"})]})]})})]})},vR=75,_R=({tutorial:s,user:e,updateTutorial:n,relevanceTags:r,onVersionChange:l,versionHistory:c,activeAiProvider:d,activeAiProviderKey:p,requireAi:y})=>{const[v,x]=re.useState(!1),[w,k]=re.useState({}),[L,Q]=re.useState(!1),[ie,W]=re.useState(!1),[de,pe]=re.useState(!1),[ae,ce]=re.useState(null),[te,oe]=re.useState(s.format),[C,S]=re.useState(!1),A=s.quiz.length,I=s.createdByUserId===e.id,N=(B,J)=>{L||k(fe=>({...fe,[B]:J}))},j=()=>{const B=s.quiz.reduce((Ie,Ve)=>Ie+(w[Ve.id]===Ve.correctOptionId?1:0),0),fe=B/A*100>=vR;Q(!0);const me=(s.attempts||0)+1;n(s.id,{attempts:me,score:B,isCompleted:fe})},O=async()=>{if(!(!d||!p)){W(!0),ce(null);try{const J={...await WN(s,e,w,d,p),id:new Date().toISOString(),parentId:s.parentId||s.id,version:s.version+1,createdByUserId:e.id,status:"private",isCompleted:!1,score:0,attempts:0,rating:null};n(s.id,{},J)}catch(B){ce(B instanceof Error?B.message:"An unknown error occurred.")}finally{W(!1)}}},Ue=async()=>{if(!(!d||!p)){pe(!0),ce(null),n(s.id,{status:"pending_review"});try{const B=await eR(s,d,p);B.decision==="approve"?n(s.id,{status:"public",evaluationFeedback:B.feedback}):n(s.id,{status:"rejected",evaluationFeedback:B.feedback})}catch(B){ce(B instanceof Error?B.message:"An error occurred during evaluation."),n(s.id,{status:"private"})}finally{pe(!1)}}},Xe=async B=>{oe(B),B==="audio"&&!s.audioUrl&&y(()=>K("audio"))},K=async B=>{if(!(!d||!p)){S(!0),ce(null),n(s.id,{isGeneratingAudio:!0});try{const J=s.modules.map(me=>me.content).join(`

`),fe=await aR(J,d,p);n(s.id,{audioUrl:fe,isGeneratingAudio:!1})}catch(J){ce(J instanceof Error?J.message:`Failed to generate ${B}.`),n(s.id,{isGeneratingAudio:!1})}finally{S(!1)}}},le=(B,J)=>L?J===B.correctOptionId?"bg-green-100 dark:bg-green-900 border-green-500":w[B.id]===J?"bg-red-100 dark:bg-red-900 border-red-500":"bg-gray-50 dark:bg-gray-700":w[B.id]===J?"bg-indigo-200 dark:bg-indigo-800 border-indigo-500":"bg-gray-50 dark:bg-gray-700 hover:bg-indigo-100 dark:hover:bg-indigo-900",ye=L&&!s.isCompleted,X=({status:B})=>{const J={private:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",pending_review:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 animate-pulse",public:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},fe={private:"Private",pending_review:"Pending Review",public:"Public",rejected:"Rejected"};return m.jsx("span",{className:`text-xs font-medium px-2.5 py-1 rounded-full ${J[B]}`,children:fe[B]})},ue=()=>te==="audio"?s.isGeneratingAudio?m.jsxs("div",{className:"text-center py-8",children:[m.jsx(Sn,{}),m.jsx("p",{className:"mt-2 text-sm",children:"Generating audio..."})]}):s.audioUrl?m.jsx("audio",{controls:!0,src:s.audioUrl,className:"w-full",children:"Your browser does not support the audio element."}):m.jsx("div",{className:"text-center py-8 text-red-500",children:"Audio failed to generate."}):null,R=()=>m.jsx("div",{className:"space-y-6",children:s.modules.map((B,J)=>m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:B.title}),m.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:B.content})]},J))}),H=B=>{n(s.id,{rating:B})};return m.jsxs(vt,{className:"relative",children:[(ie||de||C)&&m.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-800/80 flex flex-col items-center justify-center z-10 rounded-lg",children:[m.jsx(Sn,{}),m.jsx("p",{className:"mt-4 font-semibold text-gray-700 dark:text-gray-300",children:ie?"AI is personalizing your tutorial...":de?"AI is reviewing your submission...":"AI is generating media..."})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start mb-2 gap-2",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100 pr-4",children:s.title}),m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.length>1&&m.jsx("select",{onChange:B=>l(Number(B.target.value)),value:s.version,className:"text-xs bg-gray-100 dark:bg-gray-700 rounded-full px-2 py-1 border-0 focus:ring-2 focus:ring-indigo-500",children:c.map(B=>m.jsxs("option",{value:B.version,children:["v",B.version]},B.id))}),I&&m.jsx(X,{status:s.status})]})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[r.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:r.map(B=>m.jsx("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",children:B},B))}),s.aiProvider&&m.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mb-4",children:["Generated by ",s.aiProvider]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"text-sm font-medium",children:"View as:"}),["text","presentation","audio"].map(B=>m.jsx("button",{onClick:()=>Xe(B),className:`px-3 py-1 text-sm rounded-full capitalize ${te===B?"bg-indigo-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:B},B))]}),ae&&m.jsx("p",{className:"text-red-500 mt-2 text-sm",children:ae})]}),s.status==="rejected"&&m.jsxs("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 rounded-md",children:[m.jsx("h4",{className:"font-semibold text-red-800 dark:text-red-300",children:"Feedback from AI Reviewer:"}),m.jsx("p",{className:"text-sm text-red-700 dark:text-red-200 mt-1",children:s.evaluationFeedback})]}),s.status==="public"&&s.evaluationFeedback&&m.jsxs("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md",children:[m.jsx("h4",{className:"font-semibold text-green-800 dark:text-green-300",children:"Note from AI Reviewer:"}),m.jsx("p",{className:"text-sm text-green-700 dark:text-green-200 mt-1",children:s.evaluationFeedback})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs(vt,{className:"bg-gray-50 dark:bg-gray-700/50",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Learning Objectives"}),m.jsx("ul",{className:"list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300",children:s.learningObjectives.map((B,J)=>m.jsx("li",{children:B},J))})]}),te!=="text"?ue():R(),m.jsxs(vt,{className:"bg-gray-50 dark:bg-gray-700/50",children:[m.jsx("h3",{className:"text-lg font-semibold mb-2",children:s.practicalExercise.title}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s.practicalExercise.description})]})]}),m.jsxs("div",{className:"mt-8 border-t pt-6 border-gray-200 dark:border-gray-700",children:[!v&&!s.isCompleted&&m.jsxs("button",{onClick:()=>x(!0),className:"w-full bg-indigo-600 text-white py-3 px-4 rounded-md hover:bg-indigo-700 font-semibold",children:["Take the Quiz (Attempt ",(s.attempts||0)+1,")"]}),(s.isCompleted||L)&&m.jsxs("div",{className:"flex justify-center items-center gap-4",children:[m.jsx("p",{className:"text-sm font-medium",children:"Was this tutorial helpful?"}),m.jsx("button",{onClick:()=>H("up"),className:`p-2 rounded-full ${s.rating==="up"?"bg-green-200 dark:bg-green-800":"hover:bg-green-100 dark:hover:bg-green-900"}`,children:m.jsx("svg",{className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.085a2 2 0 00-1.736.97l-2.714 5.428a2 2 0 001.736 2.97h4.618a2 2 0 002-2z"})})}),m.jsx("button",{onClick:()=>H("down"),className:`p-2 rounded-full ${s.rating==="down"?"bg-red-200 dark:bg-red-800":"hover:bg-red-100 dark:hover:bg-red-900"}`,children:m.jsx("svg",{className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.738 3h4.017c.163 0 .326.02.485.06L17 4m-7 10v5a2 2 0 002 2h.085a2 2 0 001.736-.97l2.714-5.428a2 2 0 00-1.736-2.97h-4.618a2 2 0 00-2 2z"})})})]}),s.isCompleted&&m.jsxs("div",{className:"text-center p-4 mt-4 rounded-lg bg-green-100 dark:bg-green-900",children:[m.jsxs("p",{className:"text-lg font-bold text-green-800 dark:text-green-200",children:["Tutorial Completed! Score: ",s.score," / ",A]}),m.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["Total Attempts: ",s.attempts]}),I&&s.status==="private"&&m.jsx("button",{onClick:()=>y(Ue),className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-semibold disabled:bg-gray-400",children:"Contribute to Public Library"})]}),v&&!s.isCompleted&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-center mb-6",children:"Knowledge Check"}),ye&&m.jsxs("div",{className:"text-center p-4 mb-6 rounded-lg bg-red-100 dark:bg-red-900",children:[m.jsxs("p",{className:"text-lg font-bold text-red-800 dark:text-red-200",children:["Score: ",s.score," / ",A,". Keep trying!"]}),m.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Let our AI explain the concepts differently to help you learn."}),m.jsx("button",{onClick:()=>y(O),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:"Regenerate Tutorial & Retry Quiz"}),ae&&m.jsx("p",{className:"text-red-500 mt-2 text-sm",children:ae})]}),m.jsx("div",{className:"space-y-6",children:s.quiz.map(B=>m.jsxs("div",{children:[m.jsxs("p",{className:"font-medium mb-3",children:[B.id,". ",B.text]}),m.jsx("div",{className:"space-y-2",children:B.options.map(J=>m.jsx("button",{onClick:()=>N(B.id,J.id),disabled:L,className:`w-full text-left p-3 rounded-md border-2 transition-colors ${le(B,J.id)} disabled:cursor-not-allowed`,children:J.text},J.id))}),L&&m.jsx("div",{className:"mt-3 p-3 rounded-md text-sm bg-gray-100 dark:bg-gray-700",children:m.jsxs("p",{children:[m.jsx("strong",{className:"font-semibold",children:"Explanation:"})," ",B.explanation]})})]},B.id))}),!L&&m.jsx("button",{onClick:j,disabled:Object.keys(w).length!==A,className:"w-full mt-8 bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Submit Answers"})]})]})]})},bR=({user:s,tutorials:e,updateTutorial:n,integrations:r,requireAi:l,activeAiProvider:c,activeAiProviderKey:d})=>{const[p,y]=re.useState("mine"),[v,x]=re.useState({}),w=re.useCallback(ce=>{let te=0;const oe=[],C=r.filter(A=>A.status==="connected").map(A=>A.platform);s.marketingKnowledgeLevel&&ce.knowledgeLevel.includes(s.marketingKnowledgeLevel)&&(te+=10,oe.push(`${s.marketingKnowledgeLevel} Level`)),s.learningStyle&&ce.learningStyle.includes(s.learningStyle)&&(te+=9,oe.push(`For Your ${s.learningStyle} Style`)),ce.relevantIndustries.includes(s.industry)&&(te+=8,oe.push("For Your Industry"));const S=ce.relevantPlatforms.filter(A=>C.includes(A));return S.length>0&&(te+=S.length*5,oe.push(`Relevant to ${S.join(", ")}`)),{tutorial:ce,score:te,reasons:oe}},[s,r]),k=re.useMemo(()=>{const te=e.map(w).reduce((A,I)=>{const N=I.tutorial.parentId||I.tutorial.id;return A[N]||(A[N]=[]),A[N].push(I),A},{});Object.values(te).forEach(A=>{A.sort((I,N)=>N.tutorial.version-I.tutorial.version)});const oe=A=>Object.values(A).map(I=>{const N=v[I[0].tutorial.parentId||I[0].tutorial.id]||I[0].tutorial.version;return I.find(j=>j.tutorial.version===N)||I[0]}).sort((I,N)=>N.score-I.score),C=Object.entries(te).reduce((A,[I,N])=>(N.some(j=>j.tutorial.createdByUserId===s.id)&&(A[I]=N),A),{}),S=Object.entries(te).reduce((A,[I,N])=>(N.some(j=>j.tutorial.status==="public")&&(A[I]=N),A),{});return{myTutorials:oe(C),publicTutorials:oe(S),allVersions:te}},[e,s.id,w,v]),L=(ce,te,oe)=>{const C=te||ce;x(S=>({...S,[C]:oe}))},Q="px-4 py-2 text-sm font-medium rounded-md focus:outline-none transition-colors",ie="bg-indigo-600 text-white",W="text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",de=k.myTutorials.filter(ce=>!ce.tutorial.isCompleted),pe=k.myTutorials.filter(ce=>ce.tutorial.isCompleted),ae=ce=>ce.map(({tutorial:te,reasons:oe})=>{var A;const C=te.parentId||te.id,S=((A=k.allVersions[C])==null?void 0:A.map(I=>({version:I.tutorial.version,id:I.tutorial.id})))||[{version:te.version,id:te.id}];return m.jsx(_R,{tutorial:te,user:s,updateTutorial:n,relevanceTags:oe,onVersionChange:I=>L(te.id,te.parentId,I),versionHistory:S,activeAiProvider:c,activeAiProviderKey:d,requireAi:l},te.id)});return m.jsx("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Tutorials"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Engage with your private AI-generated tutorials or browse the public library of expert-vetted content. Tutorials are sorted by relevance to you."}),m.jsx("div",{className:"mb-8 flex justify-center border-b border-gray-200 dark:border-gray-700",children:m.jsxs("div",{className:"flex flex-wrap justify-center space-x-2 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[m.jsx("button",{onClick:()=>y("mine"),className:`${Q} ${p==="mine"?ie:W}`,children:"My Tutorials"}),m.jsxs("button",{onClick:()=>y("completed"),className:`${Q} ${p==="completed"?ie:W}`,children:["Completed (",pe.length,")"]}),m.jsx("button",{onClick:()=>y("public"),className:`${Q} ${p==="public"?ie:W}`,children:"Public Library"})]})}),p==="mine"&&m.jsx("div",{className:"space-y-6",children:de.length===0?m.jsx(vt,{children:m.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"You have no active tutorials. Go to the dashboard to create one, or check your completed tab!"})}):ae(de)}),p==="completed"&&m.jsx("div",{className:"space-y-6",children:pe.length===0?m.jsx(vt,{children:m.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"You haven't completed any tutorials yet. Keep learning!"})}):ae(pe)}),p==="public"&&m.jsx("div",{className:"space-y-6",children:k.publicTutorials.length===0?m.jsx(vt,{children:m.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"The public library is empty. Contribute a tutorial to be the first!"})}):ae(k.publicTutorials)})]})})},xR=()=>m.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),ER=({user:s,strategy:e,onStrategyUpdate:n,integrations:r,suggestions:l,addSuggestions:c,updateSuggestion:d,setCurrentPage:p,activeAiProvider:y,activeAiProviderKey:v})=>{const[x,w]=re.useState(e?"ready":"start"),[k,L]=re.useState([]),[Q,ie]=re.useState(""),[W,de]=re.useState(!1),[pe,ae]=re.useState(null),[ce,te]=re.useState(!1),oe=re.useRef(null),C=4;re.useEffect(()=>{var X;(X=oe.current)==null||X.scrollIntoView({behavior:"smooth"})},[k]);const S=async()=>{if(!(!e||!y||!v)){te(!0);try{const ue=(await sR(s,r,e,l,y,v)).map(R=>({...R,id:`${Date.now()}-${Math.random()}`,status:"suggested",outcome:null,isPublic:!1,suggestedForUserId:s.id}));c(ue)}catch(X){console.error("Failed to fetch strategy suggestions:",X)}finally{te(!1)}}};re.useEffect(()=>{x==="ready"&&e&&S()},[x,e]);const A=()=>{L([{speaker:"ai",text:"Hello! I'm your AI Strategy Assistant. To start, what is the primary goal of your marketing efforts right now? (e.g., Brand Awareness, Lead Generation, Sales, etc.)"}]),w("conversation")},I=async X=>{if(X.preventDefault(),!Q.trim()||W||!y||!v)return;const ue={speaker:"user",text:Q},R=[...k,ue];L(R),ie(""),de(!0),ae(null);try{const H=await nR(s,R,y,v);L(B=>[...B,{speaker:"ai",text:H}])}catch(H){ae(H instanceof Error?H.message:"An error occurred.")}finally{de(!1)}},N=async()=>{if(!(!y||!v)){w("generating"),ae(null);try{const X=await iR(s,k,y,v);n(X),w("ready")}catch(X){ae(X instanceof Error?X.message:"Failed to generate strategy. Please try again."),w("conversation")}}},j=X=>{if(!e)return;const ue=e.actionableSteps.map(R=>R.id===X?{...R,completed:!R.completed}:R);n({...e,actionableSteps:ue})},O=X=>{d(X,{status:"implemented"})},Ue=(e==null?void 0:e.actionableSteps.filter(X=>X.completed).length)||0,Xe=(e==null?void 0:e.actionableSteps.length)||0,K=Xe>0?Ue/Xe*100:0,le=k.filter(X=>X.speaker==="ai").length,ye=l.filter(X=>X.suggestedForUserId===s.id&&X.status==="suggested");return y?m.jsx("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Marketing Strategy"}),x==="start"&&m.jsx(vt,{children:m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:"Let's build a tailored marketing strategy for your business. The AI will ask you a few questions to get started."}),m.jsx("button",{onClick:A,className:"px-8 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-semibold text-lg",children:"Start Building"})]})}),(x==="conversation"||x==="generating")&&m.jsxs(vt,{children:[m.jsxs("div",{className:"h-[500px] overflow-y-auto pr-4 space-y-4 mb-4",children:[k.map((X,ue)=>m.jsxs("div",{className:`flex items-end gap-2 ${X.speaker==="user"?"justify-end":"justify-start"}`,children:[X.speaker==="ai"&&m.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:"AI"}),m.jsx("div",{className:`max-w-md p-3 rounded-lg ${X.speaker==="user"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:m.jsx("p",{children:X.text})})]},ue)),W&&m.jsxs("div",{className:"flex items-end gap-2 justify-start",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold text-sm flex-shrink-0",children:"AI"}),m.jsx("div",{className:"max-w-md p-3 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),m.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-75"}),m.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-150"})]})})]}),m.jsx("div",{ref:oe})]}),x==="conversation"&&le<C&&m.jsxs("form",{onSubmit:I,className:"flex gap-4",children:[m.jsx("input",{type:"text",value:Q,onChange:X=>ie(X.target.value),placeholder:"Type your answer...",className:"flex-grow px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600",disabled:W}),m.jsx("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",disabled:W||!Q.trim(),children:"Send"})]}),x==="conversation"&&le>=C&&!W&&m.jsx("div",{className:"text-center mt-4",children:m.jsx("button",{onClick:N,className:"px-6 py-3 bg-green-600 text-white rounded-md hover:bg-green-700 font-semibold text-lg",children:"Generate My Strategy"})}),x==="generating"&&m.jsxs("div",{className:"text-center p-8",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx(Sn,{})}),m.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Analyzing your answers and building your strategy..."})]}),pe&&m.jsx("p",{className:"text-red-500 mt-4 text-sm",children:pe})]}),x==="ready"&&e&&m.jsxs("div",{className:"space-y-6",children:[m.jsxs(vt,{children:[m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-3xl font-bold mb-2 text-indigo-600 dark:text-indigo-400",children:e.title}),e.aiProvider&&m.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 -mt-2 mb-2",children:["Generated by ",e.aiProvider]})]}),m.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 mb-6",children:e.summary}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Key Objectives"}),m.jsx("ul",{className:"list-disc list-inside space-y-2 pl-4",children:e.keyObjectives.map((X,ue)=>m.jsx("li",{children:X},ue))})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Action Plan"}),m.jsxs("div",{className:"mb-2",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("span",{className:"text-sm font-medium",children:"Progress"}),m.jsxs("span",{className:"text-sm font-medium",children:[Ue," / ",Xe," Completed"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 dark:bg-gray-700",children:m.jsxs("div",{className:"bg-green-500 h-4 rounded-full text-center text-white text-xs transition-all duration-500",style:{width:`${K}%`},children:[Math.round(K),"%"]})})]}),m.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:e.actionableSteps.map(X=>m.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-900 rounded-md flex items-center",children:[m.jsx("input",{type:"checkbox",id:X.id,checked:X.completed,onChange:()=>j(X.id),className:"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 cursor-pointer"}),m.jsx("label",{htmlFor:X.id,className:`ml-3 text-gray-800 dark:text-gray-200 cursor-pointer ${X.completed?"line-through text-gray-500":""}`,children:X.description})]},X.id))})]})]})]}),m.jsxs(vt,{children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h3",{className:"text-xl font-semibold flex items-center gap-3",children:[m.jsx(xR,{}),"AI-Powered Suggestions"]}),m.jsx("button",{onClick:S,disabled:ce,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400 text-sm font-semibold flex items-center justify-center",children:ce?m.jsx(Sn,{}):"Get New Ideas"})]}),ce&&ye.length===0?m.jsxs("div",{className:"flex justify-center items-center py-8",children:[m.jsx(Sn,{}),m.jsx("p",{className:"ml-4",children:"Analyzing your strategy for new insights..."})]}):m.jsx("div",{className:"space-y-4",children:ye.length>0?ye.map(X=>m.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border-l-4 border-indigo-400",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h4",{className:"font-semibold text-indigo-800 dark:text-indigo-300",children:X.title}),X.aiProvider&&m.jsxs("span",{className:"text-xs text-indigo-400 dark:text-indigo-500",children:["by ",X.aiProvider]})]}),m.jsx("p",{className:"mt-1 text-sm text-indigo-700 dark:text-indigo-200",children:X.rationale}),m.jsx("div",{className:"mt-4 flex justify-end",children:m.jsx("button",{onClick:()=>O(X.id),className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-semibold",children:"Implement"})})]},X.id)):m.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'Click "Get New Ideas" to have the AI generate contextual suggestions for your strategy.'})})]})]})]})}):m.jsx("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:m.jsx("div",{className:"px-4 py-6 sm:px-0",children:m.jsx(vt,{children:m.jsxs("div",{className:"text-center p-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-4",children:"Enable the AI Strategy Builder"}),m.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-6",children:"This feature requires an active AI provider. To build your personalized marketing strategy, please connect and activate either OpenAI or Gemini."}),m.jsx("button",{onClick:()=>p("integrations"),className:"px-8 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-semibold text-lg",children:"Connect an AI Provider"})]})})})})},TR=({suggestions:s,user:e})=>{const[n,r]=re.useState("All"),[l,c]=re.useState("All"),d=re.useMemo(()=>s.filter(x=>x.isPublic&&x.outcome==="success"),[s]),p=re.useMemo(()=>{const x=new Set(d.map(w=>w.relevantGoal));return["All",...Array.from(x)]},[d]),y=re.useMemo(()=>d.filter(x=>{const w=n==="All"||x.relevantIndustry===n,k=l==="All"||x.relevantGoal===l;return w&&k}),[d,n,l]),v="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400";return m.jsx("div",{className:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Community Knowledge Base"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-8",children:"Explore successful, AI-vetted marketing suggestions that have worked for other users. Learn from the community's collective experience."}),m.jsx(vt,{className:"mb-8",children:m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"industry-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Industry"}),m.jsxs("select",{id:"industry-filter",value:n,onChange:x=>r(x.target.value),className:v,children:[m.jsx("option",{value:"All",children:"All Industries"}),j_.map(x=>m.jsx("option",{value:x,children:x},x))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"goal-filter",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filter by Goal"}),m.jsx("select",{id:"goal-filter",value:l,onChange:x=>c(x.target.value),className:v,children:p.map(x=>m.jsx("option",{value:x,children:x},x))})]})]})}),m.jsx("div",{className:"space-y-6",children:y.length>0?y.map(x=>m.jsxs(vt,{children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h3",{className:"text-xl font-semibold text-indigo-700 dark:text-indigo-400",children:x.title}),x.aiProvider&&m.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:["by ",x.aiProvider]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 my-3",children:[m.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:["Goal: ",x.relevantGoal]}),m.jsxs("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:["Industry: ",x.relevantIndustry]})]}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:x.rationale}),x.evaluationFeedback&&m.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-md text-sm text-green-700 dark:text-green-300 border border-green-200 dark:border-green-700",children:[m.jsx("strong",{children:"AI Reviewer Note:"})," ",x.evaluationFeedback]})]},x.id)):m.jsx(vt,{children:m.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No public suggestions match your filters yet. Try broadening your search or be the first to contribute a successful idea from your dashboard!"})})})]})})},SR=()=>m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M12 12a3 3 0 100-6 3 3 0 000 6z"})}),wR=()=>m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),AR=()=>m.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),O_=({theme:s,setTheme:e})=>{const n="p-2 rounded-md transition-colors",r="bg-indigo-600 text-white",l="text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700";return m.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 dark:bg-gray-800 p-1 rounded-lg",children:[m.jsx("button",{onClick:()=>e("light"),className:`${n} ${s==="light"?r:l}`,"aria-label":"Light mode",children:m.jsx(SR,{})}),m.jsx("button",{onClick:()=>e("dark"),className:`${n} ${s==="dark"?r:l}`,"aria-label":"Dark mode",children:m.jsx(wR,{})}),m.jsx("button",{onClick:()=>e("system"),className:`${n} ${s==="system"?r:l}`,"aria-label":"System default",children:m.jsx(AR,{})})]})},CR=()=>m.jsx("svg",{className:"w-8 h-8 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),IR=()=>m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),NR=()=>m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),RR=({user:s,onLogout:e,currentPage:n,setCurrentPage:r,theme:l,setTheme:c,integrations:d})=>{const[p,y]=re.useState(!1),v=d.some(Q=>(Q.platform===we.OpenAI||Q.platform===we.Gemini)&&Q.status==="connected"),x="block px-3 py-2 rounded-md text-base font-medium transition-colors",w="bg-indigo-600 text-white",k="text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",L=({page:Q,children:ie,disabled:W=!1})=>m.jsx("a",{onClick:()=>{W||(r(Q),y(!1))},className:`${x} ${n===Q?w:k} ${W?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:ie});return m.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-md sticky top-0 z-40",children:[m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 cursor-pointer",onClick:()=>r("dashboard"),children:[m.jsx(CR,{}),m.jsx("span",{className:"font-bold text-xl text-gray-800 dark:text-white",children:"ALI"})]}),m.jsx("nav",{className:"hidden md:block ml-10",children:m.jsxs("div",{className:"flex items-baseline space-x-4",children:[m.jsx(L,{page:"dashboard",children:"Dashboard"}),m.jsx(L,{page:"integrations",children:"Integrations"}),m.jsx(L,{page:"tutorials",children:"Tutorials"}),m.jsx(ca,{text:v?"":"Connect an AI provider (OpenAI or Gemini) to enable Strategy Builder.",children:m.jsx("div",{children:m.jsx(L,{page:"strategy",disabled:!v,children:"Strategy"})})}),m.jsx(L,{page:"knowledge-base",children:"Knowledge Base"})]})})]}),m.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[m.jsx(O_,{theme:l,setTheme:c}),m.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Welcome, ",s.name]}),m.jsx("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-sm",children:"Logout"})]}),m.jsx("div",{className:"md:hidden flex items-center",children:m.jsx("button",{onClick:()=>y(!p),className:"p-2 rounded-md text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:p?m.jsx(NR,{}):m.jsx(IR,{})})})]})}),p&&m.jsxs("div",{className:"md:hidden",children:[m.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[m.jsx(L,{page:"dashboard",children:"Dashboard"}),m.jsx(L,{page:"integrations",children:"Integrations"}),m.jsx(L,{page:"tutorials",children:"Tutorials"}),m.jsx(ca,{text:v?"":"Connect an AI provider to enable.",children:m.jsx("div",{children:m.jsx(L,{page:"strategy",disabled:!v,children:"Strategy"})})}),m.jsx(L,{page:"knowledge-base",children:"Knowledge Base"})]}),m.jsxs("div",{className:"pt-4 pb-3 border-t border-gray-200 dark:border-gray-700",children:[m.jsxs("div",{className:"flex items-center justify-between px-4",children:[m.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Welcome, ",s.name]}),m.jsx(O_,{theme:l,setTheme:c})]}),m.jsx("div",{className:"mt-3 px-2 space-y-1",children:m.jsx("button",{onClick:e,className:"w-full text-left block px-3 py-2 rounded-md text-base font-medium text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700",children:"Logout"})})]})]})]})},kR=({isOpen:s,onClose:e,onConnect:n})=>m.jsxs(mr,{isOpen:s,onClose:e,title:"AI Connection Required",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("svg",{className:"mx-auto mb-4 h-12 w-12 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Feature Requires AI Power"}),m.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:m.jsx("p",{children:"This feature requires a connection to an AI provider. To use it, please connect either your OpenAI or Gemini account by providing an API key on the Integrations page."})})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancel"}),m.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 font-semibold",children:"Go to Integrations"})]})]}),OR=()=>{const[s,e]=re.useState(null),[n,r]=re.useState(!0),[l,c]=re.useState("dashboard"),[d,p]=re.useState(null),[y,v]=re.useState(XE),[x,w]=re.useState(null),[k,L]=re.useState([]),[Q,ie]=re.useState("system"),[W,de]=re.useState(!1),[pe,ae]=re.useState(null);re.useEffect(()=>{const X=MS(Eh,async ue=>{if(ue){const R=Ul(Bl,"users",ue.uid),H=await cN(R);if(H.exists()){const B=H.data();B.integrations||(B.integrations=M_),e(B)}else console.error("User profile not found in Firestore for authenticated user."),e(null)}else e(null);r(!1)});return()=>X()},[]);const ce=(s==null?void 0:s.integrations)||[],te=ce.find(X=>X.platform===d&&X.status==="connected"),oe=re.useCallback(X=>{te?X():de(!0)},[te]),C=()=>{de(!1);const X=ce.find(ue=>(ue.platform==="OpenAI"||ue.platform==="Gemini")&&ue.status!=="connected");ae((X==null?void 0:X.platform)||we.OpenAI),c("integrations")},S=re.useCallback(()=>{ae(null)},[]);re.useEffect(()=>{const X=localStorage.getItem("ali-theme");X&&ie(X)},[]),re.useEffect(()=>{const X=document.documentElement;Q==="dark"||Q==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?X.classList.add("dark"):X.classList.remove("dark"),localStorage.setItem("ali-theme",Q);const R=window.matchMedia("(prefers-color-scheme: dark)"),H=()=>{Q==="system"&&(R.matches?X.classList.add("dark"):X.classList.remove("dark"))};return R.addEventListener("change",H),()=>R.removeEventListener("change",H)},[Q]);const A=re.useCallback(async(X,ue,R)=>{if(!s)return;const H=s.integrations.map(J=>{if(J.platform===X){const fe={...J,status:ue,errorMessage:R==null?void 0:R.errorMessage};return R!=null&&R.apiKey&&(fe.apiKey=R.apiKey),ue!=="error"&&delete fe.errorMessage,ue==="disconnected"&&delete fe.apiKey,fe}return J}),B=Ul(Bl,"users",s.id);await A_(B,{integrations:H}),e(J=>J?{...J,integrations:H}:null)},[s]);re.useEffect(()=>{if(!d){const X=ce.find(ue=>(ue.platform==="OpenAI"||ue.platform==="Gemini")&&ue.status==="connected");X&&p(X.platform)}if(d&&!ce.some(ue=>ue.platform===d&&ue.status==="connected")){const ue=d==="OpenAI"?"Gemini":"OpenAI",R=ce.some(H=>H.platform===ue&&H.status==="connected");p(R?ue:null)}},[ce,d]),re.useEffect(()=>{s!=null&&s.integrations&&(async()=>{const ue=s.integrations.filter(J=>J.status==="connected");if(ue.length===0)return;const R=ue.map(async J=>{if(!J.apiKey)return{platform:J.platform,status:"error",errorMessage:"Missing API key for connected integration."};const fe=await rx(J.platform,J.apiKey);return fe.valid?null:(console.warn(`Verification failed for ${J.platform}: ${fe.error}`),{platform:J.platform,status:"error",errorMessage:fe.error||"Token has expired or is invalid. Please reconnect."})}),B=(await Promise.all(R)).filter(J=>J!==null);if(B.length>0){const J=s.integrations.map(me=>{const Ie=B.find(Ve=>Ve.platform===me.platform);if(Ie){const Ve={...me,status:Ie.status,errorMessage:Ie.errorMessage};return delete Ve.apiKey,Ve}return me}),fe=Ul(Bl,"users",s.id);await A_(fe,{integrations:J}),e(me=>me?{...me,integrations:J}:null)}})()},[s]);const I=async(X,ue)=>{if(!s)return;let R={...s};const H=ql.find(me=>me.id==="hft");if(H&&X.hft&&ue.hft){let me=0,Ie=0;H.questions.forEach(mn=>{X.hft[mn.id]===mn.correctOptionId&&(me++,Ie+=ue.hft[mn.id]||0)});const Ve=H.questions.length>0?me/H.questions.length:0,Ge=me>0?Ie/me/1e3:30,fn=Ve/Ge;let un="Balanced";fn>.08?un="Analytical":fn<.04&&(un="Contextual"),R={...R,learningStyle:un,hftAccuracy:Ve,hftAvgResponseTime:Ge,hftFdi:fn}}const B=ql.find(me=>me.id==="marketing_knowledge");if(B&&X.marketing_knowledge){let me=0;B.questions.forEach(Ge=>{X.marketing_knowledge[Ge.id]===Ge.correctOptionId&&me++});const Ie=me/B.questions.length*100;let Ve="Beginner";Ie>70?Ve="Advanced":Ie>40&&(Ve="Intermediate"),R.marketingKnowledgeLevel=Ve}const J=ql.find(me=>me.id==="eq");J&&X.eq&&(R.eqProfile=oR(X.eq,J));const fe=Ul(Bl,"users",R.id);await ex(fe,R,{merge:!0}),e(R)},N=async()=>{await jS(Eh),e(null),c("dashboard")},j=re.useCallback(X=>{if(!s)return;const ue={...X,id:new Date().toISOString(),parentId:null,version:1,createdByUserId:s.id,status:"private",isCompleted:!1,score:0,attempts:0,rating:null};v(R=>[ue,...R])},[s]),O=re.useCallback((X,ue,R)=>{v(H=>R?[...H,R]:H.map(B=>B.id===X?{...B,...ue}:B))},[]),Ue=re.useCallback(X=>{w(ue=>({...X,suggestions:(ue==null?void 0:ue.suggestions)||[]}))},[]),Xe=re.useCallback(X=>{L(ue=>[...ue,...X])},[]),K=re.useCallback((X,ue)=>{L(R=>R.map(H=>H.id===X?{...H,...ue}:H))},[]),le=!!(s!=null&&s.eqProfile),ye=()=>{if(n)return m.jsx("div",{className:"h-screen flex items-center justify-center",children:m.jsx(Sn,{})});if(!s)return m.jsx(VN,{});if(!le)return m.jsx(LN,{onComplete:I});switch(l){case"dashboard":return m.jsx(k_,{user:s,integrations:ce,tutorials:y,addTutorial:j,setCurrentPage:c,suggestions:k,updateSuggestion:K,addSuggestions:Xe,requireAi:oe,activeAiProvider:d,activeAiProviderKey:te==null?void 0:te.apiKey});case"integrations":return m.jsx(yR,{integrations:ce,updateIntegrationStatus:A,autoOpenPlatform:pe,onAutoOpenDone:S,activeAiProvider:d,setActiveAiProvider:p});case"tutorials":return m.jsx(bR,{user:s,tutorials:y,updateTutorial:O,integrations:ce,requireAi:oe,activeAiProvider:d,activeAiProviderKey:te==null?void 0:te.apiKey});case"strategy":return m.jsx(ER,{user:s,strategy:x,onStrategyUpdate:Ue,integrations:ce,suggestions:k,addSuggestions:Xe,updateSuggestion:K,setCurrentPage:c,activeAiProvider:d,activeAiProviderKey:te==null?void 0:te.apiKey});case"knowledge-base":return m.jsx(TR,{user:s,suggestions:k});default:return m.jsx(k_,{user:s,integrations:ce,tutorials:y,addTutorial:j,setCurrentPage:c,suggestions:k,updateSuggestion:K,addSuggestions:Xe,requireAi:oe,activeAiProvider:d,activeAiProviderKey:te==null?void 0:te.apiKey})}};return m.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 font-sans",children:[s&&le&&m.jsx(RR,{user:s,onLogout:N,currentPage:l,setCurrentPage:c,theme:Q,setTheme:ie,integrations:ce}),m.jsx("main",{children:ye()}),m.jsx(kR,{isOpen:W,onClose:()=>de(!1),onConnect:C})]})},ax=document.getElementById("root");if(!ax)throw new Error("Could not find root element to mount to");const DR=YE.createRoot(ax);DR.render(m.jsx(zE.StrictMode,{children:m.jsx(OR,{})}));
